/*
 * QueryLoader v2 - A simple script to create a preloader for images
 *
 * For instructions read the original post:
 * http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/
 *
 * Copyright (c) 2011 - Gaya Kessler
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Version:  2.9.0
 * Last update: 2014-01-31
 */
!function(a){function b(a){this.parent=a,this.container,this.loadbar,this.percentageContainer}function c(a){this.toPreload=[],this.parent=a,this.container}function d(a){this.element,this.parent=a}function e(d,e){this.element=d,this.$element=a(d),this.options=e,this.foundUrls=[],this.destroyed=!1,this.imageCounter=0,this.imageDone=0,this.alreadyLoaded=!1,this.preloadContainer=new c(this),this.overlayLoader=new b(this),this.defaultOptions={onComplete:function(){},onLoadComplete:function(){},backgroundColor:"#000",barColor:"#fff",overlayId:"qLoverlay",barHeight:1,percentage:!1,deepSearch:!0,completeAnimation:"fade",minimumTime:500},this.init()}!function(a){"use strict";function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define(f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("eventEmitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(this,function(a,b,c){"use strict";function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var d=c.querySelectorAll("img"),e=0,f=d.length;f>e;e++){var g=d[e];this.addImage(g)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a){return b.options.debug&&l,b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return this.complete(),void 0;for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return this.confirm(a.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),b.prototype.createOverlay=function(){var b="absolute";if("body"==this.parent.element.tagName.toLowerCase())b="fixed";else{var c=this.parent.$element.css("position");("fixed"!=c||"absolute"!=c)&&this.parent.$element.css("position","relative")}this.container=a("<div id='"+this.parent.options.overlayId+"'></div>").css({width:"100%",height:"100%",backgroundColor:this.parent.options.backgroundColor,backgroundPosition:"fixed",position:b,zIndex:666999,top:0,left:0}).appendTo(this.parent.$element),this.loadbar=a("<div id='qLbar'></div>").css({height:this.parent.options.barHeight+"px",marginTop:"-"+this.parent.options.barHeight/2+"px",backgroundColor:this.parent.options.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(this.container),1==this.parent.options.percentage&&(this.percentageContainer=a("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute",fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+this.parent.options.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:this.parent.options.barColor}).appendTo(this.container)),this.parent.preloadContainer.toPreload.length&&1!=this.parent.alreadyLoaded||this.parent.destroyContainers()},b.prototype.updatePercentage=function(a){this.loadbar.stop().animate({width:a+"%",minWidth:a+"%"},200),1==this.parent.options.percentage&&this.percentageContainer.text(Math.ceil(a)+"%")},c.prototype.create=function(){this.container=a("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"}),this.processQueue()},c.prototype.processQueue=function(){for(var a=0;this.toPreload.length>a;a++)this.parent.destroyed||this.preloadImage(this.toPreload[a])},c.prototype.addImage=function(a){this.toPreload.push(a)},c.prototype.preloadImage=function(a){var b=new d;b.addToPreloader(this,a),b.bindLoadEvent()},d.prototype.addToPreloader=function(b,c){this.element=a("<img />").attr("src",c),this.element.appendTo(b.container),this.parent=b.parent},d.prototype.bindLoadEvent=function(){this.parent.imageCounter++,this.element[0].ref=this,new imagesLoaded(this.element,function(a){a.elements[0].ref.completeLoading()})},d.prototype.completeLoading=function(){this.parent.imageDone++;var a=100*(this.parent.imageDone/this.parent.imageCounter);this.parent.overlayLoader.updatePercentage(a),(this.parent.imageDone==this.parent.imageCounter||a>=100)&&this.parent.endLoader()},e.prototype.init=function(){if(this.options=a.extend({},this.defaultOptions,this.options),this.findImageInElement(this.element),1==this.options.deepSearch)for(var b=this.$element.find("*:not(script)"),c=0;c<b.length;c++)this.findImageInElement(b[c]);this.preloadContainer.create(),this.overlayLoader.createOverlay()},e.prototype.findImageInElement=function(b){var c="",e=a(b),f="normal";if("none"!=e.css("background-image")?(c=e.css("background-image"),f="background"):"undefined"!=typeof e.attr("src")&&"img"==b.nodeName.toLowerCase()&&(c=e.attr("src")),!this.hasGradient(c)){c=this.stripUrl(c);for(var g=c.split(", "),h=0;h<g.length;h++)if(this.validUrl(g[h])&&this.urlIsNew(g[h])){var i="";if(this.isIE()||this.isOpera())i="?rand="+Math.random(),this.preloadContainer.addImage(g[h]+i);else if("background"==f)this.preloadContainer.addImage(g[h]+i);else{var j=new d(this);j.element=e,j.bindLoadEvent()}this.foundUrls.push(g[h])}}},e.prototype.hasGradient=function(a){return-1==a.indexOf("gradient")?!1:!0},e.prototype.stripUrl=function(a){return a=a.replace(/url\(\"/g,""),a=a.replace(/url\(/g,""),a=a.replace(/\"\)/g,""),a=a.replace(/\)/g,"")},e.prototype.isIE=function(){return navigator.userAgent.match(/msie/i)},e.prototype.isOpera=function(){return navigator.userAgent.match(/Opera/i)},e.prototype.validUrl=function(a){return a.length>0&&!a.match(/^(data:)/i)?!0:!1},e.prototype.urlIsNew=function(a){return-1==this.foundUrls.indexOf(a)?!0:!1},e.prototype.destroyContainers=function(){this.destroyed=!0,this.preloadContainer.container.remove(),this.overlayLoader.container.remove()},e.prototype.endLoader=function(){this.destroyed=!0,this.onLoadComplete()},e.prototype.onLoadComplete=function(){if(this.options.onLoadComplete(),"grow"==this.options.completeAnimation){var b=this.options.minimumTime;this.overlayLoader.loadbar[0].parent=this,this.overlayLoader.loadbar.stop().animate({width:"100%"},b,function(){a(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){this.parent.overlayLoader.container[0].parent=this.parent,this.parent.overlayLoader.container.fadeOut(500,function(){this.parent.destroyContainers(),this.parent.options.onComplete()})})})}else{var b=this.options.minimumTime;this.overlayLoader.container[0].parent=this,this.overlayLoader.container.fadeOut(b,function(){this.parent.destroyContainers(),this.parent.options.onComplete()})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),a.fn.queryLoader2=function(a){return this.each(function(){new e(this,a)})}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkucXVlcnlsb2FkZXIyLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogUXVlcnlMb2FkZXIgdjIgLSBBIHNpbXBsZSBzY3JpcHQgdG8gY3JlYXRlIGEgcHJlbG9hZGVyIGZvciBpbWFnZXNcbiAqXG4gKiBGb3IgaW5zdHJ1Y3Rpb25zIHJlYWQgdGhlIG9yaWdpbmFsIHBvc3Q6XG4gKiBodHRwOi8vd3d3LmdheWFkZXNpZ24uY29tL2RpeS9xdWVyeWxvYWRlcjItcHJlbG9hZC15b3VyLWltYWdlcy13aXRoLWVhc2UvXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDExIC0gR2F5YSBLZXNzbGVyXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICpcbiAqIFZlcnNpb246ICAyLjkuMFxuICogTGFzdCB1cGRhdGU6IDIwMTQtMDEtMzFcbiAqL1xuIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5wYXJlbnQ9YSx0aGlzLmNvbnRhaW5lcix0aGlzLmxvYWRiYXIsdGhpcy5wZXJjZW50YWdlQ29udGFpbmVyfWZ1bmN0aW9uIGMoYSl7dGhpcy50b1ByZWxvYWQ9W10sdGhpcy5wYXJlbnQ9YSx0aGlzLmNvbnRhaW5lcn1mdW5jdGlvbiBkKGEpe3RoaXMuZWxlbWVudCx0aGlzLnBhcmVudD1hfWZ1bmN0aW9uIGUoZCxlKXt0aGlzLmVsZW1lbnQ9ZCx0aGlzLiRlbGVtZW50PWEoZCksdGhpcy5vcHRpb25zPWUsdGhpcy5mb3VuZFVybHM9W10sdGhpcy5kZXN0cm95ZWQ9ITEsdGhpcy5pbWFnZUNvdW50ZXI9MCx0aGlzLmltYWdlRG9uZT0wLHRoaXMuYWxyZWFkeUxvYWRlZD0hMSx0aGlzLnByZWxvYWRDb250YWluZXI9bmV3IGModGhpcyksdGhpcy5vdmVybGF5TG9hZGVyPW5ldyBiKHRoaXMpLHRoaXMuZGVmYXVsdE9wdGlvbnM9e29uQ29tcGxldGU6ZnVuY3Rpb24oKXt9LG9uTG9hZENvbXBsZXRlOmZ1bmN0aW9uKCl7fSxiYWNrZ3JvdW5kQ29sb3I6XCIjMDAwXCIsYmFyQ29sb3I6XCIjZmZmXCIsb3ZlcmxheUlkOlwicUxvdmVybGF5XCIsYmFySGVpZ2h0OjEscGVyY2VudGFnZTohMSxkZWVwU2VhcmNoOiEwLGNvbXBsZXRlQW5pbWF0aW9uOlwiZmFkZVwiLG1pbmltdW1UaW1lOjUwMH0sdGhpcy5pbml0KCl9IWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7dmFyIGM9YS5ldmVudDtyZXR1cm4gYy50YXJnZXQ9Yy50YXJnZXR8fGMuc3JjRWxlbWVudHx8YixjfXZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkPWZ1bmN0aW9uKCl7fTtjLmFkZEV2ZW50TGlzdGVuZXI/ZD1mdW5jdGlvbihhLGIsYyl7YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9OmMuYXR0YWNoRXZlbnQmJihkPWZ1bmN0aW9uKGEsYyxkKXthW2MrZF09ZC5oYW5kbGVFdmVudD9mdW5jdGlvbigpe3ZhciBjPWIoYSk7ZC5oYW5kbGVFdmVudC5jYWxsKGQsYyl9OmZ1bmN0aW9uKCl7dmFyIGM9YihhKTtkLmNhbGwoYSxjKX0sYS5hdHRhY2hFdmVudChcIm9uXCIrYyxhW2MrZF0pfSk7dmFyIGU9ZnVuY3Rpb24oKXt9O2MucmVtb3ZlRXZlbnRMaXN0ZW5lcj9lPWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX06Yy5kZXRhY2hFdmVudCYmKGU9ZnVuY3Rpb24oYSxiLGMpe2EuZGV0YWNoRXZlbnQoXCJvblwiK2IsYVtiK2NdKTt0cnl7ZGVsZXRlIGFbYitjXX1jYXRjaChkKXthW2IrY109dm9pZCAwfX0pO3ZhciBmPXtiaW5kOmQsdW5iaW5kOmV9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZjphLmV2ZW50aWU9Zn0odGhpcyksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKCl7fWZ1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdLmxpc3RlbmVyPT09YilyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBjKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19dmFyIGQ9YS5wcm90b3R5cGUsZT10aGlzLGY9ZS5FdmVudEVtaXR0ZXI7ZC5nZXRMaXN0ZW5lcnM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuX2dldEV2ZW50cygpO2lmKGEgaW5zdGFuY2VvZiBSZWdFeHApe2I9e307Zm9yKGMgaW4gZClkLmhhc093blByb3BlcnR5KGMpJiZhLnRlc3QoYykmJihiW2NdPWRbY10pfWVsc2UgYj1kW2FdfHwoZFthXT1bXSk7cmV0dXJuIGJ9LGQuZmxhdHRlbkxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjPVtdO2ZvcihiPTA7YjxhLmxlbmd0aDtiKz0xKWMucHVzaChhW2JdLmxpc3RlbmVyKTtyZXR1cm4gY30sZC5nZXRMaXN0ZW5lcnNBc09iamVjdD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuZ2V0TGlzdGVuZXJzKGEpO3JldHVybiBjIGluc3RhbmNlb2YgQXJyYXkmJihiPXt9LGJbYV09YyksYnx8Y30sZC5hZGRMaXN0ZW5lcj1mdW5jdGlvbihhLGMpe3ZhciBkLGU9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChhKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmLTE9PT1iKGVbZF0sYykmJmVbZF0ucHVzaChmP2M6e2xpc3RlbmVyOmMsb25jZTohMX0pO3JldHVybiB0aGlzfSxkLm9uPWMoXCJhZGRMaXN0ZW5lclwiKSxkLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmFkZExpc3RlbmVyKGEse2xpc3RlbmVyOmIsb25jZTohMH0pfSxkLm9uY2U9YyhcImFkZE9uY2VMaXN0ZW5lclwiKSxkLmRlZmluZUV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExpc3RlbmVycyhhKSx0aGlzfSxkLmRlZmluZUV2ZW50cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrPTEpdGhpcy5kZWZpbmVFdmVudChhW2JdKTtyZXR1cm4gdGhpc30sZC5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihhLGMpe3ZhciBkLGUsZj10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpO2ZvcihlIGluIGYpZi5oYXNPd25Qcm9wZXJ0eShlKSYmKGQ9YihmW2VdLGMpLC0xIT09ZCYmZltlXS5zcGxpY2UoZCwxKSk7cmV0dXJuIHRoaXN9LGQub2ZmPWMoXCJyZW1vdmVMaXN0ZW5lclwiKSxkLmFkZExpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsYSxiKX0sZC5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGEsYil9LGQubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWE/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLGc9YT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZihcIm9iamVjdFwiIT10eXBlb2YgYnx8YiBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoZD1jLmxlbmd0aDtkLS07KWYuY2FsbCh0aGlzLGIsY1tkXSk7ZWxzZSBmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihlPWJbZF0pJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9mLmNhbGwodGhpcyxkLGUpOmcuY2FsbCh0aGlzLGQsZSkpO3JldHVybiB0aGlzfSxkLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dHlwZW9mIGEsZD10aGlzLl9nZXRFdmVudHMoKTtpZihcInN0cmluZ1wiPT09YylkZWxldGUgZFthXTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiZhLnRlc3QoYikmJmRlbGV0ZSBkW2JdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sZC5yZW1vdmVBbGxMaXN0ZW5lcnM9YyhcInJlbW92ZUV2ZW50XCIpLGQuZW1pdEV2ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpO2ZvcihlIGluIGcpaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSlmb3IoZD1nW2VdLmxlbmd0aDtkLS07KWM9Z1tlXVtkXSxjLm9uY2U9PT0hMCYmdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGMubGlzdGVuZXIpLGY9Yy5saXN0ZW5lci5hcHBseSh0aGlzLGJ8fFtdKSxmPT09dGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkmJnRoaXMucmVtb3ZlTGlzdGVuZXIoYSxjLmxpc3RlbmVyKTtyZXR1cm4gdGhpc30sZC50cmlnZ2VyPWMoXCJlbWl0RXZlbnRcIiksZC5lbWl0PWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoYSxiKX0sZC5zZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZT1hLHRoaXN9LGQuX2dldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KFwiX29uY2VSZXR1cm5WYWx1ZVwiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGQuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxhLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5FdmVudEVtaXR0ZXI9ZixhfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hOnRoaXMuRXZlbnRFbWl0dGVyPWF9LmNhbGwodGhpcyksZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImV2ZW50aWUvZXZlbnRpZVwiXSxmdW5jdGlvbihjLGQpe3JldHVybiBiKGEsYyxkKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoYSxyZXF1aXJlKFwiZXZlbnRFbWl0dGVyXCIpLHJlcXVpcmUoXCJldmVudGllXCIpKTphLmltYWdlc0xvYWRlZD1iKGEsYS5FdmVudEVtaXR0ZXIsYS5ldmVudGllKX0odGhpcyxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYyBpbiBiKWFbY109YltjXTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PW0uY2FsbChhKX1mdW5jdGlvbiBmKGEpe3ZhciBiPVtdO2lmKGUoYSkpYj1hO2Vsc2UgaWYoXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RoKWZvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyliLnB1c2goYVtjXSk7ZWxzZSBiLnB1c2goYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhLGIsYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgZykpcmV0dXJuIG5ldyBnKGEsYik7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYSkpLHRoaXMuZWxlbWVudHM9ZihhKSx0aGlzLm9wdGlvbnM9ZCh7fSx0aGlzLm9wdGlvbnMpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGI/Yz1iOmQodGhpcy5vcHRpb25zLGIpLGMmJnRoaXMub24oXCJhbHdheXNcIixjKSx0aGlzLmdldEltYWdlcygpLGomJih0aGlzLmpxRGVmZXJyZWQ9bmV3IGouRGVmZXJyZWQpO3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2UuY2hlY2soKX0pfWZ1bmN0aW9uIGgoYSl7dGhpcy5pbWc9YX1mdW5jdGlvbiBpKGEpe3RoaXMuc3JjPWEsblthXT10aGlzfXZhciBqPWEualF1ZXJ5LGs9YS5jb25zb2xlLGw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGssbT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2cucHJvdG90eXBlPW5ldyBiLGcucHJvdG90eXBlLm9wdGlvbnM9e30sZy5wcm90b3R5cGUuZ2V0SW1hZ2VzPWZ1bmN0aW9uKCl7dGhpcy5pbWFnZXM9W107Zm9yKHZhciBhPTAsYj10aGlzLmVsZW1lbnRzLmxlbmd0aDtiPmE7YSsrKXt2YXIgYz10aGlzLmVsZW1lbnRzW2FdO1wiSU1HXCI9PT1jLm5vZGVOYW1lJiZ0aGlzLmFkZEltYWdlKGMpO2Zvcih2YXIgZD1jLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKyl7dmFyIGc9ZFtlXTt0aGlzLmFkZEltYWdlKGcpfX19LGcucHJvdG90eXBlLmFkZEltYWdlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBoKGEpO3RoaXMuaW1hZ2VzLnB1c2goYil9LGcucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYi5vcHRpb25zLmRlYnVnJiZsLGIucHJvZ3Jlc3MoYSksYysrLGM9PT1kJiZiLmNvbXBsZXRlKCksITB9dmFyIGI9dGhpcyxjPTAsZD10aGlzLmltYWdlcy5sZW5ndGg7aWYodGhpcy5oYXNBbnlCcm9rZW49ITEsIWQpcmV0dXJuIHRoaXMuY29tcGxldGUoKSx2b2lkIDA7Zm9yKHZhciBlPTA7ZD5lO2UrKyl7dmFyIGY9dGhpcy5pbWFnZXNbZV07Zi5vbihcImNvbmZpcm1cIixhKSxmLmNoZWNrKCl9fSxnLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihhKXt0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWEuaXNMb2FkZWQ7dmFyIGI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5lbWl0KFwicHJvZ3Jlc3NcIixiLGEpLGIuanFEZWZlcnJlZCYmYi5qcURlZmVycmVkLm5vdGlmeSYmYi5qcURlZmVycmVkLm5vdGlmeShiLGEpfSl9LGcucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5oYXNBbnlCcm9rZW4/XCJmYWlsXCI6XCJkb25lXCI7dGhpcy5pc0NvbXBsZXRlPSEwO3ZhciBiPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGIuZW1pdChhLGIpLGIuZW1pdChcImFsd2F5c1wiLGIpLGIuanFEZWZlcnJlZCl7dmFyIGM9Yi5oYXNBbnlCcm9rZW4/XCJyZWplY3RcIjpcInJlc29sdmVcIjtiLmpxRGVmZXJyZWRbY10oYil9fSl9LGomJihqLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBnKHRoaXMsYSxiKTtyZXR1cm4gYy5qcURlZmVycmVkLnByb21pc2Uoaih0aGlzKSl9KSxoLnByb3RvdHlwZT1uZXcgYixoLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3ZhciBhPW5bdGhpcy5pbWcuc3JjXXx8bmV3IGkodGhpcy5pbWcuc3JjKTtpZihhLmlzQ29uZmlybWVkKXJldHVybiB0aGlzLmNvbmZpcm0oYS5pc0xvYWRlZCxcImNhY2hlZCB3YXMgY29uZmlybWVkXCIpLHZvaWQgMDtpZih0aGlzLmltZy5jb21wbGV0ZSYmdm9pZCAwIT09dGhpcy5pbWcubmF0dXJhbFdpZHRoKXJldHVybiB0aGlzLmNvbmZpcm0oMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aCxcIm5hdHVyYWxXaWR0aFwiKSx2b2lkIDA7dmFyIGI9dGhpczthLm9uKFwiY29uZmlybVwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIuY29uZmlybShhLmlzTG9hZGVkLGMpLCEwfSksYS5jaGVjaygpfSxoLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGEsYil7dGhpcy5pc0xvYWRlZD1hLHRoaXMuZW1pdChcImNvbmZpcm1cIix0aGlzLGIpfTt2YXIgbj17fTtyZXR1cm4gaS5wcm90b3R5cGU9bmV3IGIsaS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NoZWNrZWQpe3ZhciBhPW5ldyBJbWFnZTtjLmJpbmQoYSxcImxvYWRcIix0aGlzKSxjLmJpbmQoYSxcImVycm9yXCIsdGhpcyksYS5zcmM9dGhpcy5zcmMsdGhpcy5pc0NoZWNrZWQ9ITB9fSxpLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj1cIm9uXCIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LGkucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbihhKXt0aGlzLmNvbmZpcm0oITAsXCJvbmxvYWRcIiksdGhpcy51bmJpbmRQcm94eUV2ZW50cyhhKX0saS5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbihhKXt0aGlzLmNvbmZpcm0oITEsXCJvbmVycm9yXCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoYSl9LGkucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oYSxiKXt0aGlzLmlzQ29uZmlybWVkPSEwLHRoaXMuaXNMb2FkZWQ9YSx0aGlzLmVtaXQoXCJjb25maXJtXCIsdGhpcyxiKX0saS5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHM9ZnVuY3Rpb24oYSl7Yy51bmJpbmQoYS50YXJnZXQsXCJsb2FkXCIsdGhpcyksYy51bmJpbmQoYS50YXJnZXQsXCJlcnJvclwiLHRoaXMpfSxnfSksYi5wcm90b3R5cGUuY3JlYXRlT3ZlcmxheT1mdW5jdGlvbigpe3ZhciBiPVwiYWJzb2x1dGVcIjtpZihcImJvZHlcIj09dGhpcy5wYXJlbnQuZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpYj1cImZpeGVkXCI7ZWxzZXt2YXIgYz10aGlzLnBhcmVudC4kZWxlbWVudC5jc3MoXCJwb3NpdGlvblwiKTsoXCJmaXhlZFwiIT1jfHxcImFic29sdXRlXCIhPWMpJiZ0aGlzLnBhcmVudC4kZWxlbWVudC5jc3MoXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIil9dGhpcy5jb250YWluZXI9YShcIjxkaXYgaWQ9J1wiK3RoaXMucGFyZW50Lm9wdGlvbnMub3ZlcmxheUlkK1wiJz48L2Rpdj5cIikuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsYmFja2dyb3VuZENvbG9yOnRoaXMucGFyZW50Lm9wdGlvbnMuYmFja2dyb3VuZENvbG9yLGJhY2tncm91bmRQb3NpdGlvbjpcImZpeGVkXCIscG9zaXRpb246Yix6SW5kZXg6NjY2OTk5LHRvcDowLGxlZnQ6MH0pLmFwcGVuZFRvKHRoaXMucGFyZW50LiRlbGVtZW50KSx0aGlzLmxvYWRiYXI9YShcIjxkaXYgaWQ9J3FMYmFyJz48L2Rpdj5cIikuY3NzKHtoZWlnaHQ6dGhpcy5wYXJlbnQub3B0aW9ucy5iYXJIZWlnaHQrXCJweFwiLG1hcmdpblRvcDpcIi1cIit0aGlzLnBhcmVudC5vcHRpb25zLmJhckhlaWdodC8yK1wicHhcIixiYWNrZ3JvdW5kQ29sb3I6dGhpcy5wYXJlbnQub3B0aW9ucy5iYXJDb2xvcix3aWR0aDpcIjAlXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIjUwJVwifSkuYXBwZW5kVG8odGhpcy5jb250YWluZXIpLDE9PXRoaXMucGFyZW50Lm9wdGlvbnMucGVyY2VudGFnZSYmKHRoaXMucGVyY2VudGFnZUNvbnRhaW5lcj1hKFwiPGRpdiBpZD0ncUxwZXJjZW50YWdlJz48L2Rpdj5cIikudGV4dChcIjAlXCIpLmNzcyh7aGVpZ2h0OlwiNDBweFwiLHdpZHRoOlwiMTAwcHhcIixwb3NpdGlvbjpcImFic29sdXRlXCIsZm9udFNpemU6XCIzZW1cIix0b3A6XCI1MCVcIixsZWZ0OlwiNTAlXCIsbWFyZ2luVG9wOlwiLVwiKyg1OSt0aGlzLnBhcmVudC5vcHRpb25zLmJhckhlaWdodCkrXCJweFwiLHRleHRBbGlnbjpcImNlbnRlclwiLG1hcmdpbkxlZnQ6XCItNTBweFwiLGNvbG9yOnRoaXMucGFyZW50Lm9wdGlvbnMuYmFyQ29sb3J9KS5hcHBlbmRUbyh0aGlzLmNvbnRhaW5lcikpLHRoaXMucGFyZW50LnByZWxvYWRDb250YWluZXIudG9QcmVsb2FkLmxlbmd0aCYmMSE9dGhpcy5wYXJlbnQuYWxyZWFkeUxvYWRlZHx8dGhpcy5wYXJlbnQuZGVzdHJveUNvbnRhaW5lcnMoKX0sYi5wcm90b3R5cGUudXBkYXRlUGVyY2VudGFnZT1mdW5jdGlvbihhKXt0aGlzLmxvYWRiYXIuc3RvcCgpLmFuaW1hdGUoe3dpZHRoOmErXCIlXCIsbWluV2lkdGg6YStcIiVcIn0sMjAwKSwxPT10aGlzLnBhcmVudC5vcHRpb25zLnBlcmNlbnRhZ2UmJnRoaXMucGVyY2VudGFnZUNvbnRhaW5lci50ZXh0KE1hdGguY2VpbChhKStcIiVcIil9LGMucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbigpe3RoaXMuY29udGFpbmVyPWEoXCI8ZGl2PjwvZGl2PlwiKS5hcHBlbmRUbyhcImJvZHlcIikuY3NzKHtkaXNwbGF5Olwibm9uZVwiLHdpZHRoOjAsaGVpZ2h0OjAsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLHRoaXMucHJvY2Vzc1F1ZXVlKCl9LGMucHJvdG90eXBlLnByb2Nlc3NRdWV1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO3RoaXMudG9QcmVsb2FkLmxlbmd0aD5hO2ErKyl0aGlzLnBhcmVudC5kZXN0cm95ZWR8fHRoaXMucHJlbG9hZEltYWdlKHRoaXMudG9QcmVsb2FkW2FdKX0sYy5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oYSl7dGhpcy50b1ByZWxvYWQucHVzaChhKX0sYy5wcm90b3R5cGUucHJlbG9hZEltYWdlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBkO2IuYWRkVG9QcmVsb2FkZXIodGhpcyxhKSxiLmJpbmRMb2FkRXZlbnQoKX0sZC5wcm90b3R5cGUuYWRkVG9QcmVsb2FkZXI9ZnVuY3Rpb24oYixjKXt0aGlzLmVsZW1lbnQ9YShcIjxpbWcgLz5cIikuYXR0cihcInNyY1wiLGMpLHRoaXMuZWxlbWVudC5hcHBlbmRUbyhiLmNvbnRhaW5lciksdGhpcy5wYXJlbnQ9Yi5wYXJlbnR9LGQucHJvdG90eXBlLmJpbmRMb2FkRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5pbWFnZUNvdW50ZXIrKyx0aGlzLmVsZW1lbnRbMF0ucmVmPXRoaXMsbmV3IGltYWdlc0xvYWRlZCh0aGlzLmVsZW1lbnQsZnVuY3Rpb24oYSl7YS5lbGVtZW50c1swXS5yZWYuY29tcGxldGVMb2FkaW5nKCl9KX0sZC5wcm90b3R5cGUuY29tcGxldGVMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQuaW1hZ2VEb25lKys7dmFyIGE9MTAwKih0aGlzLnBhcmVudC5pbWFnZURvbmUvdGhpcy5wYXJlbnQuaW1hZ2VDb3VudGVyKTt0aGlzLnBhcmVudC5vdmVybGF5TG9hZGVyLnVwZGF0ZVBlcmNlbnRhZ2UoYSksKHRoaXMucGFyZW50LmltYWdlRG9uZT09dGhpcy5wYXJlbnQuaW1hZ2VDb3VudGVyfHxhPj0xMDApJiZ0aGlzLnBhcmVudC5lbmRMb2FkZXIoKX0sZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRPcHRpb25zLHRoaXMub3B0aW9ucyksdGhpcy5maW5kSW1hZ2VJbkVsZW1lbnQodGhpcy5lbGVtZW50KSwxPT10aGlzLm9wdGlvbnMuZGVlcFNlYXJjaClmb3IodmFyIGI9dGhpcy4kZWxlbWVudC5maW5kKFwiKjpub3Qoc2NyaXB0KVwiKSxjPTA7YzxiLmxlbmd0aDtjKyspdGhpcy5maW5kSW1hZ2VJbkVsZW1lbnQoYltjXSk7dGhpcy5wcmVsb2FkQ29udGFpbmVyLmNyZWF0ZSgpLHRoaXMub3ZlcmxheUxvYWRlci5jcmVhdGVPdmVybGF5KCl9LGUucHJvdG90eXBlLmZpbmRJbWFnZUluRWxlbWVudD1mdW5jdGlvbihiKXt2YXIgYz1cIlwiLGU9YShiKSxmPVwibm9ybWFsXCI7aWYoXCJub25lXCIhPWUuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKT8oYz1lLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiksZj1cImJhY2tncm91bmRcIik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuYXR0cihcInNyY1wiKSYmXCJpbWdcIj09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYoYz1lLmF0dHIoXCJzcmNcIikpLCF0aGlzLmhhc0dyYWRpZW50KGMpKXtjPXRoaXMuc3RyaXBVcmwoYyk7Zm9yKHZhciBnPWMuc3BsaXQoXCIsIFwiKSxoPTA7aDxnLmxlbmd0aDtoKyspaWYodGhpcy52YWxpZFVybChnW2hdKSYmdGhpcy51cmxJc05ldyhnW2hdKSl7dmFyIGk9XCJcIjtpZih0aGlzLmlzSUUoKXx8dGhpcy5pc09wZXJhKCkpaT1cIj9yYW5kPVwiK01hdGgucmFuZG9tKCksdGhpcy5wcmVsb2FkQ29udGFpbmVyLmFkZEltYWdlKGdbaF0raSk7ZWxzZSBpZihcImJhY2tncm91bmRcIj09Zil0aGlzLnByZWxvYWRDb250YWluZXIuYWRkSW1hZ2UoZ1toXStpKTtlbHNle3ZhciBqPW5ldyBkKHRoaXMpO2ouZWxlbWVudD1lLGouYmluZExvYWRFdmVudCgpfXRoaXMuZm91bmRVcmxzLnB1c2goZ1toXSl9fX0sZS5wcm90b3R5cGUuaGFzR3JhZGllbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuLTE9PWEuaW5kZXhPZihcImdyYWRpZW50XCIpPyExOiEwfSxlLnByb3RvdHlwZS5zdHJpcFVybD1mdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoL3VybFxcKFxcXCIvZyxcIlwiKSxhPWEucmVwbGFjZSgvdXJsXFwoL2csXCJcIiksYT1hLnJlcGxhY2UoL1xcXCJcXCkvZyxcIlwiKSxhPWEucmVwbGFjZSgvXFwpL2csXCJcIil9LGUucHJvdG90eXBlLmlzSUU9ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvbXNpZS9pKX0sZS5wcm90b3R5cGUuaXNPcGVyYT1mdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PcGVyYS9pKX0sZS5wcm90b3R5cGUudmFsaWRVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIGEubGVuZ3RoPjAmJiFhLm1hdGNoKC9eKGRhdGE6KS9pKT8hMDohMX0sZS5wcm90b3R5cGUudXJsSXNOZXc9ZnVuY3Rpb24oYSl7cmV0dXJuLTE9PXRoaXMuZm91bmRVcmxzLmluZGV4T2YoYSk/ITA6ITF9LGUucHJvdG90eXBlLmRlc3Ryb3lDb250YWluZXJzPWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95ZWQ9ITAsdGhpcy5wcmVsb2FkQ29udGFpbmVyLmNvbnRhaW5lci5yZW1vdmUoKSx0aGlzLm92ZXJsYXlMb2FkZXIuY29udGFpbmVyLnJlbW92ZSgpfSxlLnByb3RvdHlwZS5lbmRMb2FkZXI9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3llZD0hMCx0aGlzLm9uTG9hZENvbXBsZXRlKCl9LGUucHJvdG90eXBlLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLm9uTG9hZENvbXBsZXRlKCksXCJncm93XCI9PXRoaXMub3B0aW9ucy5jb21wbGV0ZUFuaW1hdGlvbil7dmFyIGI9dGhpcy5vcHRpb25zLm1pbmltdW1UaW1lO3RoaXMub3ZlcmxheUxvYWRlci5sb2FkYmFyWzBdLnBhcmVudD10aGlzLHRoaXMub3ZlcmxheUxvYWRlci5sb2FkYmFyLnN0b3AoKS5hbmltYXRlKHt3aWR0aDpcIjEwMCVcIn0sYixmdW5jdGlvbigpe2EodGhpcykuYW5pbWF0ZSh7dG9wOlwiMCVcIix3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCJ9LDUwMCxmdW5jdGlvbigpe3RoaXMucGFyZW50Lm92ZXJsYXlMb2FkZXIuY29udGFpbmVyWzBdLnBhcmVudD10aGlzLnBhcmVudCx0aGlzLnBhcmVudC5vdmVybGF5TG9hZGVyLmNvbnRhaW5lci5mYWRlT3V0KDUwMCxmdW5jdGlvbigpe3RoaXMucGFyZW50LmRlc3Ryb3lDb250YWluZXJzKCksdGhpcy5wYXJlbnQub3B0aW9ucy5vbkNvbXBsZXRlKCl9KX0pfSl9ZWxzZXt2YXIgYj10aGlzLm9wdGlvbnMubWluaW11bVRpbWU7dGhpcy5vdmVybGF5TG9hZGVyLmNvbnRhaW5lclswXS5wYXJlbnQ9dGhpcyx0aGlzLm92ZXJsYXlMb2FkZXIuY29udGFpbmVyLmZhZGVPdXQoYixmdW5jdGlvbigpe3RoaXMucGFyZW50LmRlc3Ryb3lDb250YWluZXJzKCksdGhpcy5wYXJlbnQub3B0aW9ucy5vbkNvbXBsZXRlKCl9KX19LEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGg+Pj4wLGM9TnVtYmVyKGFyZ3VtZW50c1sxXSl8fDA7Zm9yKGM9MD5jP01hdGguY2VpbChjKTpNYXRoLmZsb29yKGMpLDA+YyYmKGMrPWIpO2I+YztjKyspaWYoYyBpbiB0aGlzJiZ0aGlzW2NdPT09YSlyZXR1cm4gYztyZXR1cm4tMX0pLGEuZm4ucXVlcnlMb2FkZXIyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuZXcgZSh0aGlzLGEpfSl9fShqUXVlcnkpOyJdLCJmaWxlIjoianF1ZXJ5LnF1ZXJ5bG9hZGVyMi5taW4uanMifQ==
