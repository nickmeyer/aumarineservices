/* jquery.nicescroll 3.1.2 InuYaksa*2012 MIT http://areaaperta.com/nicescroll */(function(e){var r=false,w=false,B=5E3,C=2E3,D=function(){var e=document.getElementsByTagName("script"),e=e[e.length-1].src.split("?")[0];return e.split("/").length>0?e.split("/").slice(0,-1).join("/")+"/":""}(),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||false,q=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||
window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||false,x=false,E=function(){if(x)return x;var e=document.createElement("DIV"),c={haspointerlock:"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document};c.isopera="opera"in window;c.isopera12=c.isopera&&"getUserMedia"in navigator;c.isie="all"in document&&"attachEvent"in e&&!c.isopera;c.isieold=c.isie&&!("msInterpolationMode"in e.style);c.isie7=c.isie&&!c.isieold&&(!("documentMode"in
document)||document.documentMode==7);c.isie8=c.isie&&"documentMode"in document&&document.documentMode==8;c.isie9=c.isie&&"performance"in window&&document.documentMode>=9;c.isie10=c.isie&&"performance"in window&&document.documentMode>=10;c.isie9mobile=/iemobile.9/i.test(navigator.userAgent);if(c.isie9mobile)c.isie9=false;c.isie7mobile=!c.isie9mobile&&c.isie7&&/iemobile/i.test(navigator.userAgent);c.ismozilla="MozAppearance"in e.style;c.iswebkit="WebkitAppearance"in e.style;c.ischrome="chrome"in window;
c.ischrome22=c.ischrome&&c.haspointerlock;c.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window;c.hasmstouch=window.navigator.msPointerEnabled||false;c.ismac=/^mac$/i.test(navigator.platform);c.isios=c.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);c.isios4=c.isios&&!("seal"in Object);c.isandroid=/android/i.test(navigator.userAgent);c.trstyle=false;c.hastransform=false;c.hastranslate3d=false;c.transitionstyle=false;c.hastransition=false;c.transitionend=false;for(var h=
["transform","msTransform","webkitTransform","MozTransform","OTransform"],i=0;i<h.length;i++)if(typeof e.style[h[i]]!="undefined"){c.trstyle=h[i];break}c.hastransform=c.trstyle!=false;if(c.hastransform)e.style[c.trstyle]="translate3d(1px,2px,3px)",c.hastranslate3d=/translate3d/.test(e.style[c.trstyle]);c.transitionstyle=false;c.prefixstyle="";c.transitionend=false;for(var h="transition,webkitTransition,MozTransition,OTransition,OTransition,msTransition,KhtmlTransition".split(","),b=",-webkit-,-moz-,-o-,-o,-ms-,-khtml-".split(","),
n="transitionend,webkitTransitionEnd,transitionend,otransitionend,oTransitionEnd,msTransitionEnd,KhtmlTransitionEnd".split(","),i=0;i<h.length;i++)if(h[i]in e.style){c.transitionstyle=h[i];c.prefixstyle=b[i];c.transitionend=n[i];break}c.hastransition=c.transitionstyle;a:{h=["-moz-grab","-webkit-grab","grab"];if(c.ischrome&&!c.ischrome22||c.isie)h=[];for(i=0;i<h.length;i++)if(b=h[i],e.style.cursor=b,e.style.cursor==b){h=b;break a}h="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}c.cursorgrabvalue=
h;c.hasmousecapture="setCapture"in e;return x=c},F=function(j,c){function h(d,c,g){c=d.css(c);d=parseFloat(c);return isNaN(d)?(d=o[c]||0,g=d==3?g?b.win.outerHeight()-b.win.innerHeight():b.win.outerWidth()-b.win.innerWidth():1,b.isie8&&d&&(d+=1),g?d:0):d}function i(d,c){var g=0,f=0,e=1;"wheelDeltaY"in d?(e=b.opt.mousescrollstep/48,g=Math.floor(d.wheelDeltaX*e),f=Math.floor(d.wheelDeltaY*e),c&&g==0&&f&&(g=f,f=0)):(e=d.detail?d.detail*-1:d.wheelDelta/40)&&(c?g=Math.floor(e*b.opt.mousescrollstep):f=Math.floor(e*
b.opt.mousescrollstep));g&&(b.scrollmom&&b.scrollmom.stop(),b.lastdeltax+=g,b.synched("mousewheelx",function(){var d=b.lastdeltax;b.lastdeltax=0;b.rail.drag||b.doScrollLeftBy(d)}));f&&(b.scrollmom&&b.scrollmom.stop(),b.lastdeltay+=f,b.synched("mousewheely",function(){var d=b.lastdeltay;b.lastdeltay=0;b.rail.drag||b.doScrollBy(d)}))}var b=this;this.version="3.1.4";this.name="nicescroll";this.me=c;this.opt={doc:e("body"),win:false,zindex:100000,cursoropacitymin:0.2,cursoropacitymax:1,cursorcolor:"#bdbdbd",
cursorwidth:"7px",cursorborder:"",cursorborderradius:"1px",scrollspeed:60,mousescrollstep:40,touchbehavior:false,hwacceleration:true,usetransition:true,boxzoom:false,dblclickzoom:true,gesturezoom:true,grabcursorenabled:true,autohidemode:false,background:"#827b7d",iframeautoresize:true,cursorminheight:32,preservenativescrolling:true,railoffset:false,bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:true,railalign:"right",railvalign:"bottom",
enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true,enablemouselockapi:true,cursorfixedheight:false};this.opt.snapbackspeed=80;if(j)for(var n in b.opt)typeof j[n]!="undefined"&&(b.opt[n]=j[n]);this.iddoc=(this.doc=b.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test(b.opt.win?b.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=b.opt.win!==false;this.win=b.opt.win||(this.ispage?e(window):this.doc);this.docscroll=this.ispage&&
!this.haswrapper?e(window):this.win;this.body=e("body");this.iframe=this.isfixed=this.viewport=false;this.isiframe=this.doc[0].nodeName=="IFRAME"&&this.win[0].nodeName=="IFRAME";this.istextarea=this.win[0].nodeName=="TEXTAREA";this.forcescreen=false;this.canshowonmouseevent=b.opt.autohidemode!="scroll";this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=
this.onmousedown=false;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.observer=this.scrollmom=this.scrollrunning=false;do this.id="ascrail"+C++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.cursorfreezed=this.cursor=this.rail=false;this.visibility=true;this.hidden=this.locked=false;this.cursoractive=true;this.nativescrollingarea=false;this.events=[];this.saved={};this.delaylist={};this.synclist=
{};this.lastdeltay=this.lastdeltax=0;this.detected=E();var f=e.extend({},this.detected);this.ishwscroll=(this.canhwscroll=f.hastransform&&b.opt.hwacceleration)&&b.haswrapper;this.istouchcapable=false;if(f.cantouch&&f.ischrome&&!f.isios&&!f.isandroid)this.istouchcapable=true,f.cantouch=false;if(f.cantouch&&f.ismozilla&&!f.isios)this.istouchcapable=true,f.cantouch=false;if(!b.opt.enablemouselockapi)f.hasmousecapture=false,f.haspointerlock=false;this.delayed=function(d,c,g,f){var e=b.delaylist[d],h=
(new Date).getTime();if(!f&&e&&e.tt)return false;e&&e.tt&&clearTimeout(e.tt);if(e&&e.last+g>h&&!e.tt)b.delaylist[d]={last:h+g,tt:setTimeout(function(){b.delaylist[d].tt=0;c.call()},g)};else if(!e||!e.tt)b.delaylist[d]={last:h,tt:0},setTimeout(function(){c.call()},0)};this.synched=function(d,c){b.synclist[d]=c;(function(){if(!b.onsync)p(function(){b.onsync=false;for(d in b.synclist){var c=b.synclist[d];c&&c.call(b);b.synclist[d]=false}}),b.onsync=true})();return d};this.unsynched=function(d){b.synclist[d]&&
(b.synclist[d]=false)};this.css=function(d,c){for(var g in c)b.saved.css.push([d,g,d.css(g)]),d.css(g,c[g])};this.scrollTop=function(d){return typeof d=="undefined"?b.getScrollTop():b.setScrollTop(d)};this.scrollLeft=function(d){return typeof d=="undefined"?b.getScrollLeft():b.setScrollLeft(d)};BezierClass=function(b,c,g,f,e,h,i){this.st=b;this.ed=c;this.spd=g;this.p1=f||0;this.p2=e||1;this.p3=h||0;this.p4=i||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(b){return 3*
b*b*(1-b)},B3:function(b){return 3*b*(1-b)*(1-b)},B4:function(b){return(1-b)*(1-b)*(1-b)},getNow:function(){var b=1-((new Date).getTime()-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return b<0?this.ed:this.st+Math.round(this.df*c)},update:function(b,c){this.st=this.getNow();this.ed=b;this.spd=c;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};f.hastranslate3d&&f.isios&&this.doc.css("-webkit-backface-visibility",
"hidden");var m=function(){var d=b.doc.css(f.trstyle);return d&&d.substr(0,6)=="matrix"?d.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):false};this.getScrollTop=function(d){if(!d){if(d=m())return d.length==16?-d[13]:-d[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow()}return b.doc.translate.y};this.getScrollLeft=function(d){if(!d){if(d=m())return d.length==16?-d[12]:-d[4];if(b.timerscroll&&b.timerscroll.bh)return b.timerscroll.bh.getNow()}return b.doc.translate.x};
this.notifyScrollEvent=document.createEvent?function(b){var c=document.createEvent("UIEvents");c.initUIEvent("scroll",false,true,window,1);b.dispatchEvent(c)}:document.fireEvent?function(b){var c=document.createEventObject();b.fireEvent("onscroll");c.cancelBubble=true}:function(){};f.hastranslate3d&&b.opt.enabletranslate3d?(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=d*-1+"px";b.doc.css(f.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0])},
this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=d*-1+"px";b.doc.css(f.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0])}):(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=d*-1+"px";b.doc.css(f.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=d*-1+"px";b.doc.css(f.trstyle,
"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0])})}else this.getScrollTop=function(){return b.docscroll.scrollTop()},this.setScrollTop=function(d){return b.docscroll.scrollTop(d)},this.getScrollLeft=function(){return b.docscroll.scrollLeft()},this.setScrollLeft=function(d){return b.docscroll.scrollLeft(d)};this.getTarget=function(b){return!b?false:b.target?b.target:b.srcElement?b.srcElement:false};this.hasParent=function(b,c){if(!b)return false;for(var g=
b.target||b.srcElement||b||false;g&&g.id!=c;)g=g.parentNode||false;return g!==false};var o={thin:1,medium:3,thick:5};this.getOffset=function(){if(b.isfixed)return{top:parseFloat(b.win.css("top")),left:parseFloat(b.win.css("left"))};if(!b.viewport)return b.win.offset();var d=b.win.offset(),c=b.viewport.offset();return{top:d.top-c.top+b.viewport.scrollTop(),left:d.left-c.left+b.viewport.scrollLeft()}};this.updateScrollBar=function(d){if(b.ishwscroll)b.rail.css({height:b.win.innerHeight()}),b.railh&&
b.railh.css({width:b.win.innerWidth()});else{var c=b.getOffset(),g=c.top,f=c.left;g+=h(b.win,"border-top-width",true);b.win.outerWidth();b.win.innerWidth();f+=b.rail.align?b.win.outerWidth()-h(b.win,"border-right-width")-b.rail.width:h(b.win,"border-left-width");var e=b.opt.railoffset;e&&(e.top&&(g+=e.top),b.rail.align&&e.left&&(f+=e.left));b.locked||b.rail.css({top:g,left:f,height:d?d.h:b.win.innerHeight()});b.zoom&&b.zoom.css({top:g+1,left:b.rail.align==1?f-20:f+b.rail.width+4});if(b.railh&&!b.locked)g=
c.top,f=c.left,d=b.railh.align?g+h(b.win,"border-top-width",true)+b.win.innerHeight()-b.railh.height:g+h(b.win,"border-top-width",true),f+=h(b.win,"border-left-width"),b.railh.css({top:d,left:f,width:b.railh.width})}};this.doRailClick=function(d,c,g){var f;!(b.rail.drag&&b.rail.drag.pt!=1)&&!b.locked&&!b.rail.drag&&(b.cancelScroll(),b.cancelEvent(d),c?(c=g?b.doScrollLeft:b.doScrollTop,f=g?(d.pageX-b.railh.offset().left-b.cursorwidth/2)*b.scrollratio.x:(d.pageY-b.rail.offset().top-b.cursorheight/2)*
b.scrollratio.y,c(f)):(c=g?b.doScrollLeftBy:b.doScrollBy,f=g?b.scroll.x:b.scroll.y,d=g?d.pageX-b.railh.offset().left:d.pageY-b.rail.offset().top,g=g?b.view.w:b.view.h,f>=d?c(g):c(-g)))};b.hasanimationframe=p;b.hascancelanimationframe=q;b.hasanimationframe?b.hascancelanimationframe||(q=function(){b.cancelAnimationFrame=true}):(p=function(b){return setTimeout(b,16)},q=clearInterval);this.init=function(){b.saved.css=[];if(f.isie7mobile)return true;f.hasmstouch&&b.css(b.ispage?e("html"):b.win,{"-ms-touch-action":"none"});
if(!b.ispage||!f.cantouch&&!f.isieold&&!f.isie9mobile){var d=b.docscroll;b.ispage&&(d=b.haswrapper?b.win:b.doc);f.isie9mobile||b.css(d,{"overflow-y":"hidden"});b.ispage&&f.isie7&&(b.doc[0].nodeName=="BODY"?b.css(e("html"),{"overflow-y":"hidden"}):b.doc[0].nodeName=="HTML"&&b.css(e("body"),{"overflow-y":"hidden"}));f.isios&&!b.ispage&&!b.haswrapper&&b.css(e("body"),{"-webkit-overflow-scrolling":"touch"});var c=e(document.createElement("div"));c.css({position:"relative",top:0,"float":"right",width:b.opt.cursorwidth,
height:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius});c.hborder=parseFloat(c.outerHeight()-c.innerHeight());b.cursor=c;var g=e(document.createElement("div"));g.attr("id",b.id);var h,i,j=["left","right"],y;for(y in j)i=j[y],(h=b.opt.railpadding[i])?g.css("padding-"+i,h+"px"):b.opt.railpadding[i]=0;g.append(c);
g.width=Math.max(parseFloat(b.opt.cursorwidth),c.outerWidth())+b.opt.railpadding.left+b.opt.railpadding.right;g.css({width:g.width+"px",zIndex:b.ispage?b.opt.zindex:b.opt.zindex+2,background:b.opt.background});g.visibility=true;g.scrollable=true;g.align=b.opt.railalign=="left"?0:1;b.rail=g;c=b.rail.drag=false;if(b.opt.boxzoom&&!b.ispage&&!f.isieold&&(c=document.createElement("div"),b.bind(c,"click",b.doZoom),b.zoom=e(c),b.zoom.css({cursor:"pointer","z-index":b.opt.zindex,backgroundImage:"url("+D+
"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),b.opt.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),f.cantouch&&b.opt.gesturezoom))b.ongesturezoom=function(d){d.scale>1.5&&b.doZoomIn(d);d.scale<0.8&&b.doZoomOut(d);return b.cancelEvent(d)},b.bind(b.win,"gestureend",b.ongesturezoom);b.railh=false;if(b.opt.horizrailenabled){b.css(d,{"overflow-x":"hidden"});c=e(document.createElement("div"));c.css({position:"relative",top:0,height:b.opt.cursorwidth,width:"0px","background-color":b.opt.cursorcolor,
border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius});c.wborder=parseFloat(c.outerWidth()-c.innerWidth());b.cursorh=c;var k=e(document.createElement("div"));k.attr("id",b.id+"-hr");k.height=1+Math.max(parseFloat(b.opt.cursorwidth),c.outerHeight());k.css({height:k.height+"px",zIndex:b.ispage?b.opt.zindex:b.opt.zindex+2,background:b.opt.background});k.append(c);
k.visibility=true;k.scrollable=true;k.align=b.opt.railvalign=="top"?0:1;b.railh=k;b.railh.drag=false}if(b.ispage)g.css({position:"fixed",top:"0px",height:"100%"}),g.align?g.css({right:"0px"}):g.css({left:"0px"}),b.body.append(g),b.railh&&(k.css({position:"fixed",left:"0px",width:"100%"}),k.align?k.css({bottom:"0px"}):k.css({top:"0px"}),b.body.append(k));else{if(b.ishwscroll)b.win.css("position")=="static"&&b.css(b.win,{position:"relative"}),d=b.win[0].nodeName=="HTML"?b.body:b.win,b.zoom&&(b.zoom.css({position:"absolute",
top:1,right:0,"margin-right":g.width+4}),d.append(b.zoom)),g.css({position:"absolute",top:0}),g.align?g.css({right:0}):g.css({left:0}),d.append(g),k&&(k.css({position:"absolute",left:0,bottom:0}),k.align?k.css({bottom:0}):k.css({top:0}),d.append(k));else{b.isfixed=b.win.css("position")=="fixed";d=b.isfixed?"fixed":"absolute";if(!b.isfixed)b.viewport=b.getViewport(b.win[0]);if(b.viewport)b.body=b.viewport;g.css({position:d});b.zoom&&b.zoom.css({position:d});b.updateScrollBar();b.body.append(g);b.zoom&&
b.body.append(b.zoom);b.railh&&(k.css({position:d}),b.body.append(k))}f.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});f.isie&&b.opt.disableoutline&&b.win.attr("hideFocus","true");f.iswebkit&&b.opt.disableoutline&&b.win.css({outline:"none"})}if(b.opt.autohidemode===false)b.autohidedom=false,b.rail.css({opacity:b.opt.cursoropacitymax}),b.railh&&b.railh.css({opacity:b.opt.cursoropacitymax});else if(b.opt.autohidemode===true){if(b.autohidedom=e().add(b.rail),
b.railh)b.autohidedom=b.autohidedom.add(b.railh)}else if(b.opt.autohidemode=="scroll"){if(b.autohidedom=e().add(b.rail),b.railh)b.autohidedom=b.autohidedom.add(b.railh)}else if(b.opt.autohidemode=="cursor"){if(b.autohidedom=e().add(b.cursor),b.railh)b.autohidedom=b.autohidedom.add(b.railh.cursor)}else if(b.opt.autohidemode=="hidden")b.autohidedom=false,b.hide(),b.locked=false;if(f.isie9mobile)b.scrollmom=new z(b),b.onmangotouch=function(){var d=b.getScrollTop(),c=b.getScrollLeft();if(d==b.scrollmom.lastscrolly&&
c==b.scrollmom.lastscrollx)return true;var g=d-b.mangotouch.sy,l=c-b.mangotouch.sx;if(Math.round(Math.sqrt(Math.pow(l,2)+Math.pow(g,2)))!=0){var f=g<0?-1:1,e=l<0?-1:1,h=+new Date;b.mangotouch.lazy&&clearTimeout(b.mangotouch.lazy);if(h-b.mangotouch.tm>80||b.mangotouch.dry!=f||b.mangotouch.drx!=e)b.scrollmom.stop(),b.scrollmom.reset(c,d),b.mangotouch.sy=d,b.mangotouch.ly=d,b.mangotouch.sx=c,b.mangotouch.lx=c,b.mangotouch.dry=f,b.mangotouch.drx=e,b.mangotouch.tm=h;else if(b.scrollmom.stop(),b.scrollmom.update(b.mangotouch.sx-
l,b.mangotouch.sy-g),b.mangotouch.tm=h,g=Math.max(Math.abs(b.mangotouch.ly-d),Math.abs(b.mangotouch.lx-c)),b.mangotouch.ly=d,b.mangotouch.lx=c,g>2)b.mangotouch.lazy=setTimeout(function(){b.mangotouch.lazy=false;b.mangotouch.dry=0;b.mangotouch.drx=0;b.mangotouch.tm=0;b.scrollmom.doMomentum(30)},100)}},g=b.getScrollTop(),k=b.getScrollLeft(),b.mangotouch={sy:g,ly:g,dry:0,sx:k,lx:k,drx:0,lazy:false,tm:0},b.bind(b.docscroll,"scroll",b.onmangotouch);else{if(f.cantouch||b.istouchcapable||b.opt.touchbehavior||
f.hasmstouch){b.scrollmom=new z(b);b.ontouchstart=function(d){if(d.pointerType&&d.pointerType!=2)return false;if(!b.locked){if(f.hasmstouch)for(var c=d.target?d.target:false;c;){var g=e(c).getNiceScroll();if(g.length>0&&g[0].me==b.me)break;if(g.length>0)return false;if(c.nodeName=="DIV"&&c.id==b.id)break;c=c.parentNode?c.parentNode:false}b.cancelScroll();if((c=b.getTarget(d))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return b.stopPropagation(d);if(!("clientX"in d)&&"changedTouches"in d)d.clientX=
d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY;if(b.forcescreen)g=d,d={original:d.original?d.original:d},d.clientX=g.screenX,d.clientY=g.screenY;b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2};b.opt.touchbehavior&&b.isiframe&&f.isie&&(g=b.win.position(),b.rail.drag.x+=g.left,b.rail.drag.y+=g.top);b.hasmoving=false;b.lastmouseup=false;b.scrollmom.reset(d.clientX,d.clientY);if(!f.cantouch&&!this.istouchcapable&&!f.hasmstouch){if(!c||
!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return!b.ispage&&f.hasmousecapture&&c.setCapture(),b.cancelEvent(d);if(/SUBMIT|CANCEL|BUTTON/i.test(e(c).attr("type")))pc={tg:c,click:false},b.preventclick=pc}}};b.ontouchend=function(d){if(d.pointerType&&d.pointerType!=2)return false;if(b.rail.drag&&b.rail.drag.pt==2&&(b.scrollmom.doMomentum(),b.rail.drag=false,b.hasmoving&&(b.hasmoving=false,b.lastmouseup=true,b.hideCursor(),f.hasmousecapture&&document.releaseCapture(),!f.cantouch)))return b.cancelEvent(d)};
var n=b.opt.touchbehavior&&b.isiframe&&!f.hasmousecapture;b.ontouchmove=function(d,c){if(d.pointerType&&d.pointerType!=2)return false;if(b.rail.drag&&b.rail.drag.pt==2){if(f.cantouch&&typeof d.original=="undefined")return true;b.hasmoving=true;if(b.preventclick&&!b.preventclick.click)b.preventclick.click=b.preventclick.tg.onclick||false,b.preventclick.tg.onclick=b.onpreventclick;d=e.extend({original:d},d);if("changedTouches"in d)d.clientX=d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY;
if(b.forcescreen){var g=d,d={original:d.original?d.original:d};d.clientX=g.screenX;d.clientY=g.screenY}g=ofy=0;if(n&&!c){var l=b.win.position(),g=-l.left;ofy=-l.top}var h=d.clientY+ofy,i=b.rail.drag.st-(h-b.rail.drag.y);if(b.ishwscroll&&b.opt.bouncescroll)i<0?i=Math.round(i/2):i>b.page.maxh&&(i=b.page.maxh+Math.round((i-b.page.maxh)/2));else if(i<0&&(h=i=0),i>b.page.maxh)i=b.page.maxh,h=0;var s=d.clientX+g;if(b.railh&&b.railh.scrollable){var j=b.rail.drag.sl-(s-b.rail.drag.x);if(b.ishwscroll&&b.opt.bouncescroll)j<
0?j=Math.round(j/2):j>b.page.maxw&&(j=b.page.maxw+Math.round((j-b.page.maxw)/2));else if(j<0&&(s=j=0),j>b.page.maxw)j=b.page.maxw,s=0}b.synched("touchmove",function(){b.rail.drag&&b.rail.drag.pt==2&&(b.prepareTransition&&b.prepareTransition(0),b.rail.scrollable&&b.setScrollTop(i),b.scrollmom.update(s,h),b.railh&&b.railh.scrollable?(b.setScrollLeft(j),b.showCursor(i,j)):b.showCursor(i),f.isie10&&document.selection.clear())});if(!f.ischrome&&!b.istouchcapable)return b.cancelEvent(d)}}}f.cantouch||b.opt.touchbehavior?
(b.onpreventclick=function(d){if(b.preventclick)return b.preventclick.tg.onclick=b.preventclick.click,b.preventclick=false,b.cancelEvent(d)},b.onmousedown=b.ontouchstart,b.onmouseup=b.ontouchend,b.onclick=f.isios?false:function(d){return b.lastmouseup?(b.lastmouseup=false,b.cancelEvent(d)):true},b.onmousemove=b.ontouchmove,f.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:f.cursorgrabvalue}),b.css(b.rail,{cursor:f.cursorgrabvalue}))):(b.onmousedown=function(d,c){if(!(b.rail.drag&&b.rail.drag.pt!=
1)){if(b.locked)return b.cancelEvent(d);b.cancelScroll();b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,pt:1,hr:!!c};var g=b.getTarget(d);!b.ispage&&f.hasmousecapture&&g.setCapture();if(b.isiframe&&!f.hasmousecapture)b.saved.csspointerevents=b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"});return b.cancelEvent(d)}},b.onmouseup=function(d){if(b.rail.drag&&(f.hasmousecapture&&document.releaseCapture(),b.isiframe&&!f.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),
b.rail.drag.pt==1))return b.rail.drag=false,b.cancelEvent(d)},b.onmousemove=function(d){if(b.rail.drag){if(b.rail.drag.pt==1){if(f.ischrome&&d.which==0)return b.onmouseup(d);b.cursorfreezed=true;if(b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(d.clientX-b.rail.drag.x);if(b.scroll.x<0)b.scroll.x=0;var c=b.scrollvaluemaxw;if(b.scroll.x>c)b.scroll.x=c}else{b.scroll.y=b.rail.drag.sy+(d.clientY-b.rail.drag.y);if(b.scroll.y<0)b.scroll.y=0;c=b.scrollvaluemax;if(b.scroll.y>c)b.scroll.y=c}b.synched("mousemove",
function(){b.rail.drag&&b.rail.drag.pt==1&&(b.showCursor(),b.rail.drag.hr?b.doScrollLeft(Math.round(b.scroll.x*b.scrollratio.x)):b.doScrollTop(Math.round(b.scroll.y*b.scrollratio.y)))});return b.cancelEvent(d)}}else b.checkarea=true});(f.cantouch||b.opt.touchbehavior)&&b.bind(b.win,"mousedown",b.onmousedown);f.hasmstouch&&(b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(document,"MSPointerUp",b.ontouchend),b.bind(document,
"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(b){b.preventDefault()}),b.bind(b.cursor,"contextmenu",function(b){b.preventDefault()}));this.istouchcapable&&(b.bind(b.win,"touchstart",b.ontouchstart),b.bind(document,"touchend",b.ontouchend),b.bind(document,"touchcancel",b.ontouchend),b.bind(document,"touchmove",b.ontouchmove));b.bind(b.cursor,"mousedown",b.onmousedown);b.bind(b.cursor,"mouseup",b.onmouseup);b.railh&&(b.bind(b.cursorh,"mousedown",function(d){b.onmousedown(d,
true)}),b.bind(b.cursorh,"mouseup",function(d){if(!(b.rail.drag&&b.rail.drag.pt==2))return b.rail.drag=false,b.hasmoving=false,b.hideCursor(),f.hasmousecapture&&document.releaseCapture(),b.cancelEvent(d)}));b.bind(document,"mouseup",b.onmouseup);f.hasmousecapture&&b.bind(b.win,"mouseup",b.onmouseup);b.bind(document,"mousemove",b.onmousemove);b.onclick&&b.bind(document,"click",b.onclick);!f.cantouch&&!b.opt.touchbehavior&&(b.jqbind(b.rail,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();
b.rail.active=true}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=false;b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.rail,"click",function(d){b.doRailClick(d,false,false)}),b.bind(b.rail,"dblclick",function(d){b.doRailClick(d,true,false)}),b.bind(b.cursor,"click",function(d){b.cancelEvent(d)}),b.bind(b.cursor,"dblclick",function(d){b.cancelEvent(d)})),b.railh&&(b.jqbind(b.railh,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=true}),b.jqbind(b.railh,
"mouseleave",function(){b.rail.active=false;b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.railh,"click",function(d){b.doRailClick(d,false,true)}),b.bind(b.railh,"dblclick",function(d){b.doRailClick(d,true,true)}),b.bind(b.cursorh,"click",function(d){b.cancelEvent(d)}),b.bind(b.cursorh,"dblclick",function(d){b.cancelEvent(d)}))),b.zoom&&(b.jqbind(b.zoom,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=true}),b.jqbind(b.zoom,"mouseleave",function(){b.rail.active=
false;b.rail.drag||b.hideCursor()})));b.opt.enablemousewheel&&(b.isiframe||b.bind(f.isie&&b.ispage?document:b.docscroll,"mousewheel",b.onmousewheel),b.bind(b.rail,"mousewheel",b.onmousewheel),b.railh&&b.bind(b.railh,"mousewheel",b.onmousewheelhr));!b.ispage&&!f.cantouch&&!/HTML|BODY/.test(b.win[0].nodeName)&&(b.win.attr("tabindex")||b.win.attr({tabindex:B++}),b.jqbind(b.win,"focus",function(d){r=b.getTarget(d).id||true;b.hasfocus=true;b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"blur",
function(){r=false;b.hasfocus=false}),b.jqbind(b.win,"mouseenter",function(d){w=b.getTarget(d).id||true;b.hasmousefocus=true;b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"mouseleave",function(){w=false;b.hasmousefocus=false}))}b.onkeypress=function(d){if(b.locked&&b.page.maxh==0)return true;var d=d?d:window.e,c=b.getTarget(d);if(c&&/INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName)&&(!c.getAttribute("type")&&!c.type||!/submit|button|cancel/i.tp))return true;if(b.hasfocus||b.hasmousefocus&&
!r||b.ispage&&!r&&!w){c=d.keyCode;if(b.locked&&c!=27)return b.cancelEvent(d);var g=d.ctrlKey||false,l=d.shiftKey||false,f=false;switch(c){case 38:case 63233:b.doScrollBy(72);f=true;break;case 40:case 63235:b.doScrollBy(-72);f=true;break;case 37:case 63232:b.railh&&(g?b.doScrollLeft(0):b.doScrollLeftBy(72),f=true);break;case 39:case 63234:b.railh&&(g?b.doScrollLeft(b.page.maxw):b.doScrollLeftBy(-72),f=true);break;case 33:case 63276:b.doScrollBy(b.view.h);f=true;break;case 34:case 63277:b.doScrollBy(-b.view.h);
f=true;break;case 36:case 63273:b.railh&&g?b.doScrollPos(0,0):b.doScrollTo(0);f=true;break;case 35:case 63275:b.railh&&g?b.doScrollPos(b.page.maxw,b.page.maxh):b.doScrollTo(b.page.maxh);f=true;break;case 32:b.opt.spacebarenabled&&(l?b.doScrollBy(b.view.h):b.doScrollBy(-b.view.h),f=true);break;case 27:b.zoomactive&&(b.doZoom(),f=true)}if(f)return b.cancelEvent(d)}};b.opt.enablekeyboard&&b.bind(document,f.isopera&&!f.isopera12?"keypress":"keydown",b.onkeypress);b.bind(window,"resize",b.resize);b.bind(window,
"orientationchange",b.resize);b.bind(window,"load",b.resize);if(f.ischrome&&!b.ispage&&!b.haswrapper){var m=b.win.attr("style"),g=parseFloat(b.win.css("width"))+1;b.win.css("width",g);b.synched("chromefix",function(){b.win.attr("style",m)})}b.onAttributeChange=function(){b.lazyResize()};if(!b.ispage&&!b.haswrapper)"WebKitMutationObserver"in window?(b.observer=new WebKitMutationObserver(function(d){d.forEach(b.onAttributeChange)}),b.observer.observe(b.win[0],{attributes:true,subtree:false})):(b.bind(b.win,
f.isie&&!f.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),f.isie9&&b.win[0].attachEvent("onpropertychange",b.onAttributeChange));!b.ispage&&b.opt.boxzoom&&b.bind(window,"resize",b.resizeZoom);b.istextarea&&b.bind(b.win,"mouseup",b.resize);b.resize()}if(this.doc[0].nodeName=="IFRAME"){var A=function(){b.iframexd=false;try{var d="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(c){b.iframexd=true,d=false}if(b.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),
true;b.forcescreen=true;if(b.isiframe)b.iframe={doc:e(d),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentSize=function(){return{w:Math.max(b.iframe.html.scrollWidth,b.iframe.body.scrollWidth),h:Math.max(b.iframe.html.scrollHeight,b.iframe.body.scrollHeight)}},b.docscroll=e(b.iframe.body);if(!f.isios&&b.opt.iframeautoresize&&!b.isiframe){b.win.scrollTop(0);b.doc.height("");var g=Math.max(d.getElementsByTagName("html")[0].scrollHeight,d.body.scrollHeight);b.doc.height(g)}b.resize();
f.isie7&&b.css(e(b.iframe.html),{"overflow-y":"hidden"});b.css(e(b.iframe.body),{"overflow-y":"hidden"});"contentWindow"in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(d,"scroll",b.onscroll);b.opt.enablemousewheel&&b.bind(d,"mousewheel",b.onmousewheel);b.opt.enablekeyboard&&b.bind(d,f.isopera?"keypress":"keydown",b.onkeypress);if(f.cantouch||b.opt.touchbehavior)b.bind(d,"mousedown",b.onmousedown),b.bind(d,"mousemove",function(d){b.onmousemove(d,true)}),f.cursorgrabvalue&&b.css(e(d.body),
{cursor:f.cursorgrabvalue});b.bind(d,"mouseup",b.onmouseup);b.zoom&&(b.opt.dblclickzoom&&b.bind(d,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(d,"gestureend",b.ongesturezoom))};this.doc[0].readyState&&this.doc[0].readyState=="complete"&&setTimeout(function(){A.call(b.doc[0],false)},500);b.bind(this.doc,"load",A)}};this.showCursor=function(d,c){if(b.cursortimeout)clearTimeout(b.cursortimeout),b.cursortimeout=0;if(b.rail){if(b.autohidedom)b.autohidedom.stop().css({opacity:b.opt.cursoropacitymax}),b.cursoractive=
true;if(typeof d!="undefined"&&d!==false)b.scroll.y=Math.round(d*1/b.scrollratio.y);if(typeof c!="undefined")b.scroll.x=Math.round(c*1/b.scrollratio.x);b.cursor.css({height:b.cursorheight,top:b.scroll.y});if(b.cursorh)!b.rail.align&&b.rail.visibility?b.cursorh.css({width:b.cursorwidth,left:b.scroll.x+b.rail.width}):b.cursorh.css({width:b.cursorwidth,left:b.scroll.x}),b.cursoractive=true;b.zoom&&b.zoom.stop().css({opacity:b.opt.cursoropacitymax})}};this.hideCursor=function(d){if(!b.cursortimeout&&
b.rail&&b.autohidedom)b.cursortimeout=setTimeout(function(){if(!b.rail.active||!b.showonmouseevent)b.autohidedom.stop().animate({opacity:b.opt.cursoropacitymin}),b.zoom&&b.zoom.stop().animate({opacity:b.opt.cursoropacitymin}),b.cursoractive=false;b.cursortimeout=0},d||400)};this.noticeCursor=function(d,c,g){b.showCursor(c,g);b.rail.active||b.hideCursor(d)};this.getContentSize=b.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,
document.documentElement.scrollHeight)}}:b.haswrapper?function(){return{w:b.doc.outerWidth()+parseInt(b.win.css("paddingLeft"))+parseInt(b.win.css("paddingRight")),h:b.doc.outerHeight()+parseInt(b.win.css("paddingTop"))+parseInt(b.win.css("paddingBottom"))}}:function(){return{w:b.docscroll[0].scrollWidth,h:b.docscroll[0].scrollHeight}};this.onResize=function(d,c){if(!b.win)return false;if(!b.haswrapper&&!b.ispage)if(b.win.css("display")=="none")return b.visibility&&b.hideRail().hideRailHr(),false;
else!b.hidden&&!b.visibility&&b.showRail().showRailHr();var g=b.page.maxh,f=b.page.maxw,e=b.view.w;b.view={w:b.ispage?b.win.width():parseInt(b.win[0].clientWidth),h:b.ispage?b.win.height():parseInt(b.win[0].clientHeight)};b.page=c?c:b.getContentSize();b.page.maxh=Math.max(0,b.page.h-b.view.h);b.page.maxw=Math.max(0,b.page.w-b.view.w);if(b.page.maxh==g&&b.page.maxw==f&&b.view.w==e)if(b.ispage)return b;else{g=b.win.offset();if(b.lastposition&&(f=b.lastposition,f.top==g.top&&f.left==g.left))return b;
b.lastposition=g}b.page.maxh==0?(b.hideRail(),b.scrollvaluemax=0,b.scroll.y=0,b.scrollratio.y=0,b.cursorheight=0,b.setScrollTop(0),b.rail.scrollable=false):b.rail.scrollable=true;b.page.maxw==0?(b.hideRailHr(),b.scrollvaluemaxw=0,b.scroll.x=0,b.scrollratio.x=0,b.cursorwidth=0,b.setScrollLeft(0),b.railh.scrollable=false):b.railh.scrollable=true;b.locked=b.page.maxh==0&&b.page.maxw==0;if(b.locked)return b.ispage||b.updateScrollBar(b.view),false;!b.hidden&&!b.visibility?b.showRail().showRailHr():!b.hidden&&
!b.railh.visibility&&b.showRailHr();b.istextarea&&b.win.css("resize")&&b.win.css("resize")!="none"&&(b.view.h-=20);b.ispage||b.updateScrollBar(b.view);b.cursorheight=Math.min(b.view.h,Math.round(b.view.h*(b.view.h/b.page.h)));b.cursorheight=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorheight);b.cursorwidth=Math.min(b.view.w,Math.round(b.view.w*(b.view.w/b.page.w)));b.cursorwidth=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,
b.cursorwidth);b.scrollvaluemax=b.view.h-b.cursorheight-b.cursor.hborder;if(b.railh)b.railh.width=b.page.maxh>0?b.view.w-b.rail.width:b.view.w,b.scrollvaluemaxw=b.railh.width-b.cursorwidth-b.cursorh.wborder;b.scrollratio={x:b.page.maxw/b.scrollvaluemaxw,y:b.page.maxh/b.scrollvaluemax};b.getScrollTop()>b.page.maxh?b.doScrollTop(b.page.maxh):(b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)),b.cursoractive&&b.noticeCursor());b.scroll.y&&
b.getScrollTop()==0&&b.doScrollTo(Math.floor(b.scroll.y*b.scrollratio.y));return b};this.resize=function(){b.delayed("resize",b.onResize,30);return b};this.lazyResize=function(){b.delayed("resize",b.resize,250)};this._bind=function(d,c,g,f){b.events.push({e:d,n:c,f:g,b:f,q:false});d.addEventListener?d.addEventListener(c,g,f||false):d.attachEvent?d.attachEvent("on"+c,g):d["on"+c]=g};this.jqbind=function(d,c,g){b.events.push({e:d,n:c,f:g,q:true});e(d).bind(c,g)};this.bind=function(d,c,g,e){var h="jquery"in
d?d[0]:d;h.addEventListener?(f.cantouch&&/mouseup|mousedown|mousemove/.test(c)&&b._bind(h,c=="mousedown"?"touchstart":c=="mouseup"?"touchend":"touchmove",function(b){if(b.touches){if(b.touches.length<2){var d=b.touches.length?b.touches[0]:b;d.original=b;g.call(this,d)}}else if(b.changedTouches)d=b.changedTouches[0],d.original=b,g.call(this,d)},e||false),b._bind(h,c,g,e||false),c=="mousewheel"&&b._bind(h,"DOMMouseScroll",g,e||false),f.cantouch&&c=="mouseup"&&b._bind(h,"touchcancel",g,e||false)):b._bind(h,
c,function(d){if((d=d||window.event||false)&&d.srcElement)d.target=d.srcElement;return g.call(h,d)===false||e===false?b.cancelEvent(d):true})};this._unbind=function(b,c,g,f){b.removeEventListener?b.removeEventListener(c,g,f):b.detachEvent?b.detachEvent("on"+c,g):b["on"+c]=false};this.unbindAll=function(){for(var d=0;d<b.events.length;d++){var c=b.events[d];c.q?c.e.unbind(c.n,c.f):b._unbind(c.e,c.n,c.f,c.b)}};this.cancelEvent=function(b){b=b.original?b.original:b?b:window.event||false;if(!b)return false;
b.preventDefault&&b.preventDefault();b.stopPropagation&&b.stopPropagation();b.preventManipulation&&b.preventManipulation();b.cancelBubble=true;b.cancel=true;return b.returnValue=false};this.stopPropagation=function(b){b=b.original?b.original:b?b:window.event||false;if(!b)return false;if(b.stopPropagation)return b.stopPropagation();if(b.cancelBubble)b.cancelBubble=true;return false};this.showRail=function(){if(b.page.maxh!=0&&(b.ispage||b.win.css("display")!="none"))b.visibility=true,b.rail.visibility=
true,b.rail.css("display","block");return b};this.showRailHr=function(){if(!b.railh)return b;if(b.page.maxw!=0&&(b.ispage||b.win.css("display")!="none"))b.railh.visibility=true,b.railh.css("display","block");return b};this.hideRail=function(){b.visibility=false;b.rail.visibility=false;b.rail.css("display","none");return b};this.hideRailHr=function(){if(!b.railh)return b;b.railh.visibility=false;b.railh.css("display","none");return b};this.show=function(){b.hidden=false;b.locked=false;return b.showRail().showRailHr()};
this.hide=function(){b.hidden=true;b.locked=true;return b.hideRail().hideRailHr()};this.toggle=function(){return b.hidden?b.show():b.hide()};this.remove=function(){b.stop();b.cursortimeout&&clearTimeout(b.cursortimeout);b.doZoomOut();b.unbindAll();b.observer!==false&&b.observer.disconnect();b.events=[];if(b.cursor)b.cursor.remove(),b.cursor=null;if(b.cursorh)b.cursorh.remove(),b.cursorh=null;if(b.rail)b.rail.remove(),b.rail=null;if(b.railh)b.railh.remove(),b.railh=null;if(b.zoom)b.zoom.remove(),b.zoom=
null;for(var d=0;d<b.saved.css.length;d++){var c=b.saved.css[d];c[0].css(c[1],typeof c[2]=="undefined"?"":c[2])}b.saved=false;b.me.data("__nicescroll","");b.me=null;b.doc=null;b.docscroll=null;b.win=null;return b};this.scrollstart=function(d){this.onscrollstart=d;return b};this.scrollend=function(d){this.onscrollend=d;return b};this.scrollcancel=function(d){this.onscrollcancel=d;return b};this.zoomin=function(d){this.onzoomin=d;return b};this.zoomout=function(d){this.onzoomout=d;return b};this.isScrollable=
function(b){for(b=b.target?b.target:b;b&&b.nodeType==1&&!/BODY|HTML/.test(b.nodeName);){var c=e(b);if(/scroll|auto/.test(c.css("overflowY")||c.css("overflowX")||c.css("overflow")||""))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:false}return false};this.getViewport=function(b){for(b=b&&b.parentNode?b.parentNode:false;b&&b.nodeType==1&&!/BODY|HTML/.test(b.nodeName);){var c=e(b);if(/scroll|auto/.test(c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"")&&b.clientHeight!=
b.scrollHeight)return c;if(c.getNiceScroll().length>0)return c;b=b.parentNode?b.parentNode:false}return false};this.onmousewheel=function(d){if(b.locked)return true;if(!b.rail.scrollable)return b.railh&&b.railh.scrollable?b.onmousewheelhr(d):true;if(b.opt.preservenativescrolling&&b.checkarea)b.checkarea=false,b.nativescrollingarea=b.isScrollable(d);if(b.nativescrollingarea)return true;if(b.locked)return b.cancelEvent(d);if(b.rail.drag)return b.cancelEvent(d);i(d,false);return b.cancelEvent(d)};this.onmousewheelhr=
function(d){if(b.locked||!b.railh.scrollable)return true;if(b.opt.preservenativescrolling&&b.checkarea)b.checkarea=false,b.nativescrollingarea=b.isScrollable(d);if(b.nativescrollingarea)return true;if(b.locked)return b.cancelEvent(d);if(b.rail.drag)return b.cancelEvent(d);i(d,true);return b.cancelEvent(d)};this.stop=function(){b.cancelScroll();b.scrollmon&&b.scrollmon.stop();b.cursorfreezed=false;b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));b.noticeCursor();return b};this.getTransitionSpeed=
function(d){var c=Math.round(b.opt.scrollspeed*10),d=Math.min(c,Math.round(d/20*b.opt.scrollspeed));return d>20?d:0};b.opt.smoothscroll?b.ishwscroll&&f.hastransition&&b.opt.usetransition?(this.prepareTransition=function(d,c){var g=c?d>20?d:0:b.getTransitionSpeed(d),e=g?f.prefixstyle+"transform "+g+"ms ease-out":"";if(!b.lasttransitionstyle||b.lasttransitionstyle!=e)b.lasttransitionstyle=e,b.doc.css(f.transitionstyle,e);return g},this.doScrollLeft=function(d,c){var g=b.scrollrunning?b.newscrolly:b.getScrollTop();
b.doScrollPos(d,g,c)},this.doScrollTop=function(c,f){var g=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(g,c,f)},this.doScrollPos=function(c,e,g){var h=b.getScrollTop(),i=b.getScrollLeft();((b.newscrolly-h)*(e-h)<0||(b.newscrollx-i)*(c-i)<0)&&b.cancelScroll();if(b.opt.bouncescroll==false){if(e<0)e=0;else if(e>b.page.maxh)e=b.page.maxh;if(c<0)c=0;else if(c>b.page.maxw)c=b.page.maxw}if(c==b.newscrollx&&e==b.newscrolly)return false;b.newscrolly=e;b.newscrollx=c;b.newscrollspeed=g||false;
if(b.timer)return false;b.timer=setTimeout(function(){var g=b.getScrollTop(),h=b.getScrollLeft(),i,j;i=c-h;j=e-g;i=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(j,2)));i=b.prepareTransition(b.newscrollspeed?b.newscrollspeed:i);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);if(i>0){!b.scrollrunning&&b.onscrollstart&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:h,y:g},request:{x:c,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:i});if(f.transitionend){if(!b.scrollendtrapped)b.scrollendtrapped=
true,b.bind(b.doc,f.transitionend,b.onScrollEnd,false)}else b.scrollendtrapped&&clearTimeout(b.scrollendtrapped),b.scrollendtrapped=setTimeout(b.onScrollEnd,i);b.timerscroll={bz:new BezierClass(g,b.newscrolly,i,0,0,0.58,1),bh:new BezierClass(h,b.newscrollx,i,0,0,0.58,1)};if(!b.cursorfreezed)b.timerscroll.tm=setInterval(function(){b.showCursor(b.getScrollTop(),b.getScrollLeft())},60)}b.synched("doScroll-set",function(){b.timer=0;if(b.scrollendtrapped)b.scrollrunning=true;b.setScrollTop(b.newscrolly);
b.setScrollLeft(b.newscrollx);if(!b.scrollendtrapped)b.onScrollEnd()})},50)},this.cancelScroll=function(){if(!b.scrollendtrapped)return true;var c=b.getScrollTop(),e=b.getScrollLeft();b.scrollrunning=false;f.transitionend||clearTimeout(f.transitionend);b.scrollendtrapped=false;b._unbind(b.doc,f.transitionend,b.onScrollEnd);b.prepareTransition(0);b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=false;b.cursorfreezed=false;
b.showCursor(c,e);return b},this.onScrollEnd=function(){b.scrollendtrapped&&b._unbind(b.doc,f.transitionend,b.onScrollEnd);b.scrollendtrapped=false;b.prepareTransition(0);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=false;var c=b.getScrollTop(),e=b.getScrollLeft();b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.noticeCursor(false,c,e);b.cursorfreezed=false;if(c<0)c=0;else if(c>b.page.maxh)c=b.page.maxh;if(e<0)e=0;else if(e>b.page.maxw)e=b.page.maxw;if(c!=b.newscrolly||
e!=b.newscrollx)return b.doScrollPos(e,c,b.opt.snapbackspeed);b.onscrollend&&b.scrollrunning&&b.onscrollend.call(b,{type:"scrollend",current:{x:e,y:c},end:{x:b.newscrollx,y:b.newscrolly}});b.scrollrunning=false}):(this.doScrollLeft=function(c){var f=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(c,f)},this.doScrollTop=function(c){var f=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(f,c)},this.doScrollPos=function(c,f){function g(){if(b.cancelAnimationFrame)return true;b.scrollrunning=
true;if(n=1-n)return b.timer=p(g)||1;var c=0,d=sy=b.getScrollTop();if(b.dst.ay){var d=b.bzscroll?b.dst.py+b.bzscroll.getNow()*b.dst.ay:b.newscrolly,f=d-sy;if(f<0&&d<b.newscrolly||f>0&&d>b.newscrolly)d=b.newscrolly;b.setScrollTop(d);d==b.newscrolly&&(c=1)}else c=1;var e=sx=b.getScrollLeft();if(b.dst.ax){e=b.bzscroll?b.dst.px+b.bzscroll.getNow()*b.dst.ax:b.newscrollx;f=e-sx;if(f<0&&e<b.newscrollx||f>0&&e>b.newscrollx)e=b.newscrollx;b.setScrollLeft(e);e==b.newscrollx&&(c+=1)}else c+=1;if(c==2){b.timer=
0;b.cursorfreezed=false;b.bzscroll=false;b.scrollrunning=false;if(d<0)d=0;else if(d>b.page.maxh)d=b.page.maxh;if(e<0)e=0;else if(e>b.page.maxw)e=b.page.maxw;e!=b.newscrollx||d!=b.newscrolly?b.doScrollPos(e,d):b.onscrollend&&b.onscrollend.call(b,{type:"scrollend",current:{x:sx,y:sy},end:{x:b.newscrollx,y:b.newscrolly}})}else b.timer=p(g)||1}f=typeof f=="undefined"||f===false?b.getScrollTop(true):f;if(b.timer&&b.newscrolly==f&&b.newscrollx==c)return true;b.timer&&q(b.timer);b.timer=0;var e=b.getScrollTop(),
h=b.getScrollLeft();((b.newscrolly-e)*(f-e)<0||(b.newscrollx-h)*(c-h)<0)&&b.cancelScroll();b.newscrolly=f;b.newscrollx=c;if(!b.bouncescroll||!b.rail.visibility)if(b.newscrolly<0)b.newscrolly=0;else if(b.newscrolly>b.page.maxh)b.newscrolly=b.page.maxh;if(!b.bouncescroll||!b.railh.visibility)if(b.newscrollx<0)b.newscrollx=0;else if(b.newscrollx>b.page.maxw)b.newscrollx=b.page.maxw;b.dst={};b.dst.x=c-h;b.dst.y=f-e;b.dst.px=h;b.dst.py=e;var i=Math.round(Math.sqrt(Math.pow(b.dst.x,2)+Math.pow(b.dst.y,
2)));b.dst.ax=b.dst.x/i;b.dst.ay=b.dst.y/i;var j=0,k=i;if(b.dst.x==0)j=e,k=f,b.dst.ay=1,b.dst.py=0;else if(b.dst.y==0)j=h,k=c,b.dst.ax=1,b.dst.px=0;i=b.getTransitionSpeed(i);b.bzscroll=i>0?b.bzscroll?b.bzscroll.update(k,i):new BezierClass(j,k,i,0,1,0,1):false;if(!b.timer){(e==b.page.maxh&&f>=b.page.maxh||h==b.page.maxw&&c>=b.page.maxw)&&b.checkContentSize();var n=1;b.cancelAnimationFrame=false;b.timer=1;b.onscrollstart&&!b.scrollrunning&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:h,y:e},
request:{x:c,y:f},end:{x:b.newscrollx,y:b.newscrolly},speed:i});g();(e==b.page.maxh&&f>=e||h==b.page.maxw&&c>=h)&&b.checkContentSize();b.noticeCursor()}},this.cancelScroll=function(){b.timer&&q(b.timer);b.timer=0;b.bzscroll=false;b.scrollrunning=false;return b}):(this.doScrollLeft=function(c,f){var g=b.getScrollTop();b.doScrollPos(c,g,f)},this.doScrollTop=function(c,f){var g=b.getScrollLeft();b.doScrollPos(g,c,f)},this.doScrollPos=function(c,f){var g=c>b.page.maxw?b.page.maxw:c;g<0&&(g=0);var e=f>
b.page.maxh?b.page.maxh:f;e<0&&(e=0);b.synched("scroll",function(){b.setScrollTop(e);b.setScrollLeft(g)})},this.cancelScroll=function(){});this.doScrollBy=function(c,f){var g=0,g=f?Math.floor((b.scroll.y-c)*b.scrollratio.y):(b.timer?b.newscrolly:b.getScrollTop(true))-c;if(b.bouncescroll){var e=Math.round(b.view.h/2);g<-e?g=-e:g>b.page.maxh+e&&(g=b.page.maxh+e)}b.cursorfreezed=false;py=b.getScrollTop(true);if(g<0&&py<=0)return b.noticeCursor();else if(g>b.page.maxh&&py>=b.page.maxh)return b.checkContentSize(),
b.noticeCursor();b.doScrollTop(g)};this.doScrollLeftBy=function(c,f){var e=0,e=f?Math.floor((b.scroll.x-c)*b.scrollratio.x):(b.timer?b.newscrollx:b.getScrollLeft(true))-c;if(b.bouncescroll){var h=Math.round(b.view.w/2);e<-h?e=-h:e>b.page.maxw+h&&(e=b.page.maxw+h)}b.cursorfreezed=false;px=b.getScrollLeft(true);if(e<0&&px<=0)return b.noticeCursor();else if(e>b.page.maxw&&px>=b.page.maxw)return b.noticeCursor();b.doScrollLeft(e)};this.doScrollTo=function(c,e){e&&Math.round(c*b.scrollratio.y);b.cursorfreezed=
false;b.doScrollTop(c)};this.checkContentSize=function(){var c=b.getContentSize();(c.h!=b.page.h||c.w!=b.page.w)&&b.resize(false,c)};b.onscroll=function(){b.rail.drag||b.cursorfreezed||b.synched("scroll",function(){b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));if(b.railh)b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x));b.noticeCursor()})};b.bind(b.docscroll,"scroll",b.onscroll);this.doZoomIn=function(c){if(!b.zoomactive){b.zoomactive=true;b.zoomrestore={style:{}};var h="position,top,left,zIndex,backgroundColor,marginTop,marginBottom,marginLeft,marginRight".split(","),
g=b.win[0].style,i;for(i in h){var j=h[i];b.zoomrestore.style[j]=typeof g[j]!="undefined"?g[j]:""}b.zoomrestore.style.width=b.win.css("width");b.zoomrestore.style.height=b.win.css("height");b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()};if(f.isios4)b.zoomrestore.scrollTop=e(window).scrollTop(),e(window).scrollTop(0);b.win.css({position:f.isios4?"absolute":"fixed",top:0,left:0,"z-index":b.opt.zindex+100,margin:"0px"});h=b.win.css("backgroundColor");
(h==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(h))&&b.win.css("backgroundColor","#fff");b.rail.css({"z-index":b.opt.zindex+110});b.zoom.css({"z-index":b.opt.zindex+112});b.zoom.css("backgroundPosition","0px -18px");b.resizeZoom();b.onzoomin&&b.onzoomin.call(b);return b.cancelEvent(c)}};this.doZoomOut=function(c){if(b.zoomactive)return b.zoomactive=false,b.win.css("margin",""),b.win.css(b.zoomrestore.style),f.isios4&&e(window).scrollTop(b.zoomrestore.scrollTop),b.rail.css({"z-index":b.ispage?
b.opt.zindex:b.opt.zindex+2}),b.zoom.css({"z-index":b.opt.zindex}),b.zoomrestore=false,b.zoom.css("backgroundPosition","0px 0px"),b.onResize(),b.onzoomout&&b.onzoomout.call(b),b.cancelEvent(c)};this.doZoom=function(c){return b.zoomactive?b.doZoomOut(c):b.doZoomIn(c)};this.resizeZoom=function(){if(b.zoomactive){var c=b.getScrollTop();b.win.css({width:e(window).width()-b.zoomrestore.padding.w+"px",height:e(window).height()-b.zoomrestore.padding.h+"px"});b.onResize();console.log(c);b.setScrollTop(Math.min(b.page.maxh,
c))}};this.init();e.nicescroll.push(this)},z=function(e){var c=this;this.nc=e;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=false;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return+new Date};this.reset=function(e,i){c.stop();var b=c.time();c.steptime=0;c.lasttime=b;c.speedx=0;c.speedy=0;c.lastx=e;c.lasty=i;c.lastscrollx=-1;c.lastscrolly=-1};this.update=function(e,i){var b=c.time();
c.steptime=b-c.lasttime;c.lasttime=b;var b=i-c.lasty,j=e-c.lastx,f=c.nc.getScrollTop(),m=c.nc.getScrollLeft();f+=b;m+=j;c.snapx=m<0||m>c.nc.page.maxw;c.snapy=f<0||f>c.nc.page.maxh;c.speedx=j;c.speedy=b;c.lastx=e;c.lasty=i};this.stop=function(){c.nc.unsynched("domomentum2d");c.timer&&clearTimeout(c.timer);c.timer=0;c.lastscrollx=-1;c.lastscrolly=-1};this.doSnapy=function(e,i){var b=false;if(i<0)i=0,b=true;else if(i>c.nc.page.maxh)i=c.nc.page.maxh,b=true;if(e<0)e=0,b=true;else if(e>c.nc.page.maxw)e=
c.nc.page.maxw,b=true;b&&c.nc.doScrollPos(e,i,c.nc.opt.snapbackspeed)};this.doMomentum=function(e){var i=c.time(),b=e?i+e:c.lasttime,e=c.nc.getScrollLeft(),j=c.nc.getScrollTop(),f=c.nc.page.maxh,m=c.nc.page.maxw;c.speedx=m>0?Math.min(60,c.speedx):0;c.speedy=f>0?Math.min(60,c.speedy):0;b=b&&i-b<=50;if(j<0||j>f||e<0||e>m)b=false;e=c.speedx&&b?c.speedx:false;if(c.speedy&&b&&c.speedy||e){var o=Math.max(16,c.steptime);o>50&&(e=o/50,c.speedx*=e,c.speedy*=e,o=50);c.demulxy=0;c.lastscrollx=c.nc.getScrollLeft();
c.chkx=c.lastscrollx;c.lastscrolly=c.nc.getScrollTop();c.chky=c.lastscrolly;var d=c.lastscrollx,l=c.lastscrolly,g=function(){var b=c.time()-i>600?0.04:0.02;if(c.speedx&&(d=Math.floor(c.lastscrollx-c.speedx*(1-c.demulxy)),c.lastscrollx=d,d<0||d>m))b=0.1;if(c.speedy&&(l=Math.floor(c.lastscrolly-c.speedy*(1-c.demulxy)),c.lastscrolly=l,l<0||l>f))b=0.1;c.demulxy=Math.min(1,c.demulxy+b);c.nc.synched("domomentum2d",function(){if(c.speedx)c.nc.getScrollLeft()!=c.chkx&&c.stop(),c.chkx=d,c.nc.setScrollLeft(d);
if(c.speedy)c.nc.getScrollTop()!=c.chky&&c.stop(),c.chky=l,c.nc.setScrollTop(l);c.timer||(c.nc.hideCursor(),c.doSnapy(d,l))});c.demulxy<1?c.timer=setTimeout(g,o):(c.stop(),c.nc.hideCursor(),c.doSnapy(d,l))};g()}else c.doSnapy(c.nc.getScrollLeft(),c.nc.getScrollTop())}},t=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(j){var c=e.data(j,"__nicescroll")||false;return c&&c.ishwscroll?c.getScrollTop():t.call(j)},set:function(j,c){var h=e.data(j,"__nicescroll")||false;h&&h.ishwscroll?h.setScrollTop(parseInt(c)):
t.call(j,c);return this}};e.fn.scrollTop=function(j){if(typeof j=="undefined"){var c=this[0]?e.data(this[0],"__nicescroll")||false:false;return c&&c.ishwscroll?c.getScrollTop():t.call(this)}else return this.each(function(){var c=e.data(this,"__nicescroll")||false;c&&c.ishwscroll?c.setScrollTop(parseInt(j)):t.call(e(this),j)})};var u=e.fn.scrollLeft;e.cssHooks.pageXOffset={get:function(j){var c=e.data(j,"__nicescroll")||false;return c&&c.ishwscroll?c.getScrollLeft():u.call(j)},set:function(j,c){var h=
e.data(j,"__nicescroll")||false;h&&h.ishwscroll?h.setScrollLeft(parseInt(c)):u.call(j,c);return this}};e.fn.scrollLeft=function(j){if(typeof j=="undefined"){var c=this[0]?e.data(this[0],"__nicescroll")||false:false;return c&&c.ishwscroll?c.getScrollLeft():u.call(this)}else return this.each(function(){var c=e.data(this,"__nicescroll")||false;c&&c.ishwscroll?c.setScrollLeft(parseInt(j)):u.call(e(this),j)})};var v=function(j){var c=this;this.length=0;this.name="nicescrollarray";this.each=function(e){for(var b=
0;b<c.length;b++)e.call(c[b]);return c};this.push=function(e){c[c.length]=e;c.length++};this.eq=function(e){return c[e]};if(j)for(a=0;a<j.length;a++){var h=e.data(j[a],"__nicescroll")||false;h&&(this[this.length]=h,this.length++)}return this};(function(e,c,h){for(var i=0;i<c.length;i++)h(e,c[i])})(v.prototype,"show,hide,toggle,onResize,resize,remove,stop,doScrollPos".split(","),function(e,c){e[c]=function(){var e=arguments;return this.each(function(){this[c].apply(this,e)})}});e.fn.getNiceScroll=
function(j){return typeof j=="undefined"?new v(this):e.data(this[j],"__nicescroll")||false};e.extend(e.expr[":"],{nicescroll:function(j){return e.data(j,"__nicescroll")?true:false}});e.fn.niceScroll=function(j,c){typeof c=="undefined"&&typeof j=="object"&&!("jquery"in j)&&(c=j,j=false);var h=new v;typeof c=="undefined"&&(c={});if(j)c.doc=e(j),c.win=e(this);var i=!("doc"in c);if(!i&&!("win"in c))c.win=e(this);this.each(function(){var b=e(this).data("__nicescroll")||false;if(!b)c.doc=i?e(this):c.doc,
b=new F(c,e(this)),e(this).data("__nicescroll",b);h.push(b)});return h.length==1?h[0]:h};window.NiceScroll={getjQuery:function(){return e}};if(!e.nicescroll)e.nicescroll=new v})(jQuery);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkubmljZXNjcm9sbC5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoganF1ZXJ5Lm5pY2VzY3JvbGwgMy4xLjIgSW51WWFrc2EqMjAxMiBNSVQgaHR0cDovL2FyZWFhcGVydGEuY29tL25pY2VzY3JvbGwgKi8oZnVuY3Rpb24oZSl7dmFyIHI9ZmFsc2Usdz1mYWxzZSxCPTVFMyxDPTJFMyxEPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIiksZT1lW2UubGVuZ3RoLTFdLnNyYy5zcGxpdChcIj9cIilbMF07cmV0dXJuIGUuc3BsaXQoXCIvXCIpLmxlbmd0aD4wP2Uuc3BsaXQoXCIvXCIpLnNsaWNlKDAsLTEpLmpvaW4oXCIvXCIpK1wiL1wiOlwiXCJ9KCkscD13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmYWxzZSxxPXdpbmRvdy5jYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fFxud2luZG93Lm9DYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZmFsc2UseD1mYWxzZSxFPWZ1bmN0aW9uKCl7aWYoeClyZXR1cm4geDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpLGM9e2hhc3BvaW50ZXJsb2NrOlwicG9pbnRlckxvY2tFbGVtZW50XCJpbiBkb2N1bWVudHx8XCJtb3pQb2ludGVyTG9ja0VsZW1lbnRcImluIGRvY3VtZW50fHxcIndlYmtpdFBvaW50ZXJMb2NrRWxlbWVudFwiaW4gZG9jdW1lbnR9O2MuaXNvcGVyYT1cIm9wZXJhXCJpbiB3aW5kb3c7Yy5pc29wZXJhMTI9Yy5pc29wZXJhJiZcImdldFVzZXJNZWRpYVwiaW4gbmF2aWdhdG9yO2MuaXNpZT1cImFsbFwiaW4gZG9jdW1lbnQmJlwiYXR0YWNoRXZlbnRcImluIGUmJiFjLmlzb3BlcmE7Yy5pc2llb2xkPWMuaXNpZSYmIShcIm1zSW50ZXJwb2xhdGlvbk1vZGVcImluIGUuc3R5bGUpO2MuaXNpZTc9Yy5pc2llJiYhYy5pc2llb2xkJiYoIShcImRvY3VtZW50TW9kZVwiaW5cbmRvY3VtZW50KXx8ZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT03KTtjLmlzaWU4PWMuaXNpZSYmXCJkb2N1bWVudE1vZGVcImluIGRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudE1vZGU9PTg7Yy5pc2llOT1jLmlzaWUmJlwicGVyZm9ybWFuY2VcImluIHdpbmRvdyYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPj05O2MuaXNpZTEwPWMuaXNpZSYmXCJwZXJmb3JtYW5jZVwiaW4gd2luZG93JiZkb2N1bWVudC5kb2N1bWVudE1vZGU+PTEwO2MuaXNpZTltb2JpbGU9L2llbW9iaWxlLjkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO2lmKGMuaXNpZTltb2JpbGUpYy5pc2llOT1mYWxzZTtjLmlzaWU3bW9iaWxlPSFjLmlzaWU5bW9iaWxlJiZjLmlzaWU3JiYvaWVtb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO2MuaXNtb3ppbGxhPVwiTW96QXBwZWFyYW5jZVwiaW4gZS5zdHlsZTtjLmlzd2Via2l0PVwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZS5zdHlsZTtjLmlzY2hyb21lPVwiY2hyb21lXCJpbiB3aW5kb3c7XG5jLmlzY2hyb21lMjI9Yy5pc2Nocm9tZSYmYy5oYXNwb2ludGVybG9jaztjLmNhbnRvdWNoPVwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fFwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3c7Yy5oYXNtc3RvdWNoPXdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZHx8ZmFsc2U7Yy5pc21hYz0vXm1hYyQvaS50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7Yy5pc2lvcz1jLmNhbnRvdWNoJiYvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtjLmlzaW9zND1jLmlzaW9zJiYhKFwic2VhbFwiaW4gT2JqZWN0KTtjLmlzYW5kcm9pZD0vYW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7Yy50cnN0eWxlPWZhbHNlO2MuaGFzdHJhbnNmb3JtPWZhbHNlO2MuaGFzdHJhbnNsYXRlM2Q9ZmFsc2U7Yy50cmFuc2l0aW9uc3R5bGU9ZmFsc2U7Yy5oYXN0cmFuc2l0aW9uPWZhbHNlO2MudHJhbnNpdGlvbmVuZD1mYWxzZTtmb3IodmFyIGg9XG5bXCJ0cmFuc2Zvcm1cIixcIm1zVHJhbnNmb3JtXCIsXCJ3ZWJraXRUcmFuc2Zvcm1cIixcIk1velRyYW5zZm9ybVwiLFwiT1RyYW5zZm9ybVwiXSxpPTA7aTxoLmxlbmd0aDtpKyspaWYodHlwZW9mIGUuc3R5bGVbaFtpXV0hPVwidW5kZWZpbmVkXCIpe2MudHJzdHlsZT1oW2ldO2JyZWFrfWMuaGFzdHJhbnNmb3JtPWMudHJzdHlsZSE9ZmFsc2U7aWYoYy5oYXN0cmFuc2Zvcm0pZS5zdHlsZVtjLnRyc3R5bGVdPVwidHJhbnNsYXRlM2QoMXB4LDJweCwzcHgpXCIsYy5oYXN0cmFuc2xhdGUzZD0vdHJhbnNsYXRlM2QvLnRlc3QoZS5zdHlsZVtjLnRyc3R5bGVdKTtjLnRyYW5zaXRpb25zdHlsZT1mYWxzZTtjLnByZWZpeHN0eWxlPVwiXCI7Yy50cmFuc2l0aW9uZW5kPWZhbHNlO2Zvcih2YXIgaD1cInRyYW5zaXRpb24sd2Via2l0VHJhbnNpdGlvbixNb3pUcmFuc2l0aW9uLE9UcmFuc2l0aW9uLE9UcmFuc2l0aW9uLG1zVHJhbnNpdGlvbixLaHRtbFRyYW5zaXRpb25cIi5zcGxpdChcIixcIiksYj1cIiwtd2Via2l0LSwtbW96LSwtby0sLW8sLW1zLSwta2h0bWwtXCIuc3BsaXQoXCIsXCIpLFxubj1cInRyYW5zaXRpb25lbmQsd2Via2l0VHJhbnNpdGlvbkVuZCx0cmFuc2l0aW9uZW5kLG90cmFuc2l0aW9uZW5kLG9UcmFuc2l0aW9uRW5kLG1zVHJhbnNpdGlvbkVuZCxLaHRtbFRyYW5zaXRpb25FbmRcIi5zcGxpdChcIixcIiksaT0wO2k8aC5sZW5ndGg7aSsrKWlmKGhbaV1pbiBlLnN0eWxlKXtjLnRyYW5zaXRpb25zdHlsZT1oW2ldO2MucHJlZml4c3R5bGU9YltpXTtjLnRyYW5zaXRpb25lbmQ9bltpXTticmVha31jLmhhc3RyYW5zaXRpb249Yy50cmFuc2l0aW9uc3R5bGU7YTp7aD1bXCItbW96LWdyYWJcIixcIi13ZWJraXQtZ3JhYlwiLFwiZ3JhYlwiXTtpZihjLmlzY2hyb21lJiYhYy5pc2Nocm9tZTIyfHxjLmlzaWUpaD1bXTtmb3IoaT0wO2k8aC5sZW5ndGg7aSsrKWlmKGI9aFtpXSxlLnN0eWxlLmN1cnNvcj1iLGUuc3R5bGUuY3Vyc29yPT1iKXtoPWI7YnJlYWsgYX1oPVwidXJsKGh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9pbnRsL2VuX0FMTC9tYXBmaWxlcy9vcGVuaGFuZC5jdXIpLG4tcmVzaXplXCJ9Yy5jdXJzb3JncmFidmFsdWU9XG5oO2MuaGFzbW91c2VjYXB0dXJlPVwic2V0Q2FwdHVyZVwiaW4gZTtyZXR1cm4geD1jfSxGPWZ1bmN0aW9uKGosYyl7ZnVuY3Rpb24gaChkLGMsZyl7Yz1kLmNzcyhjKTtkPXBhcnNlRmxvYXQoYyk7cmV0dXJuIGlzTmFOKGQpPyhkPW9bY118fDAsZz1kPT0zP2c/Yi53aW4ub3V0ZXJIZWlnaHQoKS1iLndpbi5pbm5lckhlaWdodCgpOmIud2luLm91dGVyV2lkdGgoKS1iLndpbi5pbm5lcldpZHRoKCk6MSxiLmlzaWU4JiZkJiYoZCs9MSksZz9kOjApOmR9ZnVuY3Rpb24gaShkLGMpe3ZhciBnPTAsZj0wLGU9MTtcIndoZWVsRGVsdGFZXCJpbiBkPyhlPWIub3B0Lm1vdXNlc2Nyb2xsc3RlcC80OCxnPU1hdGguZmxvb3IoZC53aGVlbERlbHRhWCplKSxmPU1hdGguZmxvb3IoZC53aGVlbERlbHRhWSplKSxjJiZnPT0wJiZmJiYoZz1mLGY9MCkpOihlPWQuZGV0YWlsP2QuZGV0YWlsKi0xOmQud2hlZWxEZWx0YS80MCkmJihjP2c9TWF0aC5mbG9vcihlKmIub3B0Lm1vdXNlc2Nyb2xsc3RlcCk6Zj1NYXRoLmZsb29yKGUqXG5iLm9wdC5tb3VzZXNjcm9sbHN0ZXApKTtnJiYoYi5zY3JvbGxtb20mJmIuc2Nyb2xsbW9tLnN0b3AoKSxiLmxhc3RkZWx0YXgrPWcsYi5zeW5jaGVkKFwibW91c2V3aGVlbHhcIixmdW5jdGlvbigpe3ZhciBkPWIubGFzdGRlbHRheDtiLmxhc3RkZWx0YXg9MDtiLnJhaWwuZHJhZ3x8Yi5kb1Njcm9sbExlZnRCeShkKX0pKTtmJiYoYi5zY3JvbGxtb20mJmIuc2Nyb2xsbW9tLnN0b3AoKSxiLmxhc3RkZWx0YXkrPWYsYi5zeW5jaGVkKFwibW91c2V3aGVlbHlcIixmdW5jdGlvbigpe3ZhciBkPWIubGFzdGRlbHRheTtiLmxhc3RkZWx0YXk9MDtiLnJhaWwuZHJhZ3x8Yi5kb1Njcm9sbEJ5KGQpfSkpfXZhciBiPXRoaXM7dGhpcy52ZXJzaW9uPVwiMy4xLjRcIjt0aGlzLm5hbWU9XCJuaWNlc2Nyb2xsXCI7dGhpcy5tZT1jO3RoaXMub3B0PXtkb2M6ZShcImJvZHlcIiksd2luOmZhbHNlLHppbmRleDoxMDAwMDAsY3Vyc29yb3BhY2l0eW1pbjowLjIsY3Vyc29yb3BhY2l0eW1heDoxLGN1cnNvcmNvbG9yOlwiI2JkYmRiZFwiLFxuY3Vyc29yd2lkdGg6XCI3cHhcIixjdXJzb3Jib3JkZXI6XCJcIixjdXJzb3Jib3JkZXJyYWRpdXM6XCIxcHhcIixzY3JvbGxzcGVlZDo2MCxtb3VzZXNjcm9sbHN0ZXA6NDAsdG91Y2hiZWhhdmlvcjpmYWxzZSxod2FjY2VsZXJhdGlvbjp0cnVlLHVzZXRyYW5zaXRpb246dHJ1ZSxib3h6b29tOmZhbHNlLGRibGNsaWNrem9vbTp0cnVlLGdlc3R1cmV6b29tOnRydWUsZ3JhYmN1cnNvcmVuYWJsZWQ6dHJ1ZSxhdXRvaGlkZW1vZGU6ZmFsc2UsYmFja2dyb3VuZDpcIiM4MjdiN2RcIixpZnJhbWVhdXRvcmVzaXplOnRydWUsY3Vyc29ybWluaGVpZ2h0OjMyLHByZXNlcnZlbmF0aXZlc2Nyb2xsaW5nOnRydWUscmFpbG9mZnNldDpmYWxzZSxib3VuY2VzY3JvbGw6dHJ1ZSxzcGFjZWJhcmVuYWJsZWQ6dHJ1ZSxyYWlscGFkZGluZzp7dG9wOjAscmlnaHQ6MCxsZWZ0OjAsYm90dG9tOjB9LGRpc2FibGVvdXRsaW5lOnRydWUsaG9yaXpyYWlsZW5hYmxlZDp0cnVlLHJhaWxhbGlnbjpcInJpZ2h0XCIscmFpbHZhbGlnbjpcImJvdHRvbVwiLFxuZW5hYmxldHJhbnNsYXRlM2Q6dHJ1ZSxlbmFibGVtb3VzZXdoZWVsOnRydWUsZW5hYmxla2V5Ym9hcmQ6dHJ1ZSxzbW9vdGhzY3JvbGw6dHJ1ZSxzZW5zaXRpdmVyYWlsOnRydWUsZW5hYmxlbW91c2Vsb2NrYXBpOnRydWUsY3Vyc29yZml4ZWRoZWlnaHQ6ZmFsc2V9O3RoaXMub3B0LnNuYXBiYWNrc3BlZWQ9ODA7aWYoailmb3IodmFyIG4gaW4gYi5vcHQpdHlwZW9mIGpbbl0hPVwidW5kZWZpbmVkXCImJihiLm9wdFtuXT1qW25dKTt0aGlzLmlkZG9jPSh0aGlzLmRvYz1iLm9wdC5kb2MpJiZ0aGlzLmRvY1swXT90aGlzLmRvY1swXS5pZHx8XCJcIjpcIlwiO3RoaXMuaXNwYWdlPS9CT0RZfEhUTUwvLnRlc3QoYi5vcHQud2luP2Iub3B0LndpblswXS5ub2RlTmFtZTp0aGlzLmRvY1swXS5ub2RlTmFtZSk7dGhpcy5oYXN3cmFwcGVyPWIub3B0LndpbiE9PWZhbHNlO3RoaXMud2luPWIub3B0Lndpbnx8KHRoaXMuaXNwYWdlP2Uod2luZG93KTp0aGlzLmRvYyk7dGhpcy5kb2NzY3JvbGw9dGhpcy5pc3BhZ2UmJlxuIXRoaXMuaGFzd3JhcHBlcj9lKHdpbmRvdyk6dGhpcy53aW47dGhpcy5ib2R5PWUoXCJib2R5XCIpO3RoaXMuaWZyYW1lPXRoaXMuaXNmaXhlZD10aGlzLnZpZXdwb3J0PWZhbHNlO3RoaXMuaXNpZnJhbWU9dGhpcy5kb2NbMF0ubm9kZU5hbWU9PVwiSUZSQU1FXCImJnRoaXMud2luWzBdLm5vZGVOYW1lPT1cIklGUkFNRVwiO3RoaXMuaXN0ZXh0YXJlYT10aGlzLndpblswXS5ub2RlTmFtZT09XCJURVhUQVJFQVwiO3RoaXMuZm9yY2VzY3JlZW49ZmFsc2U7dGhpcy5jYW5zaG93b25tb3VzZWV2ZW50PWIub3B0LmF1dG9oaWRlbW9kZSE9XCJzY3JvbGxcIjt0aGlzLnBhZ2U9dGhpcy52aWV3PXRoaXMub256b29tb3V0PXRoaXMub256b29taW49dGhpcy5vbnNjcm9sbGNhbmNlbD10aGlzLm9uc2Nyb2xsZW5kPXRoaXMub25zY3JvbGxzdGFydD10aGlzLm9uY2xpY2s9dGhpcy5vbmdlc3R1cmV6b29tPXRoaXMub25rZXlwcmVzcz10aGlzLm9ubW91c2V3aGVlbD10aGlzLm9ubW91c2Vtb3ZlPXRoaXMub25tb3VzZXVwPVxudGhpcy5vbm1vdXNlZG93bj1mYWxzZTt0aGlzLnNjcm9sbD17eDowLHk6MH07dGhpcy5zY3JvbGxyYXRpbz17eDowLHk6MH07dGhpcy5jdXJzb3JoZWlnaHQ9MjA7dGhpcy5zY3JvbGx2YWx1ZW1heD0wO3RoaXMub2JzZXJ2ZXI9dGhpcy5zY3JvbGxtb209dGhpcy5zY3JvbGxydW5uaW5nPWZhbHNlO2RvIHRoaXMuaWQ9XCJhc2NyYWlsXCIrQysrO3doaWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpKTt0aGlzLmhhc21vdXNlZm9jdXM9dGhpcy5oYXNmb2N1cz10aGlzLnpvb21hY3RpdmU9dGhpcy56b29tPXRoaXMuY3Vyc29yZnJlZXplZD10aGlzLmN1cnNvcj10aGlzLnJhaWw9ZmFsc2U7dGhpcy52aXNpYmlsaXR5PXRydWU7dGhpcy5oaWRkZW49dGhpcy5sb2NrZWQ9ZmFsc2U7dGhpcy5jdXJzb3JhY3RpdmU9dHJ1ZTt0aGlzLm5hdGl2ZXNjcm9sbGluZ2FyZWE9ZmFsc2U7dGhpcy5ldmVudHM9W107dGhpcy5zYXZlZD17fTt0aGlzLmRlbGF5bGlzdD17fTt0aGlzLnN5bmNsaXN0PVxue307dGhpcy5sYXN0ZGVsdGF5PXRoaXMubGFzdGRlbHRheD0wO3RoaXMuZGV0ZWN0ZWQ9RSgpO3ZhciBmPWUuZXh0ZW5kKHt9LHRoaXMuZGV0ZWN0ZWQpO3RoaXMuaXNod3Njcm9sbD0odGhpcy5jYW5od3Njcm9sbD1mLmhhc3RyYW5zZm9ybSYmYi5vcHQuaHdhY2NlbGVyYXRpb24pJiZiLmhhc3dyYXBwZXI7dGhpcy5pc3RvdWNoY2FwYWJsZT1mYWxzZTtpZihmLmNhbnRvdWNoJiZmLmlzY2hyb21lJiYhZi5pc2lvcyYmIWYuaXNhbmRyb2lkKXRoaXMuaXN0b3VjaGNhcGFibGU9dHJ1ZSxmLmNhbnRvdWNoPWZhbHNlO2lmKGYuY2FudG91Y2gmJmYuaXNtb3ppbGxhJiYhZi5pc2lvcyl0aGlzLmlzdG91Y2hjYXBhYmxlPXRydWUsZi5jYW50b3VjaD1mYWxzZTtpZighYi5vcHQuZW5hYmxlbW91c2Vsb2NrYXBpKWYuaGFzbW91c2VjYXB0dXJlPWZhbHNlLGYuaGFzcG9pbnRlcmxvY2s9ZmFsc2U7dGhpcy5kZWxheWVkPWZ1bmN0aW9uKGQsYyxnLGYpe3ZhciBlPWIuZGVsYXlsaXN0W2RdLGg9XG4obmV3IERhdGUpLmdldFRpbWUoKTtpZighZiYmZSYmZS50dClyZXR1cm4gZmFsc2U7ZSYmZS50dCYmY2xlYXJUaW1lb3V0KGUudHQpO2lmKGUmJmUubGFzdCtnPmgmJiFlLnR0KWIuZGVsYXlsaXN0W2RdPXtsYXN0OmgrZyx0dDpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5kZWxheWxpc3RbZF0udHQ9MDtjLmNhbGwoKX0sZyl9O2Vsc2UgaWYoIWV8fCFlLnR0KWIuZGVsYXlsaXN0W2RdPXtsYXN0OmgsdHQ6MH0sc2V0VGltZW91dChmdW5jdGlvbigpe2MuY2FsbCgpfSwwKX07dGhpcy5zeW5jaGVkPWZ1bmN0aW9uKGQsYyl7Yi5zeW5jbGlzdFtkXT1jOyhmdW5jdGlvbigpe2lmKCFiLm9uc3luYylwKGZ1bmN0aW9uKCl7Yi5vbnN5bmM9ZmFsc2U7Zm9yKGQgaW4gYi5zeW5jbGlzdCl7dmFyIGM9Yi5zeW5jbGlzdFtkXTtjJiZjLmNhbGwoYik7Yi5zeW5jbGlzdFtkXT1mYWxzZX19KSxiLm9uc3luYz10cnVlfSkoKTtyZXR1cm4gZH07dGhpcy51bnN5bmNoZWQ9ZnVuY3Rpb24oZCl7Yi5zeW5jbGlzdFtkXSYmXG4oYi5zeW5jbGlzdFtkXT1mYWxzZSl9O3RoaXMuY3NzPWZ1bmN0aW9uKGQsYyl7Zm9yKHZhciBnIGluIGMpYi5zYXZlZC5jc3MucHVzaChbZCxnLGQuY3NzKGcpXSksZC5jc3MoZyxjW2ddKX07dGhpcy5zY3JvbGxUb3A9ZnVuY3Rpb24oZCl7cmV0dXJuIHR5cGVvZiBkPT1cInVuZGVmaW5lZFwiP2IuZ2V0U2Nyb2xsVG9wKCk6Yi5zZXRTY3JvbGxUb3AoZCl9O3RoaXMuc2Nyb2xsTGVmdD1mdW5jdGlvbihkKXtyZXR1cm4gdHlwZW9mIGQ9PVwidW5kZWZpbmVkXCI/Yi5nZXRTY3JvbGxMZWZ0KCk6Yi5zZXRTY3JvbGxMZWZ0KGQpfTtCZXppZXJDbGFzcz1mdW5jdGlvbihiLGMsZyxmLGUsaCxpKXt0aGlzLnN0PWI7dGhpcy5lZD1jO3RoaXMuc3BkPWc7dGhpcy5wMT1mfHwwO3RoaXMucDI9ZXx8MTt0aGlzLnAzPWh8fDA7dGhpcy5wND1pfHwxO3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5kZj10aGlzLmVkLXRoaXMuc3R9O0JlemllckNsYXNzLnByb3RvdHlwZT17QjI6ZnVuY3Rpb24oYil7cmV0dXJuIDMqXG5iKmIqKDEtYil9LEIzOmZ1bmN0aW9uKGIpe3JldHVybiAzKmIqKDEtYikqKDEtYil9LEI0OmZ1bmN0aW9uKGIpe3JldHVybigxLWIpKigxLWIpKigxLWIpfSxnZXROb3c6ZnVuY3Rpb24oKXt2YXIgYj0xLSgobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLnRzKS90aGlzLnNwZCxjPXRoaXMuQjIoYikrdGhpcy5CMyhiKSt0aGlzLkI0KGIpO3JldHVybiBiPDA/dGhpcy5lZDp0aGlzLnN0K01hdGgucm91bmQodGhpcy5kZipjKX0sdXBkYXRlOmZ1bmN0aW9uKGIsYyl7dGhpcy5zdD10aGlzLmdldE5vdygpO3RoaXMuZWQ9Yjt0aGlzLnNwZD1jO3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5kZj10aGlzLmVkLXRoaXMuc3Q7cmV0dXJuIHRoaXN9fTtpZih0aGlzLmlzaHdzY3JvbGwpe3RoaXMuZG9jLnRyYW5zbGF0ZT17eDowLHk6MCx0eDpcIjBweFwiLHR5OlwiMHB4XCJ9O2YuaGFzdHJhbnNsYXRlM2QmJmYuaXNpb3MmJnRoaXMuZG9jLmNzcyhcIi13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eVwiLFxuXCJoaWRkZW5cIik7dmFyIG09ZnVuY3Rpb24oKXt2YXIgZD1iLmRvYy5jc3MoZi50cnN0eWxlKTtyZXR1cm4gZCYmZC5zdWJzdHIoMCw2KT09XCJtYXRyaXhcIj9kLnJlcGxhY2UoL14uKlxcKCguKilcXCkkL2csXCIkMVwiKS5yZXBsYWNlKC9weC9nLFwiXCIpLnNwbGl0KC8sICsvKTpmYWxzZX07dGhpcy5nZXRTY3JvbGxUb3A9ZnVuY3Rpb24oZCl7aWYoIWQpe2lmKGQ9bSgpKXJldHVybiBkLmxlbmd0aD09MTY/LWRbMTNdOi1kWzVdO2lmKGIudGltZXJzY3JvbGwmJmIudGltZXJzY3JvbGwuYnopcmV0dXJuIGIudGltZXJzY3JvbGwuYnouZ2V0Tm93KCl9cmV0dXJuIGIuZG9jLnRyYW5zbGF0ZS55fTt0aGlzLmdldFNjcm9sbExlZnQ9ZnVuY3Rpb24oZCl7aWYoIWQpe2lmKGQ9bSgpKXJldHVybiBkLmxlbmd0aD09MTY/LWRbMTJdOi1kWzRdO2lmKGIudGltZXJzY3JvbGwmJmIudGltZXJzY3JvbGwuYmgpcmV0dXJuIGIudGltZXJzY3JvbGwuYmguZ2V0Tm93KCl9cmV0dXJuIGIuZG9jLnRyYW5zbGF0ZS54fTtcbnRoaXMubm90aWZ5U2Nyb2xsRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQ/ZnVuY3Rpb24oYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJVSUV2ZW50c1wiKTtjLmluaXRVSUV2ZW50KFwic2Nyb2xsXCIsZmFsc2UsdHJ1ZSx3aW5kb3csMSk7Yi5kaXNwYXRjaEV2ZW50KGMpfTpkb2N1bWVudC5maXJlRXZlbnQ/ZnVuY3Rpb24oYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtiLmZpcmVFdmVudChcIm9uc2Nyb2xsXCIpO2MuY2FuY2VsQnViYmxlPXRydWV9OmZ1bmN0aW9uKCl7fTtmLmhhc3RyYW5zbGF0ZTNkJiZiLm9wdC5lbmFibGV0cmFuc2xhdGUzZD8odGhpcy5zZXRTY3JvbGxUb3A9ZnVuY3Rpb24oZCxjKXtiLmRvYy50cmFuc2xhdGUueT1kO2IuZG9jLnRyYW5zbGF0ZS50eT1kKi0xK1wicHhcIjtiLmRvYy5jc3MoZi50cnN0eWxlLFwidHJhbnNsYXRlM2QoXCIrYi5kb2MudHJhbnNsYXRlLnR4K1wiLFwiK2IuZG9jLnRyYW5zbGF0ZS50eStcIiwwcHgpXCIpO2N8fGIubm90aWZ5U2Nyb2xsRXZlbnQoYi53aW5bMF0pfSxcbnRoaXMuc2V0U2Nyb2xsTGVmdD1mdW5jdGlvbihkLGMpe2IuZG9jLnRyYW5zbGF0ZS54PWQ7Yi5kb2MudHJhbnNsYXRlLnR4PWQqLTErXCJweFwiO2IuZG9jLmNzcyhmLnRyc3R5bGUsXCJ0cmFuc2xhdGUzZChcIitiLmRvYy50cmFuc2xhdGUudHgrXCIsXCIrYi5kb2MudHJhbnNsYXRlLnR5K1wiLDBweClcIik7Y3x8Yi5ub3RpZnlTY3JvbGxFdmVudChiLndpblswXSl9KToodGhpcy5zZXRTY3JvbGxUb3A9ZnVuY3Rpb24oZCxjKXtiLmRvYy50cmFuc2xhdGUueT1kO2IuZG9jLnRyYW5zbGF0ZS50eT1kKi0xK1wicHhcIjtiLmRvYy5jc3MoZi50cnN0eWxlLFwidHJhbnNsYXRlKFwiK2IuZG9jLnRyYW5zbGF0ZS50eCtcIixcIitiLmRvYy50cmFuc2xhdGUudHkrXCIpXCIpO2N8fGIubm90aWZ5U2Nyb2xsRXZlbnQoYi53aW5bMF0pfSx0aGlzLnNldFNjcm9sbExlZnQ9ZnVuY3Rpb24oZCxjKXtiLmRvYy50cmFuc2xhdGUueD1kO2IuZG9jLnRyYW5zbGF0ZS50eD1kKi0xK1wicHhcIjtiLmRvYy5jc3MoZi50cnN0eWxlLFxuXCJ0cmFuc2xhdGUoXCIrYi5kb2MudHJhbnNsYXRlLnR4K1wiLFwiK2IuZG9jLnRyYW5zbGF0ZS50eStcIilcIik7Y3x8Yi5ub3RpZnlTY3JvbGxFdmVudChiLndpblswXSl9KX1lbHNlIHRoaXMuZ2V0U2Nyb2xsVG9wPWZ1bmN0aW9uKCl7cmV0dXJuIGIuZG9jc2Nyb2xsLnNjcm9sbFRvcCgpfSx0aGlzLnNldFNjcm9sbFRvcD1mdW5jdGlvbihkKXtyZXR1cm4gYi5kb2NzY3JvbGwuc2Nyb2xsVG9wKGQpfSx0aGlzLmdldFNjcm9sbExlZnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYi5kb2NzY3JvbGwuc2Nyb2xsTGVmdCgpfSx0aGlzLnNldFNjcm9sbExlZnQ9ZnVuY3Rpb24oZCl7cmV0dXJuIGIuZG9jc2Nyb2xsLnNjcm9sbExlZnQoZCl9O3RoaXMuZ2V0VGFyZ2V0PWZ1bmN0aW9uKGIpe3JldHVybiFiP2ZhbHNlOmIudGFyZ2V0P2IudGFyZ2V0OmIuc3JjRWxlbWVudD9iLnNyY0VsZW1lbnQ6ZmFsc2V9O3RoaXMuaGFzUGFyZW50PWZ1bmN0aW9uKGIsYyl7aWYoIWIpcmV0dXJuIGZhbHNlO2Zvcih2YXIgZz1cbmIudGFyZ2V0fHxiLnNyY0VsZW1lbnR8fGJ8fGZhbHNlO2cmJmcuaWQhPWM7KWc9Zy5wYXJlbnROb2RlfHxmYWxzZTtyZXR1cm4gZyE9PWZhbHNlfTt2YXIgbz17dGhpbjoxLG1lZGl1bTozLHRoaWNrOjV9O3RoaXMuZ2V0T2Zmc2V0PWZ1bmN0aW9uKCl7aWYoYi5pc2ZpeGVkKXJldHVybnt0b3A6cGFyc2VGbG9hdChiLndpbi5jc3MoXCJ0b3BcIikpLGxlZnQ6cGFyc2VGbG9hdChiLndpbi5jc3MoXCJsZWZ0XCIpKX07aWYoIWIudmlld3BvcnQpcmV0dXJuIGIud2luLm9mZnNldCgpO3ZhciBkPWIud2luLm9mZnNldCgpLGM9Yi52aWV3cG9ydC5vZmZzZXQoKTtyZXR1cm57dG9wOmQudG9wLWMudG9wK2Iudmlld3BvcnQuc2Nyb2xsVG9wKCksbGVmdDpkLmxlZnQtYy5sZWZ0K2Iudmlld3BvcnQuc2Nyb2xsTGVmdCgpfX07dGhpcy51cGRhdGVTY3JvbGxCYXI9ZnVuY3Rpb24oZCl7aWYoYi5pc2h3c2Nyb2xsKWIucmFpbC5jc3Moe2hlaWdodDpiLndpbi5pbm5lckhlaWdodCgpfSksYi5yYWlsaCYmXG5iLnJhaWxoLmNzcyh7d2lkdGg6Yi53aW4uaW5uZXJXaWR0aCgpfSk7ZWxzZXt2YXIgYz1iLmdldE9mZnNldCgpLGc9Yy50b3AsZj1jLmxlZnQ7Zys9aChiLndpbixcImJvcmRlci10b3Atd2lkdGhcIix0cnVlKTtiLndpbi5vdXRlcldpZHRoKCk7Yi53aW4uaW5uZXJXaWR0aCgpO2YrPWIucmFpbC5hbGlnbj9iLndpbi5vdXRlcldpZHRoKCktaChiLndpbixcImJvcmRlci1yaWdodC13aWR0aFwiKS1iLnJhaWwud2lkdGg6aChiLndpbixcImJvcmRlci1sZWZ0LXdpZHRoXCIpO3ZhciBlPWIub3B0LnJhaWxvZmZzZXQ7ZSYmKGUudG9wJiYoZys9ZS50b3ApLGIucmFpbC5hbGlnbiYmZS5sZWZ0JiYoZis9ZS5sZWZ0KSk7Yi5sb2NrZWR8fGIucmFpbC5jc3Moe3RvcDpnLGxlZnQ6ZixoZWlnaHQ6ZD9kLmg6Yi53aW4uaW5uZXJIZWlnaHQoKX0pO2Iuem9vbSYmYi56b29tLmNzcyh7dG9wOmcrMSxsZWZ0OmIucmFpbC5hbGlnbj09MT9mLTIwOmYrYi5yYWlsLndpZHRoKzR9KTtpZihiLnJhaWxoJiYhYi5sb2NrZWQpZz1cbmMudG9wLGY9Yy5sZWZ0LGQ9Yi5yYWlsaC5hbGlnbj9nK2goYi53aW4sXCJib3JkZXItdG9wLXdpZHRoXCIsdHJ1ZSkrYi53aW4uaW5uZXJIZWlnaHQoKS1iLnJhaWxoLmhlaWdodDpnK2goYi53aW4sXCJib3JkZXItdG9wLXdpZHRoXCIsdHJ1ZSksZis9aChiLndpbixcImJvcmRlci1sZWZ0LXdpZHRoXCIpLGIucmFpbGguY3NzKHt0b3A6ZCxsZWZ0OmYsd2lkdGg6Yi5yYWlsaC53aWR0aH0pfX07dGhpcy5kb1JhaWxDbGljaz1mdW5jdGlvbihkLGMsZyl7dmFyIGY7IShiLnJhaWwuZHJhZyYmYi5yYWlsLmRyYWcucHQhPTEpJiYhYi5sb2NrZWQmJiFiLnJhaWwuZHJhZyYmKGIuY2FuY2VsU2Nyb2xsKCksYi5jYW5jZWxFdmVudChkKSxjPyhjPWc/Yi5kb1Njcm9sbExlZnQ6Yi5kb1Njcm9sbFRvcCxmPWc/KGQucGFnZVgtYi5yYWlsaC5vZmZzZXQoKS5sZWZ0LWIuY3Vyc29yd2lkdGgvMikqYi5zY3JvbGxyYXRpby54OihkLnBhZ2VZLWIucmFpbC5vZmZzZXQoKS50b3AtYi5jdXJzb3JoZWlnaHQvMikqXG5iLnNjcm9sbHJhdGlvLnksYyhmKSk6KGM9Zz9iLmRvU2Nyb2xsTGVmdEJ5OmIuZG9TY3JvbGxCeSxmPWc/Yi5zY3JvbGwueDpiLnNjcm9sbC55LGQ9Zz9kLnBhZ2VYLWIucmFpbGgub2Zmc2V0KCkubGVmdDpkLnBhZ2VZLWIucmFpbC5vZmZzZXQoKS50b3AsZz1nP2Iudmlldy53OmIudmlldy5oLGY+PWQ/YyhnKTpjKC1nKSkpfTtiLmhhc2FuaW1hdGlvbmZyYW1lPXA7Yi5oYXNjYW5jZWxhbmltYXRpb25mcmFtZT1xO2IuaGFzYW5pbWF0aW9uZnJhbWU/Yi5oYXNjYW5jZWxhbmltYXRpb25mcmFtZXx8KHE9ZnVuY3Rpb24oKXtiLmNhbmNlbEFuaW1hdGlvbkZyYW1lPXRydWV9KToocD1mdW5jdGlvbihiKXtyZXR1cm4gc2V0VGltZW91dChiLDE2KX0scT1jbGVhckludGVydmFsKTt0aGlzLmluaXQ9ZnVuY3Rpb24oKXtiLnNhdmVkLmNzcz1bXTtpZihmLmlzaWU3bW9iaWxlKXJldHVybiB0cnVlO2YuaGFzbXN0b3VjaCYmYi5jc3MoYi5pc3BhZ2U/ZShcImh0bWxcIik6Yi53aW4se1wiLW1zLXRvdWNoLWFjdGlvblwiOlwibm9uZVwifSk7XG5pZighYi5pc3BhZ2V8fCFmLmNhbnRvdWNoJiYhZi5pc2llb2xkJiYhZi5pc2llOW1vYmlsZSl7dmFyIGQ9Yi5kb2NzY3JvbGw7Yi5pc3BhZ2UmJihkPWIuaGFzd3JhcHBlcj9iLndpbjpiLmRvYyk7Zi5pc2llOW1vYmlsZXx8Yi5jc3MoZCx7XCJvdmVyZmxvdy15XCI6XCJoaWRkZW5cIn0pO2IuaXNwYWdlJiZmLmlzaWU3JiYoYi5kb2NbMF0ubm9kZU5hbWU9PVwiQk9EWVwiP2IuY3NzKGUoXCJodG1sXCIpLHtcIm92ZXJmbG93LXlcIjpcImhpZGRlblwifSk6Yi5kb2NbMF0ubm9kZU5hbWU9PVwiSFRNTFwiJiZiLmNzcyhlKFwiYm9keVwiKSx7XCJvdmVyZmxvdy15XCI6XCJoaWRkZW5cIn0pKTtmLmlzaW9zJiYhYi5pc3BhZ2UmJiFiLmhhc3dyYXBwZXImJmIuY3NzKGUoXCJib2R5XCIpLHtcIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nXCI6XCJ0b3VjaFwifSk7dmFyIGM9ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtjLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDowLFwiZmxvYXRcIjpcInJpZ2h0XCIsd2lkdGg6Yi5vcHQuY3Vyc29yd2lkdGgsXG5oZWlnaHQ6XCIwcHhcIixcImJhY2tncm91bmQtY29sb3JcIjpiLm9wdC5jdXJzb3Jjb2xvcixib3JkZXI6Yi5vcHQuY3Vyc29yYm9yZGVyLFwiYmFja2dyb3VuZC1jbGlwXCI6XCJwYWRkaW5nLWJveFwiLFwiLXdlYmtpdC1ib3JkZXItcmFkaXVzXCI6Yi5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFwiLW1vei1ib3JkZXItcmFkaXVzXCI6Yi5vcHQuY3Vyc29yYm9yZGVycmFkaXVzLFwiYm9yZGVyLXJhZGl1c1wiOmIub3B0LmN1cnNvcmJvcmRlcnJhZGl1c30pO2MuaGJvcmRlcj1wYXJzZUZsb2F0KGMub3V0ZXJIZWlnaHQoKS1jLmlubmVySGVpZ2h0KCkpO2IuY3Vyc29yPWM7dmFyIGc9ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtnLmF0dHIoXCJpZFwiLGIuaWQpO3ZhciBoLGksaj1bXCJsZWZ0XCIsXCJyaWdodFwiXSx5O2Zvcih5IGluIGopaT1qW3ldLChoPWIub3B0LnJhaWxwYWRkaW5nW2ldKT9nLmNzcyhcInBhZGRpbmctXCIraSxoK1wicHhcIik6Yi5vcHQucmFpbHBhZGRpbmdbaV09MDtnLmFwcGVuZChjKTtcbmcud2lkdGg9TWF0aC5tYXgocGFyc2VGbG9hdChiLm9wdC5jdXJzb3J3aWR0aCksYy5vdXRlcldpZHRoKCkpK2Iub3B0LnJhaWxwYWRkaW5nLmxlZnQrYi5vcHQucmFpbHBhZGRpbmcucmlnaHQ7Zy5jc3Moe3dpZHRoOmcud2lkdGgrXCJweFwiLHpJbmRleDpiLmlzcGFnZT9iLm9wdC56aW5kZXg6Yi5vcHQuemluZGV4KzIsYmFja2dyb3VuZDpiLm9wdC5iYWNrZ3JvdW5kfSk7Zy52aXNpYmlsaXR5PXRydWU7Zy5zY3JvbGxhYmxlPXRydWU7Zy5hbGlnbj1iLm9wdC5yYWlsYWxpZ249PVwibGVmdFwiPzA6MTtiLnJhaWw9ZztjPWIucmFpbC5kcmFnPWZhbHNlO2lmKGIub3B0LmJveHpvb20mJiFiLmlzcGFnZSYmIWYuaXNpZW9sZCYmKGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxiLmJpbmQoYyxcImNsaWNrXCIsYi5kb1pvb20pLGIuem9vbT1lKGMpLGIuem9vbS5jc3Moe2N1cnNvcjpcInBvaW50ZXJcIixcInotaW5kZXhcIjpiLm9wdC56aW5kZXgsYmFja2dyb3VuZEltYWdlOlwidXJsKFwiK0QrXG5cInpvb21pY28ucG5nKVwiLGhlaWdodDoxOCx3aWR0aDoxOCxiYWNrZ3JvdW5kUG9zaXRpb246XCIwcHggMHB4XCJ9KSxiLm9wdC5kYmxjbGlja3pvb20mJmIuYmluZChiLndpbixcImRibGNsaWNrXCIsYi5kb1pvb20pLGYuY2FudG91Y2gmJmIub3B0Lmdlc3R1cmV6b29tKSliLm9uZ2VzdHVyZXpvb209ZnVuY3Rpb24oZCl7ZC5zY2FsZT4xLjUmJmIuZG9ab29tSW4oZCk7ZC5zY2FsZTwwLjgmJmIuZG9ab29tT3V0KGQpO3JldHVybiBiLmNhbmNlbEV2ZW50KGQpfSxiLmJpbmQoYi53aW4sXCJnZXN0dXJlZW5kXCIsYi5vbmdlc3R1cmV6b29tKTtiLnJhaWxoPWZhbHNlO2lmKGIub3B0Lmhvcml6cmFpbGVuYWJsZWQpe2IuY3NzKGQse1wib3ZlcmZsb3cteFwiOlwiaGlkZGVuXCJ9KTtjPWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7Yy5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6MCxoZWlnaHQ6Yi5vcHQuY3Vyc29yd2lkdGgsd2lkdGg6XCIwcHhcIixcImJhY2tncm91bmQtY29sb3JcIjpiLm9wdC5jdXJzb3Jjb2xvcixcbmJvcmRlcjpiLm9wdC5jdXJzb3Jib3JkZXIsXCJiYWNrZ3JvdW5kLWNsaXBcIjpcInBhZGRpbmctYm94XCIsXCItd2Via2l0LWJvcmRlci1yYWRpdXNcIjpiLm9wdC5jdXJzb3Jib3JkZXJyYWRpdXMsXCItbW96LWJvcmRlci1yYWRpdXNcIjpiLm9wdC5jdXJzb3Jib3JkZXJyYWRpdXMsXCJib3JkZXItcmFkaXVzXCI6Yi5vcHQuY3Vyc29yYm9yZGVycmFkaXVzfSk7Yy53Ym9yZGVyPXBhcnNlRmxvYXQoYy5vdXRlcldpZHRoKCktYy5pbm5lcldpZHRoKCkpO2IuY3Vyc29yaD1jO3ZhciBrPWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ay5hdHRyKFwiaWRcIixiLmlkK1wiLWhyXCIpO2suaGVpZ2h0PTErTWF0aC5tYXgocGFyc2VGbG9hdChiLm9wdC5jdXJzb3J3aWR0aCksYy5vdXRlckhlaWdodCgpKTtrLmNzcyh7aGVpZ2h0OmsuaGVpZ2h0K1wicHhcIix6SW5kZXg6Yi5pc3BhZ2U/Yi5vcHQuemluZGV4OmIub3B0LnppbmRleCsyLGJhY2tncm91bmQ6Yi5vcHQuYmFja2dyb3VuZH0pO2suYXBwZW5kKGMpO1xuay52aXNpYmlsaXR5PXRydWU7ay5zY3JvbGxhYmxlPXRydWU7ay5hbGlnbj1iLm9wdC5yYWlsdmFsaWduPT1cInRvcFwiPzA6MTtiLnJhaWxoPWs7Yi5yYWlsaC5kcmFnPWZhbHNlfWlmKGIuaXNwYWdlKWcuY3NzKHtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOlwiMHB4XCIsaGVpZ2h0OlwiMTAwJVwifSksZy5hbGlnbj9nLmNzcyh7cmlnaHQ6XCIwcHhcIn0pOmcuY3NzKHtsZWZ0OlwiMHB4XCJ9KSxiLmJvZHkuYXBwZW5kKGcpLGIucmFpbGgmJihrLmNzcyh7cG9zaXRpb246XCJmaXhlZFwiLGxlZnQ6XCIwcHhcIix3aWR0aDpcIjEwMCVcIn0pLGsuYWxpZ24/ay5jc3Moe2JvdHRvbTpcIjBweFwifSk6ay5jc3Moe3RvcDpcIjBweFwifSksYi5ib2R5LmFwcGVuZChrKSk7ZWxzZXtpZihiLmlzaHdzY3JvbGwpYi53aW4uY3NzKFwicG9zaXRpb25cIik9PVwic3RhdGljXCImJmIuY3NzKGIud2luLHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxkPWIud2luWzBdLm5vZGVOYW1lPT1cIkhUTUxcIj9iLmJvZHk6Yi53aW4sYi56b29tJiYoYi56b29tLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFxudG9wOjEscmlnaHQ6MCxcIm1hcmdpbi1yaWdodFwiOmcud2lkdGgrNH0pLGQuYXBwZW5kKGIuem9vbSkpLGcuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjB9KSxnLmFsaWduP2cuY3NzKHtyaWdodDowfSk6Zy5jc3Moe2xlZnQ6MH0pLGQuYXBwZW5kKGcpLGsmJihrLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGxlZnQ6MCxib3R0b206MH0pLGsuYWxpZ24/ay5jc3Moe2JvdHRvbTowfSk6ay5jc3Moe3RvcDowfSksZC5hcHBlbmQoaykpO2Vsc2V7Yi5pc2ZpeGVkPWIud2luLmNzcyhcInBvc2l0aW9uXCIpPT1cImZpeGVkXCI7ZD1iLmlzZml4ZWQ/XCJmaXhlZFwiOlwiYWJzb2x1dGVcIjtpZighYi5pc2ZpeGVkKWIudmlld3BvcnQ9Yi5nZXRWaWV3cG9ydChiLndpblswXSk7aWYoYi52aWV3cG9ydCliLmJvZHk9Yi52aWV3cG9ydDtnLmNzcyh7cG9zaXRpb246ZH0pO2Iuem9vbSYmYi56b29tLmNzcyh7cG9zaXRpb246ZH0pO2IudXBkYXRlU2Nyb2xsQmFyKCk7Yi5ib2R5LmFwcGVuZChnKTtiLnpvb20mJlxuYi5ib2R5LmFwcGVuZChiLnpvb20pO2IucmFpbGgmJihrLmNzcyh7cG9zaXRpb246ZH0pLGIuYm9keS5hcHBlbmQoaykpfWYuaXNpb3MmJmIuY3NzKGIud2luLHtcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiOlwicmdiYSgwLDAsMCwwKVwiLFwiLXdlYmtpdC10b3VjaC1jYWxsb3V0XCI6XCJub25lXCJ9KTtmLmlzaWUmJmIub3B0LmRpc2FibGVvdXRsaW5lJiZiLndpbi5hdHRyKFwiaGlkZUZvY3VzXCIsXCJ0cnVlXCIpO2YuaXN3ZWJraXQmJmIub3B0LmRpc2FibGVvdXRsaW5lJiZiLndpbi5jc3Moe291dGxpbmU6XCJub25lXCJ9KX1pZihiLm9wdC5hdXRvaGlkZW1vZGU9PT1mYWxzZSliLmF1dG9oaWRlZG9tPWZhbHNlLGIucmFpbC5jc3Moe29wYWNpdHk6Yi5vcHQuY3Vyc29yb3BhY2l0eW1heH0pLGIucmFpbGgmJmIucmFpbGguY3NzKHtvcGFjaXR5OmIub3B0LmN1cnNvcm9wYWNpdHltYXh9KTtlbHNlIGlmKGIub3B0LmF1dG9oaWRlbW9kZT09PXRydWUpe2lmKGIuYXV0b2hpZGVkb209ZSgpLmFkZChiLnJhaWwpLFxuYi5yYWlsaCliLmF1dG9oaWRlZG9tPWIuYXV0b2hpZGVkb20uYWRkKGIucmFpbGgpfWVsc2UgaWYoYi5vcHQuYXV0b2hpZGVtb2RlPT1cInNjcm9sbFwiKXtpZihiLmF1dG9oaWRlZG9tPWUoKS5hZGQoYi5yYWlsKSxiLnJhaWxoKWIuYXV0b2hpZGVkb209Yi5hdXRvaGlkZWRvbS5hZGQoYi5yYWlsaCl9ZWxzZSBpZihiLm9wdC5hdXRvaGlkZW1vZGU9PVwiY3Vyc29yXCIpe2lmKGIuYXV0b2hpZGVkb209ZSgpLmFkZChiLmN1cnNvciksYi5yYWlsaCliLmF1dG9oaWRlZG9tPWIuYXV0b2hpZGVkb20uYWRkKGIucmFpbGguY3Vyc29yKX1lbHNlIGlmKGIub3B0LmF1dG9oaWRlbW9kZT09XCJoaWRkZW5cIiliLmF1dG9oaWRlZG9tPWZhbHNlLGIuaGlkZSgpLGIubG9ja2VkPWZhbHNlO2lmKGYuaXNpZTltb2JpbGUpYi5zY3JvbGxtb209bmV3IHooYiksYi5vbm1hbmdvdG91Y2g9ZnVuY3Rpb24oKXt2YXIgZD1iLmdldFNjcm9sbFRvcCgpLGM9Yi5nZXRTY3JvbGxMZWZ0KCk7aWYoZD09Yi5zY3JvbGxtb20ubGFzdHNjcm9sbHkmJlxuYz09Yi5zY3JvbGxtb20ubGFzdHNjcm9sbHgpcmV0dXJuIHRydWU7dmFyIGc9ZC1iLm1hbmdvdG91Y2guc3ksbD1jLWIubWFuZ290b3VjaC5zeDtpZihNYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhsLDIpK01hdGgucG93KGcsMikpKSE9MCl7dmFyIGY9ZzwwPy0xOjEsZT1sPDA/LTE6MSxoPStuZXcgRGF0ZTtiLm1hbmdvdG91Y2gubGF6eSYmY2xlYXJUaW1lb3V0KGIubWFuZ290b3VjaC5sYXp5KTtpZihoLWIubWFuZ290b3VjaC50bT44MHx8Yi5tYW5nb3RvdWNoLmRyeSE9Znx8Yi5tYW5nb3RvdWNoLmRyeCE9ZSliLnNjcm9sbG1vbS5zdG9wKCksYi5zY3JvbGxtb20ucmVzZXQoYyxkKSxiLm1hbmdvdG91Y2guc3k9ZCxiLm1hbmdvdG91Y2gubHk9ZCxiLm1hbmdvdG91Y2guc3g9YyxiLm1hbmdvdG91Y2gubHg9YyxiLm1hbmdvdG91Y2guZHJ5PWYsYi5tYW5nb3RvdWNoLmRyeD1lLGIubWFuZ290b3VjaC50bT1oO2Vsc2UgaWYoYi5zY3JvbGxtb20uc3RvcCgpLGIuc2Nyb2xsbW9tLnVwZGF0ZShiLm1hbmdvdG91Y2guc3gtXG5sLGIubWFuZ290b3VjaC5zeS1nKSxiLm1hbmdvdG91Y2gudG09aCxnPU1hdGgubWF4KE1hdGguYWJzKGIubWFuZ290b3VjaC5seS1kKSxNYXRoLmFicyhiLm1hbmdvdG91Y2gubHgtYykpLGIubWFuZ290b3VjaC5seT1kLGIubWFuZ290b3VjaC5seD1jLGc+MiliLm1hbmdvdG91Y2gubGF6eT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5tYW5nb3RvdWNoLmxhenk9ZmFsc2U7Yi5tYW5nb3RvdWNoLmRyeT0wO2IubWFuZ290b3VjaC5kcng9MDtiLm1hbmdvdG91Y2gudG09MDtiLnNjcm9sbG1vbS5kb01vbWVudHVtKDMwKX0sMTAwKX19LGc9Yi5nZXRTY3JvbGxUb3AoKSxrPWIuZ2V0U2Nyb2xsTGVmdCgpLGIubWFuZ290b3VjaD17c3k6ZyxseTpnLGRyeTowLHN4OmssbHg6ayxkcng6MCxsYXp5OmZhbHNlLHRtOjB9LGIuYmluZChiLmRvY3Njcm9sbCxcInNjcm9sbFwiLGIub25tYW5nb3RvdWNoKTtlbHNle2lmKGYuY2FudG91Y2h8fGIuaXN0b3VjaGNhcGFibGV8fGIub3B0LnRvdWNoYmVoYXZpb3J8fFxuZi5oYXNtc3RvdWNoKXtiLnNjcm9sbG1vbT1uZXcgeihiKTtiLm9udG91Y2hzdGFydD1mdW5jdGlvbihkKXtpZihkLnBvaW50ZXJUeXBlJiZkLnBvaW50ZXJUeXBlIT0yKXJldHVybiBmYWxzZTtpZighYi5sb2NrZWQpe2lmKGYuaGFzbXN0b3VjaClmb3IodmFyIGM9ZC50YXJnZXQ/ZC50YXJnZXQ6ZmFsc2U7Yzspe3ZhciBnPWUoYykuZ2V0TmljZVNjcm9sbCgpO2lmKGcubGVuZ3RoPjAmJmdbMF0ubWU9PWIubWUpYnJlYWs7aWYoZy5sZW5ndGg+MClyZXR1cm4gZmFsc2U7aWYoYy5ub2RlTmFtZT09XCJESVZcIiYmYy5pZD09Yi5pZClicmVhaztjPWMucGFyZW50Tm9kZT9jLnBhcmVudE5vZGU6ZmFsc2V9Yi5jYW5jZWxTY3JvbGwoKTtpZigoYz1iLmdldFRhcmdldChkKSkmJi9JTlBVVC9pLnRlc3QoYy5ub2RlTmFtZSkmJi9yYW5nZS9pLnRlc3QoYy50eXBlKSlyZXR1cm4gYi5zdG9wUHJvcGFnYXRpb24oZCk7aWYoIShcImNsaWVudFhcImluIGQpJiZcImNoYW5nZWRUb3VjaGVzXCJpbiBkKWQuY2xpZW50WD1cbmQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxkLmNsaWVudFk9ZC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO2lmKGIuZm9yY2VzY3JlZW4pZz1kLGQ9e29yaWdpbmFsOmQub3JpZ2luYWw/ZC5vcmlnaW5hbDpkfSxkLmNsaWVudFg9Zy5zY3JlZW5YLGQuY2xpZW50WT1nLnNjcmVlblk7Yi5yYWlsLmRyYWc9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZLHN4OmIuc2Nyb2xsLngsc3k6Yi5zY3JvbGwueSxzdDpiLmdldFNjcm9sbFRvcCgpLHNsOmIuZ2V0U2Nyb2xsTGVmdCgpLHB0OjJ9O2Iub3B0LnRvdWNoYmVoYXZpb3ImJmIuaXNpZnJhbWUmJmYuaXNpZSYmKGc9Yi53aW4ucG9zaXRpb24oKSxiLnJhaWwuZHJhZy54Kz1nLmxlZnQsYi5yYWlsLmRyYWcueSs9Zy50b3ApO2IuaGFzbW92aW5nPWZhbHNlO2IubGFzdG1vdXNldXA9ZmFsc2U7Yi5zY3JvbGxtb20ucmVzZXQoZC5jbGllbnRYLGQuY2xpZW50WSk7aWYoIWYuY2FudG91Y2gmJiF0aGlzLmlzdG91Y2hjYXBhYmxlJiYhZi5oYXNtc3RvdWNoKXtpZighY3x8XG4hL0lOUFVUfFNFTEVDVHxURVhUQVJFQS9pLnRlc3QoYy5ub2RlTmFtZSkpcmV0dXJuIWIuaXNwYWdlJiZmLmhhc21vdXNlY2FwdHVyZSYmYy5zZXRDYXB0dXJlKCksYi5jYW5jZWxFdmVudChkKTtpZigvU1VCTUlUfENBTkNFTHxCVVRUT04vaS50ZXN0KGUoYykuYXR0cihcInR5cGVcIikpKXBjPXt0ZzpjLGNsaWNrOmZhbHNlfSxiLnByZXZlbnRjbGljaz1wY319fTtiLm9udG91Y2hlbmQ9ZnVuY3Rpb24oZCl7aWYoZC5wb2ludGVyVHlwZSYmZC5wb2ludGVyVHlwZSE9MilyZXR1cm4gZmFsc2U7aWYoYi5yYWlsLmRyYWcmJmIucmFpbC5kcmFnLnB0PT0yJiYoYi5zY3JvbGxtb20uZG9Nb21lbnR1bSgpLGIucmFpbC5kcmFnPWZhbHNlLGIuaGFzbW92aW5nJiYoYi5oYXNtb3Zpbmc9ZmFsc2UsYi5sYXN0bW91c2V1cD10cnVlLGIuaGlkZUN1cnNvcigpLGYuaGFzbW91c2VjYXB0dXJlJiZkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSgpLCFmLmNhbnRvdWNoKSkpcmV0dXJuIGIuY2FuY2VsRXZlbnQoZCl9O1xudmFyIG49Yi5vcHQudG91Y2hiZWhhdmlvciYmYi5pc2lmcmFtZSYmIWYuaGFzbW91c2VjYXB0dXJlO2Iub250b3VjaG1vdmU9ZnVuY3Rpb24oZCxjKXtpZihkLnBvaW50ZXJUeXBlJiZkLnBvaW50ZXJUeXBlIT0yKXJldHVybiBmYWxzZTtpZihiLnJhaWwuZHJhZyYmYi5yYWlsLmRyYWcucHQ9PTIpe2lmKGYuY2FudG91Y2gmJnR5cGVvZiBkLm9yaWdpbmFsPT1cInVuZGVmaW5lZFwiKXJldHVybiB0cnVlO2IuaGFzbW92aW5nPXRydWU7aWYoYi5wcmV2ZW50Y2xpY2smJiFiLnByZXZlbnRjbGljay5jbGljayliLnByZXZlbnRjbGljay5jbGljaz1iLnByZXZlbnRjbGljay50Zy5vbmNsaWNrfHxmYWxzZSxiLnByZXZlbnRjbGljay50Zy5vbmNsaWNrPWIub25wcmV2ZW50Y2xpY2s7ZD1lLmV4dGVuZCh7b3JpZ2luYWw6ZH0sZCk7aWYoXCJjaGFuZ2VkVG91Y2hlc1wiaW4gZClkLmNsaWVudFg9ZC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLGQuY2xpZW50WT1kLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XG5pZihiLmZvcmNlc2NyZWVuKXt2YXIgZz1kLGQ9e29yaWdpbmFsOmQub3JpZ2luYWw/ZC5vcmlnaW5hbDpkfTtkLmNsaWVudFg9Zy5zY3JlZW5YO2QuY2xpZW50WT1nLnNjcmVlbll9Zz1vZnk9MDtpZihuJiYhYyl7dmFyIGw9Yi53aW4ucG9zaXRpb24oKSxnPS1sLmxlZnQ7b2Z5PS1sLnRvcH12YXIgaD1kLmNsaWVudFkrb2Z5LGk9Yi5yYWlsLmRyYWcuc3QtKGgtYi5yYWlsLmRyYWcueSk7aWYoYi5pc2h3c2Nyb2xsJiZiLm9wdC5ib3VuY2VzY3JvbGwpaTwwP2k9TWF0aC5yb3VuZChpLzIpOmk+Yi5wYWdlLm1heGgmJihpPWIucGFnZS5tYXhoK01hdGgucm91bmQoKGktYi5wYWdlLm1heGgpLzIpKTtlbHNlIGlmKGk8MCYmKGg9aT0wKSxpPmIucGFnZS5tYXhoKWk9Yi5wYWdlLm1heGgsaD0wO3ZhciBzPWQuY2xpZW50WCtnO2lmKGIucmFpbGgmJmIucmFpbGguc2Nyb2xsYWJsZSl7dmFyIGo9Yi5yYWlsLmRyYWcuc2wtKHMtYi5yYWlsLmRyYWcueCk7aWYoYi5pc2h3c2Nyb2xsJiZiLm9wdC5ib3VuY2VzY3JvbGwpajxcbjA/aj1NYXRoLnJvdW5kKGovMik6aj5iLnBhZ2UubWF4dyYmKGo9Yi5wYWdlLm1heHcrTWF0aC5yb3VuZCgoai1iLnBhZ2UubWF4dykvMikpO2Vsc2UgaWYoajwwJiYocz1qPTApLGo+Yi5wYWdlLm1heHcpaj1iLnBhZ2UubWF4dyxzPTB9Yi5zeW5jaGVkKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oKXtiLnJhaWwuZHJhZyYmYi5yYWlsLmRyYWcucHQ9PTImJihiLnByZXBhcmVUcmFuc2l0aW9uJiZiLnByZXBhcmVUcmFuc2l0aW9uKDApLGIucmFpbC5zY3JvbGxhYmxlJiZiLnNldFNjcm9sbFRvcChpKSxiLnNjcm9sbG1vbS51cGRhdGUocyxoKSxiLnJhaWxoJiZiLnJhaWxoLnNjcm9sbGFibGU/KGIuc2V0U2Nyb2xsTGVmdChqKSxiLnNob3dDdXJzb3IoaSxqKSk6Yi5zaG93Q3Vyc29yKGkpLGYuaXNpZTEwJiZkb2N1bWVudC5zZWxlY3Rpb24uY2xlYXIoKSl9KTtpZighZi5pc2Nocm9tZSYmIWIuaXN0b3VjaGNhcGFibGUpcmV0dXJuIGIuY2FuY2VsRXZlbnQoZCl9fX1mLmNhbnRvdWNofHxiLm9wdC50b3VjaGJlaGF2aW9yP1xuKGIub25wcmV2ZW50Y2xpY2s9ZnVuY3Rpb24oZCl7aWYoYi5wcmV2ZW50Y2xpY2spcmV0dXJuIGIucHJldmVudGNsaWNrLnRnLm9uY2xpY2s9Yi5wcmV2ZW50Y2xpY2suY2xpY2ssYi5wcmV2ZW50Y2xpY2s9ZmFsc2UsYi5jYW5jZWxFdmVudChkKX0sYi5vbm1vdXNlZG93bj1iLm9udG91Y2hzdGFydCxiLm9ubW91c2V1cD1iLm9udG91Y2hlbmQsYi5vbmNsaWNrPWYuaXNpb3M/ZmFsc2U6ZnVuY3Rpb24oZCl7cmV0dXJuIGIubGFzdG1vdXNldXA/KGIubGFzdG1vdXNldXA9ZmFsc2UsYi5jYW5jZWxFdmVudChkKSk6dHJ1ZX0sYi5vbm1vdXNlbW92ZT1iLm9udG91Y2htb3ZlLGYuY3Vyc29yZ3JhYnZhbHVlJiYoYi5jc3MoYi5pc3BhZ2U/Yi5kb2M6Yi53aW4se2N1cnNvcjpmLmN1cnNvcmdyYWJ2YWx1ZX0pLGIuY3NzKGIucmFpbCx7Y3Vyc29yOmYuY3Vyc29yZ3JhYnZhbHVlfSkpKTooYi5vbm1vdXNlZG93bj1mdW5jdGlvbihkLGMpe2lmKCEoYi5yYWlsLmRyYWcmJmIucmFpbC5kcmFnLnB0IT1cbjEpKXtpZihiLmxvY2tlZClyZXR1cm4gYi5jYW5jZWxFdmVudChkKTtiLmNhbmNlbFNjcm9sbCgpO2IucmFpbC5kcmFnPXt4OmQuY2xpZW50WCx5OmQuY2xpZW50WSxzeDpiLnNjcm9sbC54LHN5OmIuc2Nyb2xsLnkscHQ6MSxocjohIWN9O3ZhciBnPWIuZ2V0VGFyZ2V0KGQpOyFiLmlzcGFnZSYmZi5oYXNtb3VzZWNhcHR1cmUmJmcuc2V0Q2FwdHVyZSgpO2lmKGIuaXNpZnJhbWUmJiFmLmhhc21vdXNlY2FwdHVyZSliLnNhdmVkLmNzc3BvaW50ZXJldmVudHM9Yi5kb2MuY3NzKFwicG9pbnRlci1ldmVudHNcIiksYi5jc3MoYi5kb2Mse1wicG9pbnRlci1ldmVudHNcIjpcIm5vbmVcIn0pO3JldHVybiBiLmNhbmNlbEV2ZW50KGQpfX0sYi5vbm1vdXNldXA9ZnVuY3Rpb24oZCl7aWYoYi5yYWlsLmRyYWcmJihmLmhhc21vdXNlY2FwdHVyZSYmZG9jdW1lbnQucmVsZWFzZUNhcHR1cmUoKSxiLmlzaWZyYW1lJiYhZi5oYXNtb3VzZWNhcHR1cmUmJmIuZG9jLmNzcyhcInBvaW50ZXItZXZlbnRzXCIsYi5zYXZlZC5jc3Nwb2ludGVyZXZlbnRzKSxcbmIucmFpbC5kcmFnLnB0PT0xKSlyZXR1cm4gYi5yYWlsLmRyYWc9ZmFsc2UsYi5jYW5jZWxFdmVudChkKX0sYi5vbm1vdXNlbW92ZT1mdW5jdGlvbihkKXtpZihiLnJhaWwuZHJhZyl7aWYoYi5yYWlsLmRyYWcucHQ9PTEpe2lmKGYuaXNjaHJvbWUmJmQud2hpY2g9PTApcmV0dXJuIGIub25tb3VzZXVwKGQpO2IuY3Vyc29yZnJlZXplZD10cnVlO2lmKGIucmFpbC5kcmFnLmhyKXtiLnNjcm9sbC54PWIucmFpbC5kcmFnLnN4KyhkLmNsaWVudFgtYi5yYWlsLmRyYWcueCk7aWYoYi5zY3JvbGwueDwwKWIuc2Nyb2xsLng9MDt2YXIgYz1iLnNjcm9sbHZhbHVlbWF4dztpZihiLnNjcm9sbC54PmMpYi5zY3JvbGwueD1jfWVsc2V7Yi5zY3JvbGwueT1iLnJhaWwuZHJhZy5zeSsoZC5jbGllbnRZLWIucmFpbC5kcmFnLnkpO2lmKGIuc2Nyb2xsLnk8MCliLnNjcm9sbC55PTA7Yz1iLnNjcm9sbHZhbHVlbWF4O2lmKGIuc2Nyb2xsLnk+YyliLnNjcm9sbC55PWN9Yi5zeW5jaGVkKFwibW91c2Vtb3ZlXCIsXG5mdW5jdGlvbigpe2IucmFpbC5kcmFnJiZiLnJhaWwuZHJhZy5wdD09MSYmKGIuc2hvd0N1cnNvcigpLGIucmFpbC5kcmFnLmhyP2IuZG9TY3JvbGxMZWZ0KE1hdGgucm91bmQoYi5zY3JvbGwueCpiLnNjcm9sbHJhdGlvLngpKTpiLmRvU2Nyb2xsVG9wKE1hdGgucm91bmQoYi5zY3JvbGwueSpiLnNjcm9sbHJhdGlvLnkpKSl9KTtyZXR1cm4gYi5jYW5jZWxFdmVudChkKX19ZWxzZSBiLmNoZWNrYXJlYT10cnVlfSk7KGYuY2FudG91Y2h8fGIub3B0LnRvdWNoYmVoYXZpb3IpJiZiLmJpbmQoYi53aW4sXCJtb3VzZWRvd25cIixiLm9ubW91c2Vkb3duKTtmLmhhc21zdG91Y2gmJihiLmNzcyhiLnJhaWwse1wiLW1zLXRvdWNoLWFjdGlvblwiOlwibm9uZVwifSksYi5jc3MoYi5jdXJzb3Ise1wiLW1zLXRvdWNoLWFjdGlvblwiOlwibm9uZVwifSksYi5iaW5kKGIud2luLFwiTVNQb2ludGVyRG93blwiLGIub250b3VjaHN0YXJ0KSxiLmJpbmQoZG9jdW1lbnQsXCJNU1BvaW50ZXJVcFwiLGIub250b3VjaGVuZCksYi5iaW5kKGRvY3VtZW50LFxuXCJNU1BvaW50ZXJNb3ZlXCIsYi5vbnRvdWNobW92ZSksYi5iaW5kKGIuY3Vyc29yLFwiTVNHZXN0dXJlSG9sZFwiLGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKX0pLGIuYmluZChiLmN1cnNvcixcImNvbnRleHRtZW51XCIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpfSkpO3RoaXMuaXN0b3VjaGNhcGFibGUmJihiLmJpbmQoYi53aW4sXCJ0b3VjaHN0YXJ0XCIsYi5vbnRvdWNoc3RhcnQpLGIuYmluZChkb2N1bWVudCxcInRvdWNoZW5kXCIsYi5vbnRvdWNoZW5kKSxiLmJpbmQoZG9jdW1lbnQsXCJ0b3VjaGNhbmNlbFwiLGIub250b3VjaGVuZCksYi5iaW5kKGRvY3VtZW50LFwidG91Y2htb3ZlXCIsYi5vbnRvdWNobW92ZSkpO2IuYmluZChiLmN1cnNvcixcIm1vdXNlZG93blwiLGIub25tb3VzZWRvd24pO2IuYmluZChiLmN1cnNvcixcIm1vdXNldXBcIixiLm9ubW91c2V1cCk7Yi5yYWlsaCYmKGIuYmluZChiLmN1cnNvcmgsXCJtb3VzZWRvd25cIixmdW5jdGlvbihkKXtiLm9ubW91c2Vkb3duKGQsXG50cnVlKX0pLGIuYmluZChiLmN1cnNvcmgsXCJtb3VzZXVwXCIsZnVuY3Rpb24oZCl7aWYoIShiLnJhaWwuZHJhZyYmYi5yYWlsLmRyYWcucHQ9PTIpKXJldHVybiBiLnJhaWwuZHJhZz1mYWxzZSxiLmhhc21vdmluZz1mYWxzZSxiLmhpZGVDdXJzb3IoKSxmLmhhc21vdXNlY2FwdHVyZSYmZG9jdW1lbnQucmVsZWFzZUNhcHR1cmUoKSxiLmNhbmNlbEV2ZW50KGQpfSkpO2IuYmluZChkb2N1bWVudCxcIm1vdXNldXBcIixiLm9ubW91c2V1cCk7Zi5oYXNtb3VzZWNhcHR1cmUmJmIuYmluZChiLndpbixcIm1vdXNldXBcIixiLm9ubW91c2V1cCk7Yi5iaW5kKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsYi5vbm1vdXNlbW92ZSk7Yi5vbmNsaWNrJiZiLmJpbmQoZG9jdW1lbnQsXCJjbGlja1wiLGIub25jbGljayk7IWYuY2FudG91Y2gmJiFiLm9wdC50b3VjaGJlaGF2aW9yJiYoYi5qcWJpbmQoYi5yYWlsLFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7Yi5jYW5zaG93b25tb3VzZWV2ZW50JiZiLnNob3dDdXJzb3IoKTtcbmIucmFpbC5hY3RpdmU9dHJ1ZX0pLGIuanFiaW5kKGIucmFpbCxcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe2IucmFpbC5hY3RpdmU9ZmFsc2U7Yi5yYWlsLmRyYWd8fGIuaGlkZUN1cnNvcigpfSksYi5vcHQuc2Vuc2l0aXZlcmFpbCYmKGIuYmluZChiLnJhaWwsXCJjbGlja1wiLGZ1bmN0aW9uKGQpe2IuZG9SYWlsQ2xpY2soZCxmYWxzZSxmYWxzZSl9KSxiLmJpbmQoYi5yYWlsLFwiZGJsY2xpY2tcIixmdW5jdGlvbihkKXtiLmRvUmFpbENsaWNrKGQsdHJ1ZSxmYWxzZSl9KSxiLmJpbmQoYi5jdXJzb3IsXCJjbGlja1wiLGZ1bmN0aW9uKGQpe2IuY2FuY2VsRXZlbnQoZCl9KSxiLmJpbmQoYi5jdXJzb3IsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGQpe2IuY2FuY2VsRXZlbnQoZCl9KSksYi5yYWlsaCYmKGIuanFiaW5kKGIucmFpbGgsXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oKXtiLmNhbnNob3dvbm1vdXNlZXZlbnQmJmIuc2hvd0N1cnNvcigpO2IucmFpbC5hY3RpdmU9dHJ1ZX0pLGIuanFiaW5kKGIucmFpbGgsXG5cIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe2IucmFpbC5hY3RpdmU9ZmFsc2U7Yi5yYWlsLmRyYWd8fGIuaGlkZUN1cnNvcigpfSksYi5vcHQuc2Vuc2l0aXZlcmFpbCYmKGIuYmluZChiLnJhaWxoLFwiY2xpY2tcIixmdW5jdGlvbihkKXtiLmRvUmFpbENsaWNrKGQsZmFsc2UsdHJ1ZSl9KSxiLmJpbmQoYi5yYWlsaCxcImRibGNsaWNrXCIsZnVuY3Rpb24oZCl7Yi5kb1JhaWxDbGljayhkLHRydWUsdHJ1ZSl9KSxiLmJpbmQoYi5jdXJzb3JoLFwiY2xpY2tcIixmdW5jdGlvbihkKXtiLmNhbmNlbEV2ZW50KGQpfSksYi5iaW5kKGIuY3Vyc29yaCxcImRibGNsaWNrXCIsZnVuY3Rpb24oZCl7Yi5jYW5jZWxFdmVudChkKX0pKSksYi56b29tJiYoYi5qcWJpbmQoYi56b29tLFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7Yi5jYW5zaG93b25tb3VzZWV2ZW50JiZiLnNob3dDdXJzb3IoKTtiLnJhaWwuYWN0aXZlPXRydWV9KSxiLmpxYmluZChiLnpvb20sXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXtiLnJhaWwuYWN0aXZlPVxuZmFsc2U7Yi5yYWlsLmRyYWd8fGIuaGlkZUN1cnNvcigpfSkpKTtiLm9wdC5lbmFibGVtb3VzZXdoZWVsJiYoYi5pc2lmcmFtZXx8Yi5iaW5kKGYuaXNpZSYmYi5pc3BhZ2U/ZG9jdW1lbnQ6Yi5kb2NzY3JvbGwsXCJtb3VzZXdoZWVsXCIsYi5vbm1vdXNld2hlZWwpLGIuYmluZChiLnJhaWwsXCJtb3VzZXdoZWVsXCIsYi5vbm1vdXNld2hlZWwpLGIucmFpbGgmJmIuYmluZChiLnJhaWxoLFwibW91c2V3aGVlbFwiLGIub25tb3VzZXdoZWVsaHIpKTshYi5pc3BhZ2UmJiFmLmNhbnRvdWNoJiYhL0hUTUx8Qk9EWS8udGVzdChiLndpblswXS5ub2RlTmFtZSkmJihiLndpbi5hdHRyKFwidGFiaW5kZXhcIil8fGIud2luLmF0dHIoe3RhYmluZGV4OkIrK30pLGIuanFiaW5kKGIud2luLFwiZm9jdXNcIixmdW5jdGlvbihkKXtyPWIuZ2V0VGFyZ2V0KGQpLmlkfHx0cnVlO2IuaGFzZm9jdXM9dHJ1ZTtiLmNhbnNob3dvbm1vdXNlZXZlbnQmJmIubm90aWNlQ3Vyc29yKCl9KSxiLmpxYmluZChiLndpbixcImJsdXJcIixcbmZ1bmN0aW9uKCl7cj1mYWxzZTtiLmhhc2ZvY3VzPWZhbHNlfSksYi5qcWJpbmQoYi53aW4sXCJtb3VzZWVudGVyXCIsZnVuY3Rpb24oZCl7dz1iLmdldFRhcmdldChkKS5pZHx8dHJ1ZTtiLmhhc21vdXNlZm9jdXM9dHJ1ZTtiLmNhbnNob3dvbm1vdXNlZXZlbnQmJmIubm90aWNlQ3Vyc29yKCl9KSxiLmpxYmluZChiLndpbixcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe3c9ZmFsc2U7Yi5oYXNtb3VzZWZvY3VzPWZhbHNlfSkpfWIub25rZXlwcmVzcz1mdW5jdGlvbihkKXtpZihiLmxvY2tlZCYmYi5wYWdlLm1heGg9PTApcmV0dXJuIHRydWU7dmFyIGQ9ZD9kOndpbmRvdy5lLGM9Yi5nZXRUYXJnZXQoZCk7aWYoYyYmL0lOUFVUfFRFWFRBUkVBfFNFTEVDVHxPUFRJT04vLnRlc3QoYy5ub2RlTmFtZSkmJighYy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpJiYhYy50eXBlfHwhL3N1Ym1pdHxidXR0b258Y2FuY2VsL2kudHApKXJldHVybiB0cnVlO2lmKGIuaGFzZm9jdXN8fGIuaGFzbW91c2Vmb2N1cyYmXG4hcnx8Yi5pc3BhZ2UmJiFyJiYhdyl7Yz1kLmtleUNvZGU7aWYoYi5sb2NrZWQmJmMhPTI3KXJldHVybiBiLmNhbmNlbEV2ZW50KGQpO3ZhciBnPWQuY3RybEtleXx8ZmFsc2UsbD1kLnNoaWZ0S2V5fHxmYWxzZSxmPWZhbHNlO3N3aXRjaChjKXtjYXNlIDM4OmNhc2UgNjMyMzM6Yi5kb1Njcm9sbEJ5KDcyKTtmPXRydWU7YnJlYWs7Y2FzZSA0MDpjYXNlIDYzMjM1OmIuZG9TY3JvbGxCeSgtNzIpO2Y9dHJ1ZTticmVhaztjYXNlIDM3OmNhc2UgNjMyMzI6Yi5yYWlsaCYmKGc/Yi5kb1Njcm9sbExlZnQoMCk6Yi5kb1Njcm9sbExlZnRCeSg3MiksZj10cnVlKTticmVhaztjYXNlIDM5OmNhc2UgNjMyMzQ6Yi5yYWlsaCYmKGc/Yi5kb1Njcm9sbExlZnQoYi5wYWdlLm1heHcpOmIuZG9TY3JvbGxMZWZ0QnkoLTcyKSxmPXRydWUpO2JyZWFrO2Nhc2UgMzM6Y2FzZSA2MzI3NjpiLmRvU2Nyb2xsQnkoYi52aWV3LmgpO2Y9dHJ1ZTticmVhaztjYXNlIDM0OmNhc2UgNjMyNzc6Yi5kb1Njcm9sbEJ5KC1iLnZpZXcuaCk7XG5mPXRydWU7YnJlYWs7Y2FzZSAzNjpjYXNlIDYzMjczOmIucmFpbGgmJmc/Yi5kb1Njcm9sbFBvcygwLDApOmIuZG9TY3JvbGxUbygwKTtmPXRydWU7YnJlYWs7Y2FzZSAzNTpjYXNlIDYzMjc1OmIucmFpbGgmJmc/Yi5kb1Njcm9sbFBvcyhiLnBhZ2UubWF4dyxiLnBhZ2UubWF4aCk6Yi5kb1Njcm9sbFRvKGIucGFnZS5tYXhoKTtmPXRydWU7YnJlYWs7Y2FzZSAzMjpiLm9wdC5zcGFjZWJhcmVuYWJsZWQmJihsP2IuZG9TY3JvbGxCeShiLnZpZXcuaCk6Yi5kb1Njcm9sbEJ5KC1iLnZpZXcuaCksZj10cnVlKTticmVhaztjYXNlIDI3OmIuem9vbWFjdGl2ZSYmKGIuZG9ab29tKCksZj10cnVlKX1pZihmKXJldHVybiBiLmNhbmNlbEV2ZW50KGQpfX07Yi5vcHQuZW5hYmxla2V5Ym9hcmQmJmIuYmluZChkb2N1bWVudCxmLmlzb3BlcmEmJiFmLmlzb3BlcmExMj9cImtleXByZXNzXCI6XCJrZXlkb3duXCIsYi5vbmtleXByZXNzKTtiLmJpbmQod2luZG93LFwicmVzaXplXCIsYi5yZXNpemUpO2IuYmluZCh3aW5kb3csXG5cIm9yaWVudGF0aW9uY2hhbmdlXCIsYi5yZXNpemUpO2IuYmluZCh3aW5kb3csXCJsb2FkXCIsYi5yZXNpemUpO2lmKGYuaXNjaHJvbWUmJiFiLmlzcGFnZSYmIWIuaGFzd3JhcHBlcil7dmFyIG09Yi53aW4uYXR0cihcInN0eWxlXCIpLGc9cGFyc2VGbG9hdChiLndpbi5jc3MoXCJ3aWR0aFwiKSkrMTtiLndpbi5jc3MoXCJ3aWR0aFwiLGcpO2Iuc3luY2hlZChcImNocm9tZWZpeFwiLGZ1bmN0aW9uKCl7Yi53aW4uYXR0cihcInN0eWxlXCIsbSl9KX1iLm9uQXR0cmlidXRlQ2hhbmdlPWZ1bmN0aW9uKCl7Yi5sYXp5UmVzaXplKCl9O2lmKCFiLmlzcGFnZSYmIWIuaGFzd3JhcHBlcilcIldlYktpdE11dGF0aW9uT2JzZXJ2ZXJcImluIHdpbmRvdz8oYi5vYnNlcnZlcj1uZXcgV2ViS2l0TXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihkKXtkLmZvckVhY2goYi5vbkF0dHJpYnV0ZUNoYW5nZSl9KSxiLm9ic2VydmVyLm9ic2VydmUoYi53aW5bMF0se2F0dHJpYnV0ZXM6dHJ1ZSxzdWJ0cmVlOmZhbHNlfSkpOihiLmJpbmQoYi53aW4sXG5mLmlzaWUmJiFmLmlzaWU5P1wicHJvcGVydHljaGFuZ2VcIjpcIkRPTUF0dHJNb2RpZmllZFwiLGIub25BdHRyaWJ1dGVDaGFuZ2UpLGYuaXNpZTkmJmIud2luWzBdLmF0dGFjaEV2ZW50KFwib25wcm9wZXJ0eWNoYW5nZVwiLGIub25BdHRyaWJ1dGVDaGFuZ2UpKTshYi5pc3BhZ2UmJmIub3B0LmJveHpvb20mJmIuYmluZCh3aW5kb3csXCJyZXNpemVcIixiLnJlc2l6ZVpvb20pO2IuaXN0ZXh0YXJlYSYmYi5iaW5kKGIud2luLFwibW91c2V1cFwiLGIucmVzaXplKTtiLnJlc2l6ZSgpfWlmKHRoaXMuZG9jWzBdLm5vZGVOYW1lPT1cIklGUkFNRVwiKXt2YXIgQT1mdW5jdGlvbigpe2IuaWZyYW1leGQ9ZmFsc2U7dHJ5e3ZhciBkPVwiY29udGVudERvY3VtZW50XCJpbiB0aGlzP3RoaXMuY29udGVudERvY3VtZW50OnRoaXMuY29udGVudFdpbmRvdy5kb2N1bWVudH1jYXRjaChjKXtiLmlmcmFtZXhkPXRydWUsZD1mYWxzZX1pZihiLmlmcmFtZXhkKXJldHVyblwiY29uc29sZVwiaW4gd2luZG93JiZjb25zb2xlLmxvZyhcIk5pY2VTY3JvbGwgZXJyb3I6IHBvbGljeSByZXN0cmljZWQgaWZyYW1lXCIpLFxudHJ1ZTtiLmZvcmNlc2NyZWVuPXRydWU7aWYoYi5pc2lmcmFtZSliLmlmcmFtZT17ZG9jOmUoZCksaHRtbDpiLmRvYy5jb250ZW50cygpLmZpbmQoXCJodG1sXCIpWzBdLGJvZHk6Yi5kb2MuY29udGVudHMoKS5maW5kKFwiYm9keVwiKVswXX0sYi5nZXRDb250ZW50U2l6ZT1mdW5jdGlvbigpe3JldHVybnt3Ok1hdGgubWF4KGIuaWZyYW1lLmh0bWwuc2Nyb2xsV2lkdGgsYi5pZnJhbWUuYm9keS5zY3JvbGxXaWR0aCksaDpNYXRoLm1heChiLmlmcmFtZS5odG1sLnNjcm9sbEhlaWdodCxiLmlmcmFtZS5ib2R5LnNjcm9sbEhlaWdodCl9fSxiLmRvY3Njcm9sbD1lKGIuaWZyYW1lLmJvZHkpO2lmKCFmLmlzaW9zJiZiLm9wdC5pZnJhbWVhdXRvcmVzaXplJiYhYi5pc2lmcmFtZSl7Yi53aW4uc2Nyb2xsVG9wKDApO2IuZG9jLmhlaWdodChcIlwiKTt2YXIgZz1NYXRoLm1heChkLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXS5zY3JvbGxIZWlnaHQsZC5ib2R5LnNjcm9sbEhlaWdodCk7Yi5kb2MuaGVpZ2h0KGcpfWIucmVzaXplKCk7XG5mLmlzaWU3JiZiLmNzcyhlKGIuaWZyYW1lLmh0bWwpLHtcIm92ZXJmbG93LXlcIjpcImhpZGRlblwifSk7Yi5jc3MoZShiLmlmcmFtZS5ib2R5KSx7XCJvdmVyZmxvdy15XCI6XCJoaWRkZW5cIn0pO1wiY29udGVudFdpbmRvd1wiaW4gdGhpcz9iLmJpbmQodGhpcy5jb250ZW50V2luZG93LFwic2Nyb2xsXCIsYi5vbnNjcm9sbCk6Yi5iaW5kKGQsXCJzY3JvbGxcIixiLm9uc2Nyb2xsKTtiLm9wdC5lbmFibGVtb3VzZXdoZWVsJiZiLmJpbmQoZCxcIm1vdXNld2hlZWxcIixiLm9ubW91c2V3aGVlbCk7Yi5vcHQuZW5hYmxla2V5Ym9hcmQmJmIuYmluZChkLGYuaXNvcGVyYT9cImtleXByZXNzXCI6XCJrZXlkb3duXCIsYi5vbmtleXByZXNzKTtpZihmLmNhbnRvdWNofHxiLm9wdC50b3VjaGJlaGF2aW9yKWIuYmluZChkLFwibW91c2Vkb3duXCIsYi5vbm1vdXNlZG93biksYi5iaW5kKGQsXCJtb3VzZW1vdmVcIixmdW5jdGlvbihkKXtiLm9ubW91c2Vtb3ZlKGQsdHJ1ZSl9KSxmLmN1cnNvcmdyYWJ2YWx1ZSYmYi5jc3MoZShkLmJvZHkpLFxue2N1cnNvcjpmLmN1cnNvcmdyYWJ2YWx1ZX0pO2IuYmluZChkLFwibW91c2V1cFwiLGIub25tb3VzZXVwKTtiLnpvb20mJihiLm9wdC5kYmxjbGlja3pvb20mJmIuYmluZChkLFwiZGJsY2xpY2tcIixiLmRvWm9vbSksYi5vbmdlc3R1cmV6b29tJiZiLmJpbmQoZCxcImdlc3R1cmVlbmRcIixiLm9uZ2VzdHVyZXpvb20pKX07dGhpcy5kb2NbMF0ucmVhZHlTdGF0ZSYmdGhpcy5kb2NbMF0ucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7QS5jYWxsKGIuZG9jWzBdLGZhbHNlKX0sNTAwKTtiLmJpbmQodGhpcy5kb2MsXCJsb2FkXCIsQSl9fTt0aGlzLnNob3dDdXJzb3I9ZnVuY3Rpb24oZCxjKXtpZihiLmN1cnNvcnRpbWVvdXQpY2xlYXJUaW1lb3V0KGIuY3Vyc29ydGltZW91dCksYi5jdXJzb3J0aW1lb3V0PTA7aWYoYi5yYWlsKXtpZihiLmF1dG9oaWRlZG9tKWIuYXV0b2hpZGVkb20uc3RvcCgpLmNzcyh7b3BhY2l0eTpiLm9wdC5jdXJzb3JvcGFjaXR5bWF4fSksYi5jdXJzb3JhY3RpdmU9XG50cnVlO2lmKHR5cGVvZiBkIT1cInVuZGVmaW5lZFwiJiZkIT09ZmFsc2UpYi5zY3JvbGwueT1NYXRoLnJvdW5kKGQqMS9iLnNjcm9sbHJhdGlvLnkpO2lmKHR5cGVvZiBjIT1cInVuZGVmaW5lZFwiKWIuc2Nyb2xsLng9TWF0aC5yb3VuZChjKjEvYi5zY3JvbGxyYXRpby54KTtiLmN1cnNvci5jc3Moe2hlaWdodDpiLmN1cnNvcmhlaWdodCx0b3A6Yi5zY3JvbGwueX0pO2lmKGIuY3Vyc29yaCkhYi5yYWlsLmFsaWduJiZiLnJhaWwudmlzaWJpbGl0eT9iLmN1cnNvcmguY3NzKHt3aWR0aDpiLmN1cnNvcndpZHRoLGxlZnQ6Yi5zY3JvbGwueCtiLnJhaWwud2lkdGh9KTpiLmN1cnNvcmguY3NzKHt3aWR0aDpiLmN1cnNvcndpZHRoLGxlZnQ6Yi5zY3JvbGwueH0pLGIuY3Vyc29yYWN0aXZlPXRydWU7Yi56b29tJiZiLnpvb20uc3RvcCgpLmNzcyh7b3BhY2l0eTpiLm9wdC5jdXJzb3JvcGFjaXR5bWF4fSl9fTt0aGlzLmhpZGVDdXJzb3I9ZnVuY3Rpb24oZCl7aWYoIWIuY3Vyc29ydGltZW91dCYmXG5iLnJhaWwmJmIuYXV0b2hpZGVkb20pYi5jdXJzb3J0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighYi5yYWlsLmFjdGl2ZXx8IWIuc2hvd29ubW91c2VldmVudCliLmF1dG9oaWRlZG9tLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OmIub3B0LmN1cnNvcm9wYWNpdHltaW59KSxiLnpvb20mJmIuem9vbS5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTpiLm9wdC5jdXJzb3JvcGFjaXR5bWlufSksYi5jdXJzb3JhY3RpdmU9ZmFsc2U7Yi5jdXJzb3J0aW1lb3V0PTB9LGR8fDQwMCl9O3RoaXMubm90aWNlQ3Vyc29yPWZ1bmN0aW9uKGQsYyxnKXtiLnNob3dDdXJzb3IoYyxnKTtiLnJhaWwuYWN0aXZlfHxiLmhpZGVDdXJzb3IoZCl9O3RoaXMuZ2V0Q29udGVudFNpemU9Yi5pc3BhZ2U/ZnVuY3Rpb24oKXtyZXR1cm57dzpNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCksaDpNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfX06Yi5oYXN3cmFwcGVyP2Z1bmN0aW9uKCl7cmV0dXJue3c6Yi5kb2Mub3V0ZXJXaWR0aCgpK3BhcnNlSW50KGIud2luLmNzcyhcInBhZGRpbmdMZWZ0XCIpKStwYXJzZUludChiLndpbi5jc3MoXCJwYWRkaW5nUmlnaHRcIikpLGg6Yi5kb2Mub3V0ZXJIZWlnaHQoKStwYXJzZUludChiLndpbi5jc3MoXCJwYWRkaW5nVG9wXCIpKStwYXJzZUludChiLndpbi5jc3MoXCJwYWRkaW5nQm90dG9tXCIpKX19OmZ1bmN0aW9uKCl7cmV0dXJue3c6Yi5kb2NzY3JvbGxbMF0uc2Nyb2xsV2lkdGgsaDpiLmRvY3Njcm9sbFswXS5zY3JvbGxIZWlnaHR9fTt0aGlzLm9uUmVzaXplPWZ1bmN0aW9uKGQsYyl7aWYoIWIud2luKXJldHVybiBmYWxzZTtpZighYi5oYXN3cmFwcGVyJiYhYi5pc3BhZ2UpaWYoYi53aW4uY3NzKFwiZGlzcGxheVwiKT09XCJub25lXCIpcmV0dXJuIGIudmlzaWJpbGl0eSYmYi5oaWRlUmFpbCgpLmhpZGVSYWlsSHIoKSxmYWxzZTtcbmVsc2UhYi5oaWRkZW4mJiFiLnZpc2liaWxpdHkmJmIuc2hvd1JhaWwoKS5zaG93UmFpbEhyKCk7dmFyIGc9Yi5wYWdlLm1heGgsZj1iLnBhZ2UubWF4dyxlPWIudmlldy53O2Iudmlldz17dzpiLmlzcGFnZT9iLndpbi53aWR0aCgpOnBhcnNlSW50KGIud2luWzBdLmNsaWVudFdpZHRoKSxoOmIuaXNwYWdlP2Iud2luLmhlaWdodCgpOnBhcnNlSW50KGIud2luWzBdLmNsaWVudEhlaWdodCl9O2IucGFnZT1jP2M6Yi5nZXRDb250ZW50U2l6ZSgpO2IucGFnZS5tYXhoPU1hdGgubWF4KDAsYi5wYWdlLmgtYi52aWV3LmgpO2IucGFnZS5tYXh3PU1hdGgubWF4KDAsYi5wYWdlLnctYi52aWV3LncpO2lmKGIucGFnZS5tYXhoPT1nJiZiLnBhZ2UubWF4dz09ZiYmYi52aWV3Lnc9PWUpaWYoYi5pc3BhZ2UpcmV0dXJuIGI7ZWxzZXtnPWIud2luLm9mZnNldCgpO2lmKGIubGFzdHBvc2l0aW9uJiYoZj1iLmxhc3Rwb3NpdGlvbixmLnRvcD09Zy50b3AmJmYubGVmdD09Zy5sZWZ0KSlyZXR1cm4gYjtcbmIubGFzdHBvc2l0aW9uPWd9Yi5wYWdlLm1heGg9PTA/KGIuaGlkZVJhaWwoKSxiLnNjcm9sbHZhbHVlbWF4PTAsYi5zY3JvbGwueT0wLGIuc2Nyb2xscmF0aW8ueT0wLGIuY3Vyc29yaGVpZ2h0PTAsYi5zZXRTY3JvbGxUb3AoMCksYi5yYWlsLnNjcm9sbGFibGU9ZmFsc2UpOmIucmFpbC5zY3JvbGxhYmxlPXRydWU7Yi5wYWdlLm1heHc9PTA/KGIuaGlkZVJhaWxIcigpLGIuc2Nyb2xsdmFsdWVtYXh3PTAsYi5zY3JvbGwueD0wLGIuc2Nyb2xscmF0aW8ueD0wLGIuY3Vyc29yd2lkdGg9MCxiLnNldFNjcm9sbExlZnQoMCksYi5yYWlsaC5zY3JvbGxhYmxlPWZhbHNlKTpiLnJhaWxoLnNjcm9sbGFibGU9dHJ1ZTtiLmxvY2tlZD1iLnBhZ2UubWF4aD09MCYmYi5wYWdlLm1heHc9PTA7aWYoYi5sb2NrZWQpcmV0dXJuIGIuaXNwYWdlfHxiLnVwZGF0ZVNjcm9sbEJhcihiLnZpZXcpLGZhbHNlOyFiLmhpZGRlbiYmIWIudmlzaWJpbGl0eT9iLnNob3dSYWlsKCkuc2hvd1JhaWxIcigpOiFiLmhpZGRlbiYmXG4hYi5yYWlsaC52aXNpYmlsaXR5JiZiLnNob3dSYWlsSHIoKTtiLmlzdGV4dGFyZWEmJmIud2luLmNzcyhcInJlc2l6ZVwiKSYmYi53aW4uY3NzKFwicmVzaXplXCIpIT1cIm5vbmVcIiYmKGIudmlldy5oLT0yMCk7Yi5pc3BhZ2V8fGIudXBkYXRlU2Nyb2xsQmFyKGIudmlldyk7Yi5jdXJzb3JoZWlnaHQ9TWF0aC5taW4oYi52aWV3LmgsTWF0aC5yb3VuZChiLnZpZXcuaCooYi52aWV3LmgvYi5wYWdlLmgpKSk7Yi5jdXJzb3JoZWlnaHQ9Yi5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ/Yi5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ6TWF0aC5tYXgoYi5vcHQuY3Vyc29ybWluaGVpZ2h0LGIuY3Vyc29yaGVpZ2h0KTtiLmN1cnNvcndpZHRoPU1hdGgubWluKGIudmlldy53LE1hdGgucm91bmQoYi52aWV3LncqKGIudmlldy53L2IucGFnZS53KSkpO2IuY3Vyc29yd2lkdGg9Yi5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ/Yi5vcHQuY3Vyc29yZml4ZWRoZWlnaHQ6TWF0aC5tYXgoYi5vcHQuY3Vyc29ybWluaGVpZ2h0LFxuYi5jdXJzb3J3aWR0aCk7Yi5zY3JvbGx2YWx1ZW1heD1iLnZpZXcuaC1iLmN1cnNvcmhlaWdodC1iLmN1cnNvci5oYm9yZGVyO2lmKGIucmFpbGgpYi5yYWlsaC53aWR0aD1iLnBhZ2UubWF4aD4wP2Iudmlldy53LWIucmFpbC53aWR0aDpiLnZpZXcudyxiLnNjcm9sbHZhbHVlbWF4dz1iLnJhaWxoLndpZHRoLWIuY3Vyc29yd2lkdGgtYi5jdXJzb3JoLndib3JkZXI7Yi5zY3JvbGxyYXRpbz17eDpiLnBhZ2UubWF4dy9iLnNjcm9sbHZhbHVlbWF4dyx5OmIucGFnZS5tYXhoL2Iuc2Nyb2xsdmFsdWVtYXh9O2IuZ2V0U2Nyb2xsVG9wKCk+Yi5wYWdlLm1heGg/Yi5kb1Njcm9sbFRvcChiLnBhZ2UubWF4aCk6KGIuc2Nyb2xsLnk9TWF0aC5yb3VuZChiLmdldFNjcm9sbFRvcCgpKigxL2Iuc2Nyb2xscmF0aW8ueSkpLGIuc2Nyb2xsLng9TWF0aC5yb3VuZChiLmdldFNjcm9sbExlZnQoKSooMS9iLnNjcm9sbHJhdGlvLngpKSxiLmN1cnNvcmFjdGl2ZSYmYi5ub3RpY2VDdXJzb3IoKSk7Yi5zY3JvbGwueSYmXG5iLmdldFNjcm9sbFRvcCgpPT0wJiZiLmRvU2Nyb2xsVG8oTWF0aC5mbG9vcihiLnNjcm9sbC55KmIuc2Nyb2xscmF0aW8ueSkpO3JldHVybiBifTt0aGlzLnJlc2l6ZT1mdW5jdGlvbigpe2IuZGVsYXllZChcInJlc2l6ZVwiLGIub25SZXNpemUsMzApO3JldHVybiBifTt0aGlzLmxhenlSZXNpemU9ZnVuY3Rpb24oKXtiLmRlbGF5ZWQoXCJyZXNpemVcIixiLnJlc2l6ZSwyNTApfTt0aGlzLl9iaW5kPWZ1bmN0aW9uKGQsYyxnLGYpe2IuZXZlbnRzLnB1c2goe2U6ZCxuOmMsZjpnLGI6ZixxOmZhbHNlfSk7ZC5hZGRFdmVudExpc3RlbmVyP2QuYWRkRXZlbnRMaXN0ZW5lcihjLGcsZnx8ZmFsc2UpOmQuYXR0YWNoRXZlbnQ/ZC5hdHRhY2hFdmVudChcIm9uXCIrYyxnKTpkW1wib25cIitjXT1nfTt0aGlzLmpxYmluZD1mdW5jdGlvbihkLGMsZyl7Yi5ldmVudHMucHVzaCh7ZTpkLG46YyxmOmcscTp0cnVlfSk7ZShkKS5iaW5kKGMsZyl9O3RoaXMuYmluZD1mdW5jdGlvbihkLGMsZyxlKXt2YXIgaD1cImpxdWVyeVwiaW5cbmQ/ZFswXTpkO2guYWRkRXZlbnRMaXN0ZW5lcj8oZi5jYW50b3VjaCYmL21vdXNldXB8bW91c2Vkb3dufG1vdXNlbW92ZS8udGVzdChjKSYmYi5fYmluZChoLGM9PVwibW91c2Vkb3duXCI/XCJ0b3VjaHN0YXJ0XCI6Yz09XCJtb3VzZXVwXCI/XCJ0b3VjaGVuZFwiOlwidG91Y2htb3ZlXCIsZnVuY3Rpb24oYil7aWYoYi50b3VjaGVzKXtpZihiLnRvdWNoZXMubGVuZ3RoPDIpe3ZhciBkPWIudG91Y2hlcy5sZW5ndGg/Yi50b3VjaGVzWzBdOmI7ZC5vcmlnaW5hbD1iO2cuY2FsbCh0aGlzLGQpfX1lbHNlIGlmKGIuY2hhbmdlZFRvdWNoZXMpZD1iLmNoYW5nZWRUb3VjaGVzWzBdLGQub3JpZ2luYWw9YixnLmNhbGwodGhpcyxkKX0sZXx8ZmFsc2UpLGIuX2JpbmQoaCxjLGcsZXx8ZmFsc2UpLGM9PVwibW91c2V3aGVlbFwiJiZiLl9iaW5kKGgsXCJET01Nb3VzZVNjcm9sbFwiLGcsZXx8ZmFsc2UpLGYuY2FudG91Y2gmJmM9PVwibW91c2V1cFwiJiZiLl9iaW5kKGgsXCJ0b3VjaGNhbmNlbFwiLGcsZXx8ZmFsc2UpKTpiLl9iaW5kKGgsXG5jLGZ1bmN0aW9uKGQpe2lmKChkPWR8fHdpbmRvdy5ldmVudHx8ZmFsc2UpJiZkLnNyY0VsZW1lbnQpZC50YXJnZXQ9ZC5zcmNFbGVtZW50O3JldHVybiBnLmNhbGwoaCxkKT09PWZhbHNlfHxlPT09ZmFsc2U/Yi5jYW5jZWxFdmVudChkKTp0cnVlfSl9O3RoaXMuX3VuYmluZD1mdW5jdGlvbihiLGMsZyxmKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZyxmKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQoXCJvblwiK2MsZyk6YltcIm9uXCIrY109ZmFsc2V9O3RoaXMudW5iaW5kQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBkPTA7ZDxiLmV2ZW50cy5sZW5ndGg7ZCsrKXt2YXIgYz1iLmV2ZW50c1tkXTtjLnE/Yy5lLnVuYmluZChjLm4sYy5mKTpiLl91bmJpbmQoYy5lLGMubixjLmYsYy5iKX19O3RoaXMuY2FuY2VsRXZlbnQ9ZnVuY3Rpb24oYil7Yj1iLm9yaWdpbmFsP2Iub3JpZ2luYWw6Yj9iOndpbmRvdy5ldmVudHx8ZmFsc2U7aWYoIWIpcmV0dXJuIGZhbHNlO1xuYi5wcmV2ZW50RGVmYXVsdCYmYi5wcmV2ZW50RGVmYXVsdCgpO2Iuc3RvcFByb3BhZ2F0aW9uJiZiLnN0b3BQcm9wYWdhdGlvbigpO2IucHJldmVudE1hbmlwdWxhdGlvbiYmYi5wcmV2ZW50TWFuaXB1bGF0aW9uKCk7Yi5jYW5jZWxCdWJibGU9dHJ1ZTtiLmNhbmNlbD10cnVlO3JldHVybiBiLnJldHVyblZhbHVlPWZhbHNlfTt0aGlzLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbihiKXtiPWIub3JpZ2luYWw/Yi5vcmlnaW5hbDpiP2I6d2luZG93LmV2ZW50fHxmYWxzZTtpZighYilyZXR1cm4gZmFsc2U7aWYoYi5zdG9wUHJvcGFnYXRpb24pcmV0dXJuIGIuc3RvcFByb3BhZ2F0aW9uKCk7aWYoYi5jYW5jZWxCdWJibGUpYi5jYW5jZWxCdWJibGU9dHJ1ZTtyZXR1cm4gZmFsc2V9O3RoaXMuc2hvd1JhaWw9ZnVuY3Rpb24oKXtpZihiLnBhZ2UubWF4aCE9MCYmKGIuaXNwYWdlfHxiLndpbi5jc3MoXCJkaXNwbGF5XCIpIT1cIm5vbmVcIikpYi52aXNpYmlsaXR5PXRydWUsYi5yYWlsLnZpc2liaWxpdHk9XG50cnVlLGIucmFpbC5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKTtyZXR1cm4gYn07dGhpcy5zaG93UmFpbEhyPWZ1bmN0aW9uKCl7aWYoIWIucmFpbGgpcmV0dXJuIGI7aWYoYi5wYWdlLm1heHchPTAmJihiLmlzcGFnZXx8Yi53aW4uY3NzKFwiZGlzcGxheVwiKSE9XCJub25lXCIpKWIucmFpbGgudmlzaWJpbGl0eT10cnVlLGIucmFpbGguY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIik7cmV0dXJuIGJ9O3RoaXMuaGlkZVJhaWw9ZnVuY3Rpb24oKXtiLnZpc2liaWxpdHk9ZmFsc2U7Yi5yYWlsLnZpc2liaWxpdHk9ZmFsc2U7Yi5yYWlsLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik7cmV0dXJuIGJ9O3RoaXMuaGlkZVJhaWxIcj1mdW5jdGlvbigpe2lmKCFiLnJhaWxoKXJldHVybiBiO2IucmFpbGgudmlzaWJpbGl0eT1mYWxzZTtiLnJhaWxoLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik7cmV0dXJuIGJ9O3RoaXMuc2hvdz1mdW5jdGlvbigpe2IuaGlkZGVuPWZhbHNlO2IubG9ja2VkPWZhbHNlO3JldHVybiBiLnNob3dSYWlsKCkuc2hvd1JhaWxIcigpfTtcbnRoaXMuaGlkZT1mdW5jdGlvbigpe2IuaGlkZGVuPXRydWU7Yi5sb2NrZWQ9dHJ1ZTtyZXR1cm4gYi5oaWRlUmFpbCgpLmhpZGVSYWlsSHIoKX07dGhpcy50b2dnbGU9ZnVuY3Rpb24oKXtyZXR1cm4gYi5oaWRkZW4/Yi5zaG93KCk6Yi5oaWRlKCl9O3RoaXMucmVtb3ZlPWZ1bmN0aW9uKCl7Yi5zdG9wKCk7Yi5jdXJzb3J0aW1lb3V0JiZjbGVhclRpbWVvdXQoYi5jdXJzb3J0aW1lb3V0KTtiLmRvWm9vbU91dCgpO2IudW5iaW5kQWxsKCk7Yi5vYnNlcnZlciE9PWZhbHNlJiZiLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtiLmV2ZW50cz1bXTtpZihiLmN1cnNvciliLmN1cnNvci5yZW1vdmUoKSxiLmN1cnNvcj1udWxsO2lmKGIuY3Vyc29yaCliLmN1cnNvcmgucmVtb3ZlKCksYi5jdXJzb3JoPW51bGw7aWYoYi5yYWlsKWIucmFpbC5yZW1vdmUoKSxiLnJhaWw9bnVsbDtpZihiLnJhaWxoKWIucmFpbGgucmVtb3ZlKCksYi5yYWlsaD1udWxsO2lmKGIuem9vbSliLnpvb20ucmVtb3ZlKCksYi56b29tPVxubnVsbDtmb3IodmFyIGQ9MDtkPGIuc2F2ZWQuY3NzLmxlbmd0aDtkKyspe3ZhciBjPWIuc2F2ZWQuY3NzW2RdO2NbMF0uY3NzKGNbMV0sdHlwZW9mIGNbMl09PVwidW5kZWZpbmVkXCI/XCJcIjpjWzJdKX1iLnNhdmVkPWZhbHNlO2IubWUuZGF0YShcIl9fbmljZXNjcm9sbFwiLFwiXCIpO2IubWU9bnVsbDtiLmRvYz1udWxsO2IuZG9jc2Nyb2xsPW51bGw7Yi53aW49bnVsbDtyZXR1cm4gYn07dGhpcy5zY3JvbGxzdGFydD1mdW5jdGlvbihkKXt0aGlzLm9uc2Nyb2xsc3RhcnQ9ZDtyZXR1cm4gYn07dGhpcy5zY3JvbGxlbmQ9ZnVuY3Rpb24oZCl7dGhpcy5vbnNjcm9sbGVuZD1kO3JldHVybiBifTt0aGlzLnNjcm9sbGNhbmNlbD1mdW5jdGlvbihkKXt0aGlzLm9uc2Nyb2xsY2FuY2VsPWQ7cmV0dXJuIGJ9O3RoaXMuem9vbWluPWZ1bmN0aW9uKGQpe3RoaXMub256b29taW49ZDtyZXR1cm4gYn07dGhpcy56b29tb3V0PWZ1bmN0aW9uKGQpe3RoaXMub256b29tb3V0PWQ7cmV0dXJuIGJ9O3RoaXMuaXNTY3JvbGxhYmxlPVxuZnVuY3Rpb24oYil7Zm9yKGI9Yi50YXJnZXQ/Yi50YXJnZXQ6YjtiJiZiLm5vZGVUeXBlPT0xJiYhL0JPRFl8SFRNTC8udGVzdChiLm5vZGVOYW1lKTspe3ZhciBjPWUoYik7aWYoL3Njcm9sbHxhdXRvLy50ZXN0KGMuY3NzKFwib3ZlcmZsb3dZXCIpfHxjLmNzcyhcIm92ZXJmbG93WFwiKXx8Yy5jc3MoXCJvdmVyZmxvd1wiKXx8XCJcIikpcmV0dXJuIGIuY2xpZW50SGVpZ2h0IT1iLnNjcm9sbEhlaWdodDtiPWIucGFyZW50Tm9kZT9iLnBhcmVudE5vZGU6ZmFsc2V9cmV0dXJuIGZhbHNlfTt0aGlzLmdldFZpZXdwb3J0PWZ1bmN0aW9uKGIpe2ZvcihiPWImJmIucGFyZW50Tm9kZT9iLnBhcmVudE5vZGU6ZmFsc2U7YiYmYi5ub2RlVHlwZT09MSYmIS9CT0RZfEhUTUwvLnRlc3QoYi5ub2RlTmFtZSk7KXt2YXIgYz1lKGIpO2lmKC9zY3JvbGx8YXV0by8udGVzdChjLmNzcyhcIm92ZXJmbG93WVwiKXx8Yy5jc3MoXCJvdmVyZmxvd1hcIil8fGMuY3NzKFwib3ZlcmZsb3dcIil8fFwiXCIpJiZiLmNsaWVudEhlaWdodCE9XG5iLnNjcm9sbEhlaWdodClyZXR1cm4gYztpZihjLmdldE5pY2VTY3JvbGwoKS5sZW5ndGg+MClyZXR1cm4gYztiPWIucGFyZW50Tm9kZT9iLnBhcmVudE5vZGU6ZmFsc2V9cmV0dXJuIGZhbHNlfTt0aGlzLm9ubW91c2V3aGVlbD1mdW5jdGlvbihkKXtpZihiLmxvY2tlZClyZXR1cm4gdHJ1ZTtpZighYi5yYWlsLnNjcm9sbGFibGUpcmV0dXJuIGIucmFpbGgmJmIucmFpbGguc2Nyb2xsYWJsZT9iLm9ubW91c2V3aGVlbGhyKGQpOnRydWU7aWYoYi5vcHQucHJlc2VydmVuYXRpdmVzY3JvbGxpbmcmJmIuY2hlY2thcmVhKWIuY2hlY2thcmVhPWZhbHNlLGIubmF0aXZlc2Nyb2xsaW5nYXJlYT1iLmlzU2Nyb2xsYWJsZShkKTtpZihiLm5hdGl2ZXNjcm9sbGluZ2FyZWEpcmV0dXJuIHRydWU7aWYoYi5sb2NrZWQpcmV0dXJuIGIuY2FuY2VsRXZlbnQoZCk7aWYoYi5yYWlsLmRyYWcpcmV0dXJuIGIuY2FuY2VsRXZlbnQoZCk7aShkLGZhbHNlKTtyZXR1cm4gYi5jYW5jZWxFdmVudChkKX07dGhpcy5vbm1vdXNld2hlZWxocj1cbmZ1bmN0aW9uKGQpe2lmKGIubG9ja2VkfHwhYi5yYWlsaC5zY3JvbGxhYmxlKXJldHVybiB0cnVlO2lmKGIub3B0LnByZXNlcnZlbmF0aXZlc2Nyb2xsaW5nJiZiLmNoZWNrYXJlYSliLmNoZWNrYXJlYT1mYWxzZSxiLm5hdGl2ZXNjcm9sbGluZ2FyZWE9Yi5pc1Njcm9sbGFibGUoZCk7aWYoYi5uYXRpdmVzY3JvbGxpbmdhcmVhKXJldHVybiB0cnVlO2lmKGIubG9ja2VkKXJldHVybiBiLmNhbmNlbEV2ZW50KGQpO2lmKGIucmFpbC5kcmFnKXJldHVybiBiLmNhbmNlbEV2ZW50KGQpO2koZCx0cnVlKTtyZXR1cm4gYi5jYW5jZWxFdmVudChkKX07dGhpcy5zdG9wPWZ1bmN0aW9uKCl7Yi5jYW5jZWxTY3JvbGwoKTtiLnNjcm9sbG1vbiYmYi5zY3JvbGxtb24uc3RvcCgpO2IuY3Vyc29yZnJlZXplZD1mYWxzZTtiLnNjcm9sbC55PU1hdGgucm91bmQoYi5nZXRTY3JvbGxUb3AoKSooMS9iLnNjcm9sbHJhdGlvLnkpKTtiLm5vdGljZUN1cnNvcigpO3JldHVybiBifTt0aGlzLmdldFRyYW5zaXRpb25TcGVlZD1cbmZ1bmN0aW9uKGQpe3ZhciBjPU1hdGgucm91bmQoYi5vcHQuc2Nyb2xsc3BlZWQqMTApLGQ9TWF0aC5taW4oYyxNYXRoLnJvdW5kKGQvMjAqYi5vcHQuc2Nyb2xsc3BlZWQpKTtyZXR1cm4gZD4yMD9kOjB9O2Iub3B0LnNtb290aHNjcm9sbD9iLmlzaHdzY3JvbGwmJmYuaGFzdHJhbnNpdGlvbiYmYi5vcHQudXNldHJhbnNpdGlvbj8odGhpcy5wcmVwYXJlVHJhbnNpdGlvbj1mdW5jdGlvbihkLGMpe3ZhciBnPWM/ZD4yMD9kOjA6Yi5nZXRUcmFuc2l0aW9uU3BlZWQoZCksZT1nP2YucHJlZml4c3R5bGUrXCJ0cmFuc2Zvcm0gXCIrZytcIm1zIGVhc2Utb3V0XCI6XCJcIjtpZighYi5sYXN0dHJhbnNpdGlvbnN0eWxlfHxiLmxhc3R0cmFuc2l0aW9uc3R5bGUhPWUpYi5sYXN0dHJhbnNpdGlvbnN0eWxlPWUsYi5kb2MuY3NzKGYudHJhbnNpdGlvbnN0eWxlLGUpO3JldHVybiBnfSx0aGlzLmRvU2Nyb2xsTGVmdD1mdW5jdGlvbihkLGMpe3ZhciBnPWIuc2Nyb2xscnVubmluZz9iLm5ld3Njcm9sbHk6Yi5nZXRTY3JvbGxUb3AoKTtcbmIuZG9TY3JvbGxQb3MoZCxnLGMpfSx0aGlzLmRvU2Nyb2xsVG9wPWZ1bmN0aW9uKGMsZil7dmFyIGc9Yi5zY3JvbGxydW5uaW5nP2IubmV3c2Nyb2xseDpiLmdldFNjcm9sbExlZnQoKTtiLmRvU2Nyb2xsUG9zKGcsYyxmKX0sdGhpcy5kb1Njcm9sbFBvcz1mdW5jdGlvbihjLGUsZyl7dmFyIGg9Yi5nZXRTY3JvbGxUb3AoKSxpPWIuZ2V0U2Nyb2xsTGVmdCgpOygoYi5uZXdzY3JvbGx5LWgpKihlLWgpPDB8fChiLm5ld3Njcm9sbHgtaSkqKGMtaSk8MCkmJmIuY2FuY2VsU2Nyb2xsKCk7aWYoYi5vcHQuYm91bmNlc2Nyb2xsPT1mYWxzZSl7aWYoZTwwKWU9MDtlbHNlIGlmKGU+Yi5wYWdlLm1heGgpZT1iLnBhZ2UubWF4aDtpZihjPDApYz0wO2Vsc2UgaWYoYz5iLnBhZ2UubWF4dyljPWIucGFnZS5tYXh3fWlmKGM9PWIubmV3c2Nyb2xseCYmZT09Yi5uZXdzY3JvbGx5KXJldHVybiBmYWxzZTtiLm5ld3Njcm9sbHk9ZTtiLm5ld3Njcm9sbHg9YztiLm5ld3Njcm9sbHNwZWVkPWd8fGZhbHNlO1xuaWYoYi50aW1lcilyZXR1cm4gZmFsc2U7Yi50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGc9Yi5nZXRTY3JvbGxUb3AoKSxoPWIuZ2V0U2Nyb2xsTGVmdCgpLGksajtpPWMtaDtqPWUtZztpPU1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KGksMikrTWF0aC5wb3coaiwyKSkpO2k9Yi5wcmVwYXJlVHJhbnNpdGlvbihiLm5ld3Njcm9sbHNwZWVkP2IubmV3c2Nyb2xsc3BlZWQ6aSk7Yi50aW1lcnNjcm9sbCYmYi50aW1lcnNjcm9sbC50bSYmY2xlYXJJbnRlcnZhbChiLnRpbWVyc2Nyb2xsLnRtKTtpZihpPjApeyFiLnNjcm9sbHJ1bm5pbmcmJmIub25zY3JvbGxzdGFydCYmYi5vbnNjcm9sbHN0YXJ0LmNhbGwoYix7dHlwZTpcInNjcm9sbHN0YXJ0XCIsY3VycmVudDp7eDpoLHk6Z30scmVxdWVzdDp7eDpjLHk6ZX0sZW5kOnt4OmIubmV3c2Nyb2xseCx5OmIubmV3c2Nyb2xseX0sc3BlZWQ6aX0pO2lmKGYudHJhbnNpdGlvbmVuZCl7aWYoIWIuc2Nyb2xsZW5kdHJhcHBlZCliLnNjcm9sbGVuZHRyYXBwZWQ9XG50cnVlLGIuYmluZChiLmRvYyxmLnRyYW5zaXRpb25lbmQsYi5vblNjcm9sbEVuZCxmYWxzZSl9ZWxzZSBiLnNjcm9sbGVuZHRyYXBwZWQmJmNsZWFyVGltZW91dChiLnNjcm9sbGVuZHRyYXBwZWQpLGIuc2Nyb2xsZW5kdHJhcHBlZD1zZXRUaW1lb3V0KGIub25TY3JvbGxFbmQsaSk7Yi50aW1lcnNjcm9sbD17Yno6bmV3IEJlemllckNsYXNzKGcsYi5uZXdzY3JvbGx5LGksMCwwLDAuNTgsMSksYmg6bmV3IEJlemllckNsYXNzKGgsYi5uZXdzY3JvbGx4LGksMCwwLDAuNTgsMSl9O2lmKCFiLmN1cnNvcmZyZWV6ZWQpYi50aW1lcnNjcm9sbC50bT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2Iuc2hvd0N1cnNvcihiLmdldFNjcm9sbFRvcCgpLGIuZ2V0U2Nyb2xsTGVmdCgpKX0sNjApfWIuc3luY2hlZChcImRvU2Nyb2xsLXNldFwiLGZ1bmN0aW9uKCl7Yi50aW1lcj0wO2lmKGIuc2Nyb2xsZW5kdHJhcHBlZCliLnNjcm9sbHJ1bm5pbmc9dHJ1ZTtiLnNldFNjcm9sbFRvcChiLm5ld3Njcm9sbHkpO1xuYi5zZXRTY3JvbGxMZWZ0KGIubmV3c2Nyb2xseCk7aWYoIWIuc2Nyb2xsZW5kdHJhcHBlZCliLm9uU2Nyb2xsRW5kKCl9KX0sNTApfSx0aGlzLmNhbmNlbFNjcm9sbD1mdW5jdGlvbigpe2lmKCFiLnNjcm9sbGVuZHRyYXBwZWQpcmV0dXJuIHRydWU7dmFyIGM9Yi5nZXRTY3JvbGxUb3AoKSxlPWIuZ2V0U2Nyb2xsTGVmdCgpO2Iuc2Nyb2xscnVubmluZz1mYWxzZTtmLnRyYW5zaXRpb25lbmR8fGNsZWFyVGltZW91dChmLnRyYW5zaXRpb25lbmQpO2Iuc2Nyb2xsZW5kdHJhcHBlZD1mYWxzZTtiLl91bmJpbmQoYi5kb2MsZi50cmFuc2l0aW9uZW5kLGIub25TY3JvbGxFbmQpO2IucHJlcGFyZVRyYW5zaXRpb24oMCk7Yi5zZXRTY3JvbGxUb3AoYyk7Yi5yYWlsaCYmYi5zZXRTY3JvbGxMZWZ0KGUpO2IudGltZXJzY3JvbGwmJmIudGltZXJzY3JvbGwudG0mJmNsZWFySW50ZXJ2YWwoYi50aW1lcnNjcm9sbC50bSk7Yi50aW1lcnNjcm9sbD1mYWxzZTtiLmN1cnNvcmZyZWV6ZWQ9ZmFsc2U7XG5iLnNob3dDdXJzb3IoYyxlKTtyZXR1cm4gYn0sdGhpcy5vblNjcm9sbEVuZD1mdW5jdGlvbigpe2Iuc2Nyb2xsZW5kdHJhcHBlZCYmYi5fdW5iaW5kKGIuZG9jLGYudHJhbnNpdGlvbmVuZCxiLm9uU2Nyb2xsRW5kKTtiLnNjcm9sbGVuZHRyYXBwZWQ9ZmFsc2U7Yi5wcmVwYXJlVHJhbnNpdGlvbigwKTtiLnRpbWVyc2Nyb2xsJiZiLnRpbWVyc2Nyb2xsLnRtJiZjbGVhckludGVydmFsKGIudGltZXJzY3JvbGwudG0pO2IudGltZXJzY3JvbGw9ZmFsc2U7dmFyIGM9Yi5nZXRTY3JvbGxUb3AoKSxlPWIuZ2V0U2Nyb2xsTGVmdCgpO2Iuc2V0U2Nyb2xsVG9wKGMpO2IucmFpbGgmJmIuc2V0U2Nyb2xsTGVmdChlKTtiLm5vdGljZUN1cnNvcihmYWxzZSxjLGUpO2IuY3Vyc29yZnJlZXplZD1mYWxzZTtpZihjPDApYz0wO2Vsc2UgaWYoYz5iLnBhZ2UubWF4aCljPWIucGFnZS5tYXhoO2lmKGU8MCllPTA7ZWxzZSBpZihlPmIucGFnZS5tYXh3KWU9Yi5wYWdlLm1heHc7aWYoYyE9Yi5uZXdzY3JvbGx5fHxcbmUhPWIubmV3c2Nyb2xseClyZXR1cm4gYi5kb1Njcm9sbFBvcyhlLGMsYi5vcHQuc25hcGJhY2tzcGVlZCk7Yi5vbnNjcm9sbGVuZCYmYi5zY3JvbGxydW5uaW5nJiZiLm9uc2Nyb2xsZW5kLmNhbGwoYix7dHlwZTpcInNjcm9sbGVuZFwiLGN1cnJlbnQ6e3g6ZSx5OmN9LGVuZDp7eDpiLm5ld3Njcm9sbHgseTpiLm5ld3Njcm9sbHl9fSk7Yi5zY3JvbGxydW5uaW5nPWZhbHNlfSk6KHRoaXMuZG9TY3JvbGxMZWZ0PWZ1bmN0aW9uKGMpe3ZhciBmPWIuc2Nyb2xscnVubmluZz9iLm5ld3Njcm9sbHk6Yi5nZXRTY3JvbGxUb3AoKTtiLmRvU2Nyb2xsUG9zKGMsZil9LHRoaXMuZG9TY3JvbGxUb3A9ZnVuY3Rpb24oYyl7dmFyIGY9Yi5zY3JvbGxydW5uaW5nP2IubmV3c2Nyb2xseDpiLmdldFNjcm9sbExlZnQoKTtiLmRvU2Nyb2xsUG9zKGYsYyl9LHRoaXMuZG9TY3JvbGxQb3M9ZnVuY3Rpb24oYyxmKXtmdW5jdGlvbiBnKCl7aWYoYi5jYW5jZWxBbmltYXRpb25GcmFtZSlyZXR1cm4gdHJ1ZTtiLnNjcm9sbHJ1bm5pbmc9XG50cnVlO2lmKG49MS1uKXJldHVybiBiLnRpbWVyPXAoZyl8fDE7dmFyIGM9MCxkPXN5PWIuZ2V0U2Nyb2xsVG9wKCk7aWYoYi5kc3QuYXkpe3ZhciBkPWIuYnpzY3JvbGw/Yi5kc3QucHkrYi5ienNjcm9sbC5nZXROb3coKSpiLmRzdC5heTpiLm5ld3Njcm9sbHksZj1kLXN5O2lmKGY8MCYmZDxiLm5ld3Njcm9sbHl8fGY+MCYmZD5iLm5ld3Njcm9sbHkpZD1iLm5ld3Njcm9sbHk7Yi5zZXRTY3JvbGxUb3AoZCk7ZD09Yi5uZXdzY3JvbGx5JiYoYz0xKX1lbHNlIGM9MTt2YXIgZT1zeD1iLmdldFNjcm9sbExlZnQoKTtpZihiLmRzdC5heCl7ZT1iLmJ6c2Nyb2xsP2IuZHN0LnB4K2IuYnpzY3JvbGwuZ2V0Tm93KCkqYi5kc3QuYXg6Yi5uZXdzY3JvbGx4O2Y9ZS1zeDtpZihmPDAmJmU8Yi5uZXdzY3JvbGx4fHxmPjAmJmU+Yi5uZXdzY3JvbGx4KWU9Yi5uZXdzY3JvbGx4O2Iuc2V0U2Nyb2xsTGVmdChlKTtlPT1iLm5ld3Njcm9sbHgmJihjKz0xKX1lbHNlIGMrPTE7aWYoYz09Mil7Yi50aW1lcj1cbjA7Yi5jdXJzb3JmcmVlemVkPWZhbHNlO2IuYnpzY3JvbGw9ZmFsc2U7Yi5zY3JvbGxydW5uaW5nPWZhbHNlO2lmKGQ8MClkPTA7ZWxzZSBpZihkPmIucGFnZS5tYXhoKWQ9Yi5wYWdlLm1heGg7aWYoZTwwKWU9MDtlbHNlIGlmKGU+Yi5wYWdlLm1heHcpZT1iLnBhZ2UubWF4dztlIT1iLm5ld3Njcm9sbHh8fGQhPWIubmV3c2Nyb2xseT9iLmRvU2Nyb2xsUG9zKGUsZCk6Yi5vbnNjcm9sbGVuZCYmYi5vbnNjcm9sbGVuZC5jYWxsKGIse3R5cGU6XCJzY3JvbGxlbmRcIixjdXJyZW50Ont4OnN4LHk6c3l9LGVuZDp7eDpiLm5ld3Njcm9sbHgseTpiLm5ld3Njcm9sbHl9fSl9ZWxzZSBiLnRpbWVyPXAoZyl8fDF9Zj10eXBlb2YgZj09XCJ1bmRlZmluZWRcInx8Zj09PWZhbHNlP2IuZ2V0U2Nyb2xsVG9wKHRydWUpOmY7aWYoYi50aW1lciYmYi5uZXdzY3JvbGx5PT1mJiZiLm5ld3Njcm9sbHg9PWMpcmV0dXJuIHRydWU7Yi50aW1lciYmcShiLnRpbWVyKTtiLnRpbWVyPTA7dmFyIGU9Yi5nZXRTY3JvbGxUb3AoKSxcbmg9Yi5nZXRTY3JvbGxMZWZ0KCk7KChiLm5ld3Njcm9sbHktZSkqKGYtZSk8MHx8KGIubmV3c2Nyb2xseC1oKSooYy1oKTwwKSYmYi5jYW5jZWxTY3JvbGwoKTtiLm5ld3Njcm9sbHk9ZjtiLm5ld3Njcm9sbHg9YztpZighYi5ib3VuY2VzY3JvbGx8fCFiLnJhaWwudmlzaWJpbGl0eSlpZihiLm5ld3Njcm9sbHk8MCliLm5ld3Njcm9sbHk9MDtlbHNlIGlmKGIubmV3c2Nyb2xseT5iLnBhZ2UubWF4aCliLm5ld3Njcm9sbHk9Yi5wYWdlLm1heGg7aWYoIWIuYm91bmNlc2Nyb2xsfHwhYi5yYWlsaC52aXNpYmlsaXR5KWlmKGIubmV3c2Nyb2xseDwwKWIubmV3c2Nyb2xseD0wO2Vsc2UgaWYoYi5uZXdzY3JvbGx4PmIucGFnZS5tYXh3KWIubmV3c2Nyb2xseD1iLnBhZ2UubWF4dztiLmRzdD17fTtiLmRzdC54PWMtaDtiLmRzdC55PWYtZTtiLmRzdC5weD1oO2IuZHN0LnB5PWU7dmFyIGk9TWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coYi5kc3QueCwyKStNYXRoLnBvdyhiLmRzdC55LFxuMikpKTtiLmRzdC5heD1iLmRzdC54L2k7Yi5kc3QuYXk9Yi5kc3QueS9pO3ZhciBqPTAsaz1pO2lmKGIuZHN0Lng9PTApaj1lLGs9ZixiLmRzdC5heT0xLGIuZHN0LnB5PTA7ZWxzZSBpZihiLmRzdC55PT0wKWo9aCxrPWMsYi5kc3QuYXg9MSxiLmRzdC5weD0wO2k9Yi5nZXRUcmFuc2l0aW9uU3BlZWQoaSk7Yi5ienNjcm9sbD1pPjA/Yi5ienNjcm9sbD9iLmJ6c2Nyb2xsLnVwZGF0ZShrLGkpOm5ldyBCZXppZXJDbGFzcyhqLGssaSwwLDEsMCwxKTpmYWxzZTtpZighYi50aW1lcil7KGU9PWIucGFnZS5tYXhoJiZmPj1iLnBhZ2UubWF4aHx8aD09Yi5wYWdlLm1heHcmJmM+PWIucGFnZS5tYXh3KSYmYi5jaGVja0NvbnRlbnRTaXplKCk7dmFyIG49MTtiLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZhbHNlO2IudGltZXI9MTtiLm9uc2Nyb2xsc3RhcnQmJiFiLnNjcm9sbHJ1bm5pbmcmJmIub25zY3JvbGxzdGFydC5jYWxsKGIse3R5cGU6XCJzY3JvbGxzdGFydFwiLGN1cnJlbnQ6e3g6aCx5OmV9LFxucmVxdWVzdDp7eDpjLHk6Zn0sZW5kOnt4OmIubmV3c2Nyb2xseCx5OmIubmV3c2Nyb2xseX0sc3BlZWQ6aX0pO2coKTsoZT09Yi5wYWdlLm1heGgmJmY+PWV8fGg9PWIucGFnZS5tYXh3JiZjPj1oKSYmYi5jaGVja0NvbnRlbnRTaXplKCk7Yi5ub3RpY2VDdXJzb3IoKX19LHRoaXMuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKCl7Yi50aW1lciYmcShiLnRpbWVyKTtiLnRpbWVyPTA7Yi5ienNjcm9sbD1mYWxzZTtiLnNjcm9sbHJ1bm5pbmc9ZmFsc2U7cmV0dXJuIGJ9KToodGhpcy5kb1Njcm9sbExlZnQ9ZnVuY3Rpb24oYyxmKXt2YXIgZz1iLmdldFNjcm9sbFRvcCgpO2IuZG9TY3JvbGxQb3MoYyxnLGYpfSx0aGlzLmRvU2Nyb2xsVG9wPWZ1bmN0aW9uKGMsZil7dmFyIGc9Yi5nZXRTY3JvbGxMZWZ0KCk7Yi5kb1Njcm9sbFBvcyhnLGMsZil9LHRoaXMuZG9TY3JvbGxQb3M9ZnVuY3Rpb24oYyxmKXt2YXIgZz1jPmIucGFnZS5tYXh3P2IucGFnZS5tYXh3OmM7ZzwwJiYoZz0wKTt2YXIgZT1mPlxuYi5wYWdlLm1heGg/Yi5wYWdlLm1heGg6ZjtlPDAmJihlPTApO2Iuc3luY2hlZChcInNjcm9sbFwiLGZ1bmN0aW9uKCl7Yi5zZXRTY3JvbGxUb3AoZSk7Yi5zZXRTY3JvbGxMZWZ0KGcpfSl9LHRoaXMuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKCl7fSk7dGhpcy5kb1Njcm9sbEJ5PWZ1bmN0aW9uKGMsZil7dmFyIGc9MCxnPWY/TWF0aC5mbG9vcigoYi5zY3JvbGwueS1jKSpiLnNjcm9sbHJhdGlvLnkpOihiLnRpbWVyP2IubmV3c2Nyb2xseTpiLmdldFNjcm9sbFRvcCh0cnVlKSktYztpZihiLmJvdW5jZXNjcm9sbCl7dmFyIGU9TWF0aC5yb3VuZChiLnZpZXcuaC8yKTtnPC1lP2c9LWU6Zz5iLnBhZ2UubWF4aCtlJiYoZz1iLnBhZ2UubWF4aCtlKX1iLmN1cnNvcmZyZWV6ZWQ9ZmFsc2U7cHk9Yi5nZXRTY3JvbGxUb3AodHJ1ZSk7aWYoZzwwJiZweTw9MClyZXR1cm4gYi5ub3RpY2VDdXJzb3IoKTtlbHNlIGlmKGc+Yi5wYWdlLm1heGgmJnB5Pj1iLnBhZ2UubWF4aClyZXR1cm4gYi5jaGVja0NvbnRlbnRTaXplKCksXG5iLm5vdGljZUN1cnNvcigpO2IuZG9TY3JvbGxUb3AoZyl9O3RoaXMuZG9TY3JvbGxMZWZ0Qnk9ZnVuY3Rpb24oYyxmKXt2YXIgZT0wLGU9Zj9NYXRoLmZsb29yKChiLnNjcm9sbC54LWMpKmIuc2Nyb2xscmF0aW8ueCk6KGIudGltZXI/Yi5uZXdzY3JvbGx4OmIuZ2V0U2Nyb2xsTGVmdCh0cnVlKSktYztpZihiLmJvdW5jZXNjcm9sbCl7dmFyIGg9TWF0aC5yb3VuZChiLnZpZXcudy8yKTtlPC1oP2U9LWg6ZT5iLnBhZ2UubWF4dytoJiYoZT1iLnBhZ2UubWF4dytoKX1iLmN1cnNvcmZyZWV6ZWQ9ZmFsc2U7cHg9Yi5nZXRTY3JvbGxMZWZ0KHRydWUpO2lmKGU8MCYmcHg8PTApcmV0dXJuIGIubm90aWNlQ3Vyc29yKCk7ZWxzZSBpZihlPmIucGFnZS5tYXh3JiZweD49Yi5wYWdlLm1heHcpcmV0dXJuIGIubm90aWNlQ3Vyc29yKCk7Yi5kb1Njcm9sbExlZnQoZSl9O3RoaXMuZG9TY3JvbGxUbz1mdW5jdGlvbihjLGUpe2UmJk1hdGgucm91bmQoYypiLnNjcm9sbHJhdGlvLnkpO2IuY3Vyc29yZnJlZXplZD1cbmZhbHNlO2IuZG9TY3JvbGxUb3AoYyl9O3RoaXMuY2hlY2tDb250ZW50U2l6ZT1mdW5jdGlvbigpe3ZhciBjPWIuZ2V0Q29udGVudFNpemUoKTsoYy5oIT1iLnBhZ2UuaHx8Yy53IT1iLnBhZ2UudykmJmIucmVzaXplKGZhbHNlLGMpfTtiLm9uc2Nyb2xsPWZ1bmN0aW9uKCl7Yi5yYWlsLmRyYWd8fGIuY3Vyc29yZnJlZXplZHx8Yi5zeW5jaGVkKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtiLnNjcm9sbC55PU1hdGgucm91bmQoYi5nZXRTY3JvbGxUb3AoKSooMS9iLnNjcm9sbHJhdGlvLnkpKTtpZihiLnJhaWxoKWIuc2Nyb2xsLng9TWF0aC5yb3VuZChiLmdldFNjcm9sbExlZnQoKSooMS9iLnNjcm9sbHJhdGlvLngpKTtiLm5vdGljZUN1cnNvcigpfSl9O2IuYmluZChiLmRvY3Njcm9sbCxcInNjcm9sbFwiLGIub25zY3JvbGwpO3RoaXMuZG9ab29tSW49ZnVuY3Rpb24oYyl7aWYoIWIuem9vbWFjdGl2ZSl7Yi56b29tYWN0aXZlPXRydWU7Yi56b29tcmVzdG9yZT17c3R5bGU6e319O3ZhciBoPVwicG9zaXRpb24sdG9wLGxlZnQsekluZGV4LGJhY2tncm91bmRDb2xvcixtYXJnaW5Ub3AsbWFyZ2luQm90dG9tLG1hcmdpbkxlZnQsbWFyZ2luUmlnaHRcIi5zcGxpdChcIixcIiksXG5nPWIud2luWzBdLnN0eWxlLGk7Zm9yKGkgaW4gaCl7dmFyIGo9aFtpXTtiLnpvb21yZXN0b3JlLnN0eWxlW2pdPXR5cGVvZiBnW2pdIT1cInVuZGVmaW5lZFwiP2dbal06XCJcIn1iLnpvb21yZXN0b3JlLnN0eWxlLndpZHRoPWIud2luLmNzcyhcIndpZHRoXCIpO2Iuem9vbXJlc3RvcmUuc3R5bGUuaGVpZ2h0PWIud2luLmNzcyhcImhlaWdodFwiKTtiLnpvb21yZXN0b3JlLnBhZGRpbmc9e3c6Yi53aW4ub3V0ZXJXaWR0aCgpLWIud2luLndpZHRoKCksaDpiLndpbi5vdXRlckhlaWdodCgpLWIud2luLmhlaWdodCgpfTtpZihmLmlzaW9zNCliLnpvb21yZXN0b3JlLnNjcm9sbFRvcD1lKHdpbmRvdykuc2Nyb2xsVG9wKCksZSh3aW5kb3cpLnNjcm9sbFRvcCgwKTtiLndpbi5jc3Moe3Bvc2l0aW9uOmYuaXNpb3M0P1wiYWJzb2x1dGVcIjpcImZpeGVkXCIsdG9wOjAsbGVmdDowLFwiei1pbmRleFwiOmIub3B0LnppbmRleCsxMDAsbWFyZ2luOlwiMHB4XCJ9KTtoPWIud2luLmNzcyhcImJhY2tncm91bmRDb2xvclwiKTtcbihoPT1cIlwifHwvdHJhbnNwYXJlbnR8cmdiYVxcKDAsIDAsIDAsIDBcXCl8cmdiYVxcKDAsMCwwLDBcXCkvLnRlc3QoaCkpJiZiLndpbi5jc3MoXCJiYWNrZ3JvdW5kQ29sb3JcIixcIiNmZmZcIik7Yi5yYWlsLmNzcyh7XCJ6LWluZGV4XCI6Yi5vcHQuemluZGV4KzExMH0pO2Iuem9vbS5jc3Moe1wiei1pbmRleFwiOmIub3B0LnppbmRleCsxMTJ9KTtiLnpvb20uY3NzKFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsXCIwcHggLTE4cHhcIik7Yi5yZXNpemVab29tKCk7Yi5vbnpvb21pbiYmYi5vbnpvb21pbi5jYWxsKGIpO3JldHVybiBiLmNhbmNlbEV2ZW50KGMpfX07dGhpcy5kb1pvb21PdXQ9ZnVuY3Rpb24oYyl7aWYoYi56b29tYWN0aXZlKXJldHVybiBiLnpvb21hY3RpdmU9ZmFsc2UsYi53aW4uY3NzKFwibWFyZ2luXCIsXCJcIiksYi53aW4uY3NzKGIuem9vbXJlc3RvcmUuc3R5bGUpLGYuaXNpb3M0JiZlKHdpbmRvdykuc2Nyb2xsVG9wKGIuem9vbXJlc3RvcmUuc2Nyb2xsVG9wKSxiLnJhaWwuY3NzKHtcInotaW5kZXhcIjpiLmlzcGFnZT9cbmIub3B0LnppbmRleDpiLm9wdC56aW5kZXgrMn0pLGIuem9vbS5jc3Moe1wiei1pbmRleFwiOmIub3B0LnppbmRleH0pLGIuem9vbXJlc3RvcmU9ZmFsc2UsYi56b29tLmNzcyhcImJhY2tncm91bmRQb3NpdGlvblwiLFwiMHB4IDBweFwiKSxiLm9uUmVzaXplKCksYi5vbnpvb21vdXQmJmIub256b29tb3V0LmNhbGwoYiksYi5jYW5jZWxFdmVudChjKX07dGhpcy5kb1pvb209ZnVuY3Rpb24oYyl7cmV0dXJuIGIuem9vbWFjdGl2ZT9iLmRvWm9vbU91dChjKTpiLmRvWm9vbUluKGMpfTt0aGlzLnJlc2l6ZVpvb209ZnVuY3Rpb24oKXtpZihiLnpvb21hY3RpdmUpe3ZhciBjPWIuZ2V0U2Nyb2xsVG9wKCk7Yi53aW4uY3NzKHt3aWR0aDplKHdpbmRvdykud2lkdGgoKS1iLnpvb21yZXN0b3JlLnBhZGRpbmcudytcInB4XCIsaGVpZ2h0OmUod2luZG93KS5oZWlnaHQoKS1iLnpvb21yZXN0b3JlLnBhZGRpbmcuaCtcInB4XCJ9KTtiLm9uUmVzaXplKCk7Y29uc29sZS5sb2coYyk7Yi5zZXRTY3JvbGxUb3AoTWF0aC5taW4oYi5wYWdlLm1heGgsXG5jKSl9fTt0aGlzLmluaXQoKTtlLm5pY2VzY3JvbGwucHVzaCh0aGlzKX0sej1mdW5jdGlvbihlKXt2YXIgYz10aGlzO3RoaXMubmM9ZTt0aGlzLnN0ZXB0aW1lPXRoaXMubGFzdHRpbWU9dGhpcy5zcGVlZHk9dGhpcy5zcGVlZHg9dGhpcy5sYXN0eT10aGlzLmxhc3R4PTA7dGhpcy5zbmFweT10aGlzLnNuYXB4PWZhbHNlO3RoaXMuZGVtdWx5PXRoaXMuZGVtdWx4PTA7dGhpcy5sYXN0c2Nyb2xseT10aGlzLmxhc3RzY3JvbGx4PS0xO3RoaXMudGltZXI9dGhpcy5jaGt5PXRoaXMuY2hreD0wO3RoaXMudGltZT1mdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX07dGhpcy5yZXNldD1mdW5jdGlvbihlLGkpe2Muc3RvcCgpO3ZhciBiPWMudGltZSgpO2Muc3RlcHRpbWU9MDtjLmxhc3R0aW1lPWI7Yy5zcGVlZHg9MDtjLnNwZWVkeT0wO2MubGFzdHg9ZTtjLmxhc3R5PWk7Yy5sYXN0c2Nyb2xseD0tMTtjLmxhc3RzY3JvbGx5PS0xfTt0aGlzLnVwZGF0ZT1mdW5jdGlvbihlLGkpe3ZhciBiPWMudGltZSgpO1xuYy5zdGVwdGltZT1iLWMubGFzdHRpbWU7Yy5sYXN0dGltZT1iO3ZhciBiPWktYy5sYXN0eSxqPWUtYy5sYXN0eCxmPWMubmMuZ2V0U2Nyb2xsVG9wKCksbT1jLm5jLmdldFNjcm9sbExlZnQoKTtmKz1iO20rPWo7Yy5zbmFweD1tPDB8fG0+Yy5uYy5wYWdlLm1heHc7Yy5zbmFweT1mPDB8fGY+Yy5uYy5wYWdlLm1heGg7Yy5zcGVlZHg9ajtjLnNwZWVkeT1iO2MubGFzdHg9ZTtjLmxhc3R5PWl9O3RoaXMuc3RvcD1mdW5jdGlvbigpe2MubmMudW5zeW5jaGVkKFwiZG9tb21lbnR1bTJkXCIpO2MudGltZXImJmNsZWFyVGltZW91dChjLnRpbWVyKTtjLnRpbWVyPTA7Yy5sYXN0c2Nyb2xseD0tMTtjLmxhc3RzY3JvbGx5PS0xfTt0aGlzLmRvU25hcHk9ZnVuY3Rpb24oZSxpKXt2YXIgYj1mYWxzZTtpZihpPDApaT0wLGI9dHJ1ZTtlbHNlIGlmKGk+Yy5uYy5wYWdlLm1heGgpaT1jLm5jLnBhZ2UubWF4aCxiPXRydWU7aWYoZTwwKWU9MCxiPXRydWU7ZWxzZSBpZihlPmMubmMucGFnZS5tYXh3KWU9XG5jLm5jLnBhZ2UubWF4dyxiPXRydWU7YiYmYy5uYy5kb1Njcm9sbFBvcyhlLGksYy5uYy5vcHQuc25hcGJhY2tzcGVlZCl9O3RoaXMuZG9Nb21lbnR1bT1mdW5jdGlvbihlKXt2YXIgaT1jLnRpbWUoKSxiPWU/aStlOmMubGFzdHRpbWUsZT1jLm5jLmdldFNjcm9sbExlZnQoKSxqPWMubmMuZ2V0U2Nyb2xsVG9wKCksZj1jLm5jLnBhZ2UubWF4aCxtPWMubmMucGFnZS5tYXh3O2Muc3BlZWR4PW0+MD9NYXRoLm1pbig2MCxjLnNwZWVkeCk6MDtjLnNwZWVkeT1mPjA/TWF0aC5taW4oNjAsYy5zcGVlZHkpOjA7Yj1iJiZpLWI8PTUwO2lmKGo8MHx8aj5mfHxlPDB8fGU+bSliPWZhbHNlO2U9Yy5zcGVlZHgmJmI/Yy5zcGVlZHg6ZmFsc2U7aWYoYy5zcGVlZHkmJmImJmMuc3BlZWR5fHxlKXt2YXIgbz1NYXRoLm1heCgxNixjLnN0ZXB0aW1lKTtvPjUwJiYoZT1vLzUwLGMuc3BlZWR4Kj1lLGMuc3BlZWR5Kj1lLG89NTApO2MuZGVtdWx4eT0wO2MubGFzdHNjcm9sbHg9Yy5uYy5nZXRTY3JvbGxMZWZ0KCk7XG5jLmNoa3g9Yy5sYXN0c2Nyb2xseDtjLmxhc3RzY3JvbGx5PWMubmMuZ2V0U2Nyb2xsVG9wKCk7Yy5jaGt5PWMubGFzdHNjcm9sbHk7dmFyIGQ9Yy5sYXN0c2Nyb2xseCxsPWMubGFzdHNjcm9sbHksZz1mdW5jdGlvbigpe3ZhciBiPWMudGltZSgpLWk+NjAwPzAuMDQ6MC4wMjtpZihjLnNwZWVkeCYmKGQ9TWF0aC5mbG9vcihjLmxhc3RzY3JvbGx4LWMuc3BlZWR4KigxLWMuZGVtdWx4eSkpLGMubGFzdHNjcm9sbHg9ZCxkPDB8fGQ+bSkpYj0wLjE7aWYoYy5zcGVlZHkmJihsPU1hdGguZmxvb3IoYy5sYXN0c2Nyb2xseS1jLnNwZWVkeSooMS1jLmRlbXVseHkpKSxjLmxhc3RzY3JvbGx5PWwsbDwwfHxsPmYpKWI9MC4xO2MuZGVtdWx4eT1NYXRoLm1pbigxLGMuZGVtdWx4eStiKTtjLm5jLnN5bmNoZWQoXCJkb21vbWVudHVtMmRcIixmdW5jdGlvbigpe2lmKGMuc3BlZWR4KWMubmMuZ2V0U2Nyb2xsTGVmdCgpIT1jLmNoa3gmJmMuc3RvcCgpLGMuY2hreD1kLGMubmMuc2V0U2Nyb2xsTGVmdChkKTtcbmlmKGMuc3BlZWR5KWMubmMuZ2V0U2Nyb2xsVG9wKCkhPWMuY2hreSYmYy5zdG9wKCksYy5jaGt5PWwsYy5uYy5zZXRTY3JvbGxUb3AobCk7Yy50aW1lcnx8KGMubmMuaGlkZUN1cnNvcigpLGMuZG9TbmFweShkLGwpKX0pO2MuZGVtdWx4eTwxP2MudGltZXI9c2V0VGltZW91dChnLG8pOihjLnN0b3AoKSxjLm5jLmhpZGVDdXJzb3IoKSxjLmRvU25hcHkoZCxsKSl9O2coKX1lbHNlIGMuZG9TbmFweShjLm5jLmdldFNjcm9sbExlZnQoKSxjLm5jLmdldFNjcm9sbFRvcCgpKX19LHQ9ZS5mbi5zY3JvbGxUb3A7ZS5jc3NIb29rcy5wYWdlWU9mZnNldD17Z2V0OmZ1bmN0aW9uKGope3ZhciBjPWUuZGF0YShqLFwiX19uaWNlc2Nyb2xsXCIpfHxmYWxzZTtyZXR1cm4gYyYmYy5pc2h3c2Nyb2xsP2MuZ2V0U2Nyb2xsVG9wKCk6dC5jYWxsKGopfSxzZXQ6ZnVuY3Rpb24oaixjKXt2YXIgaD1lLmRhdGEoaixcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2U7aCYmaC5pc2h3c2Nyb2xsP2guc2V0U2Nyb2xsVG9wKHBhcnNlSW50KGMpKTpcbnQuY2FsbChqLGMpO3JldHVybiB0aGlzfX07ZS5mbi5zY3JvbGxUb3A9ZnVuY3Rpb24oail7aWYodHlwZW9mIGo9PVwidW5kZWZpbmVkXCIpe3ZhciBjPXRoaXNbMF0/ZS5kYXRhKHRoaXNbMF0sXCJfX25pY2VzY3JvbGxcIil8fGZhbHNlOmZhbHNlO3JldHVybiBjJiZjLmlzaHdzY3JvbGw/Yy5nZXRTY3JvbGxUb3AoKTp0LmNhbGwodGhpcyl9ZWxzZSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9ZS5kYXRhKHRoaXMsXCJfX25pY2VzY3JvbGxcIil8fGZhbHNlO2MmJmMuaXNod3Njcm9sbD9jLnNldFNjcm9sbFRvcChwYXJzZUludChqKSk6dC5jYWxsKGUodGhpcyksail9KX07dmFyIHU9ZS5mbi5zY3JvbGxMZWZ0O2UuY3NzSG9va3MucGFnZVhPZmZzZXQ9e2dldDpmdW5jdGlvbihqKXt2YXIgYz1lLmRhdGEoaixcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2U7cmV0dXJuIGMmJmMuaXNod3Njcm9sbD9jLmdldFNjcm9sbExlZnQoKTp1LmNhbGwoail9LHNldDpmdW5jdGlvbihqLGMpe3ZhciBoPVxuZS5kYXRhKGosXCJfX25pY2VzY3JvbGxcIil8fGZhbHNlO2gmJmguaXNod3Njcm9sbD9oLnNldFNjcm9sbExlZnQocGFyc2VJbnQoYykpOnUuY2FsbChqLGMpO3JldHVybiB0aGlzfX07ZS5mbi5zY3JvbGxMZWZ0PWZ1bmN0aW9uKGope2lmKHR5cGVvZiBqPT1cInVuZGVmaW5lZFwiKXt2YXIgYz10aGlzWzBdP2UuZGF0YSh0aGlzWzBdLFwiX19uaWNlc2Nyb2xsXCIpfHxmYWxzZTpmYWxzZTtyZXR1cm4gYyYmYy5pc2h3c2Nyb2xsP2MuZ2V0U2Nyb2xsTGVmdCgpOnUuY2FsbCh0aGlzKX1lbHNlIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1lLmRhdGEodGhpcyxcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2U7YyYmYy5pc2h3c2Nyb2xsP2Muc2V0U2Nyb2xsTGVmdChwYXJzZUludChqKSk6dS5jYWxsKGUodGhpcyksail9KX07dmFyIHY9ZnVuY3Rpb24oail7dmFyIGM9dGhpczt0aGlzLmxlbmd0aD0wO3RoaXMubmFtZT1cIm5pY2VzY3JvbGxhcnJheVwiO3RoaXMuZWFjaD1mdW5jdGlvbihlKXtmb3IodmFyIGI9XG4wO2I8Yy5sZW5ndGg7YisrKWUuY2FsbChjW2JdKTtyZXR1cm4gY307dGhpcy5wdXNoPWZ1bmN0aW9uKGUpe2NbYy5sZW5ndGhdPWU7Yy5sZW5ndGgrK307dGhpcy5lcT1mdW5jdGlvbihlKXtyZXR1cm4gY1tlXX07aWYoailmb3IoYT0wO2E8ai5sZW5ndGg7YSsrKXt2YXIgaD1lLmRhdGEoalthXSxcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2U7aCYmKHRoaXNbdGhpcy5sZW5ndGhdPWgsdGhpcy5sZW5ndGgrKyl9cmV0dXJuIHRoaXN9OyhmdW5jdGlvbihlLGMsaCl7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspaChlLGNbaV0pfSkodi5wcm90b3R5cGUsXCJzaG93LGhpZGUsdG9nZ2xlLG9uUmVzaXplLHJlc2l6ZSxyZW1vdmUsc3RvcCxkb1Njcm9sbFBvc1wiLnNwbGl0KFwiLFwiKSxmdW5jdGlvbihlLGMpe2VbY109ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXNbY10uYXBwbHkodGhpcyxlKX0pfX0pO2UuZm4uZ2V0TmljZVNjcm9sbD1cbmZ1bmN0aW9uKGope3JldHVybiB0eXBlb2Ygaj09XCJ1bmRlZmluZWRcIj9uZXcgdih0aGlzKTplLmRhdGEodGhpc1tqXSxcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2V9O2UuZXh0ZW5kKGUuZXhwcltcIjpcIl0se25pY2VzY3JvbGw6ZnVuY3Rpb24oail7cmV0dXJuIGUuZGF0YShqLFwiX19uaWNlc2Nyb2xsXCIpP3RydWU6ZmFsc2V9fSk7ZS5mbi5uaWNlU2Nyb2xsPWZ1bmN0aW9uKGosYyl7dHlwZW9mIGM9PVwidW5kZWZpbmVkXCImJnR5cGVvZiBqPT1cIm9iamVjdFwiJiYhKFwianF1ZXJ5XCJpbiBqKSYmKGM9aixqPWZhbHNlKTt2YXIgaD1uZXcgdjt0eXBlb2YgYz09XCJ1bmRlZmluZWRcIiYmKGM9e30pO2lmKGopYy5kb2M9ZShqKSxjLndpbj1lKHRoaXMpO3ZhciBpPSEoXCJkb2NcImluIGMpO2lmKCFpJiYhKFwid2luXCJpbiBjKSljLndpbj1lKHRoaXMpO3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWUodGhpcykuZGF0YShcIl9fbmljZXNjcm9sbFwiKXx8ZmFsc2U7aWYoIWIpYy5kb2M9aT9lKHRoaXMpOmMuZG9jLFxuYj1uZXcgRihjLGUodGhpcykpLGUodGhpcykuZGF0YShcIl9fbmljZXNjcm9sbFwiLGIpO2gucHVzaChiKX0pO3JldHVybiBoLmxlbmd0aD09MT9oWzBdOmh9O3dpbmRvdy5OaWNlU2Nyb2xsPXtnZXRqUXVlcnk6ZnVuY3Rpb24oKXtyZXR1cm4gZX19O2lmKCFlLm5pY2VzY3JvbGwpZS5uaWNlc2Nyb2xsPW5ldyB2fSkoalF1ZXJ5KTtcbiJdLCJmaWxlIjoianF1ZXJ5Lm5pY2VzY3JvbGwubWluLmpzIn0=
