/*!
 * Retina.js v1.1.0
 *
 * Copyright 2013 Imulus, LLC
 * Released under the MIT license
 *
 * Retina.js is an open source script that makes it easy to serve
 * high-resolution images to devices with retina displays.
 */
(function(){var root=typeof exports=="undefined"?window:exports;var config={check_mime_type:true};root.Retina=Retina;function Retina(){}Retina.configure=function(options){if(options==null)options={};for(var prop in options)config[prop]=options[prop]};Retina.init=function(context){if(context==null)context=root;var existing_onload=context.onload||new Function;context.onload=function(){var images=document.getElementsByTagName("img"),retinaImages=[],i,image;for(i=0;i<images.length;i++){image=images[i];retinaImages.push(new RetinaImage(image))}existing_onload()}};Retina.isRetina=function(){var mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";if(root.devicePixelRatio>1)return true;if(root.matchMedia&&root.matchMedia(mediaQuery).matches)return true;return false};root.RetinaImagePath=RetinaImagePath;function RetinaImagePath(path,at_2x_path){this.path=path;if(typeof at_2x_path!=="undefined"&&at_2x_path!==null){this.at_2x_path=at_2x_path;this.perform_check=false}else{this.at_2x_path=path.replace(/\.\w+$/,function(match){return"@2x"+match});this.perform_check=true}}RetinaImagePath.confirmed_paths=[];RetinaImagePath.prototype.is_external=function(){return!!(this.path.match(/^https?\:/i)&&!this.path.match("//"+document.domain))};RetinaImagePath.prototype.check_2x_variant=function(callback){var http,that=this;if(this.is_external()){return callback(false)}else if(!this.perform_check&&typeof this.at_2x_path!=="undefined"&&this.at_2x_path!==null){return callback(true)}else if(this.at_2x_path in RetinaImagePath.confirmed_paths){return callback(true)}else{http=new XMLHttpRequest;http.open("HEAD",this.at_2x_path);http.onreadystatechange=function(){if(http.readyState!=4){return callback(false)}if(http.status>=200&&http.status<=399){if(config.check_mime_type){var type=http.getResponseHeader("Content-Type");if(type==null||!type.match(/^image/i)){return callback(false)}}RetinaImagePath.confirmed_paths.push(that.at_2x_path);return callback(true)}else{return callback(false)}};http.send()}};function RetinaImage(el){this.el=el;this.path=new RetinaImagePath(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var that=this;this.path.check_2x_variant(function(hasVariant){if(hasVariant)that.swap()})}root.RetinaImage=RetinaImage;RetinaImage.prototype.swap=function(path){if(typeof path=="undefined")path=this.path.at_2x_path;var that=this;function load(){if(!that.el.complete){setTimeout(load,5)}else{that.el.setAttribute("width",that.el.offsetWidth);that.el.setAttribute("height",that.el.offsetHeight);that.el.setAttribute("src",path)}}load()};if(Retina.isRetina()){Retina.init(root)}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJyZXRpbmEtMS4xLjAubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogUmV0aW5hLmpzIHYxLjEuMFxuICpcbiAqIENvcHlyaWdodCAyMDEzIEltdWx1cywgTExDXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqXG4gKiBSZXRpbmEuanMgaXMgYW4gb3BlbiBzb3VyY2Ugc2NyaXB0IHRoYXQgbWFrZXMgaXQgZWFzeSB0byBzZXJ2ZVxuICogaGlnaC1yZXNvbHV0aW9uIGltYWdlcyB0byBkZXZpY2VzIHdpdGggcmV0aW5hIGRpc3BsYXlzLlxuICovXG4oZnVuY3Rpb24oKXt2YXIgcm9vdD10eXBlb2YgZXhwb3J0cz09XCJ1bmRlZmluZWRcIj93aW5kb3c6ZXhwb3J0czt2YXIgY29uZmlnPXtjaGVja19taW1lX3R5cGU6dHJ1ZX07cm9vdC5SZXRpbmE9UmV0aW5hO2Z1bmN0aW9uIFJldGluYSgpe31SZXRpbmEuY29uZmlndXJlPWZ1bmN0aW9uKG9wdGlvbnMpe2lmKG9wdGlvbnM9PW51bGwpb3B0aW9ucz17fTtmb3IodmFyIHByb3AgaW4gb3B0aW9ucyljb25maWdbcHJvcF09b3B0aW9uc1twcm9wXX07UmV0aW5hLmluaXQ9ZnVuY3Rpb24oY29udGV4dCl7aWYoY29udGV4dD09bnVsbCljb250ZXh0PXJvb3Q7dmFyIGV4aXN0aW5nX29ubG9hZD1jb250ZXh0Lm9ubG9hZHx8bmV3IEZ1bmN0aW9uO2NvbnRleHQub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGltYWdlcz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKSxyZXRpbmFJbWFnZXM9W10saSxpbWFnZTtmb3IoaT0wO2k8aW1hZ2VzLmxlbmd0aDtpKyspe2ltYWdlPWltYWdlc1tpXTtyZXRpbmFJbWFnZXMucHVzaChuZXcgUmV0aW5hSW1hZ2UoaW1hZ2UpKX1leGlzdGluZ19vbmxvYWQoKX19O1JldGluYS5pc1JldGluYT1mdW5jdGlvbigpe3ZhciBtZWRpYVF1ZXJ5PVwiKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMS41KSwgICAgICAgICAgICAgICAgICAgICAgKG1pbi0tbW96LWRldmljZS1waXhlbC1yYXRpbzogMS41KSwgICAgICAgICAgICAgICAgICAgICAgKC1vLW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDMvMiksICAgICAgICAgICAgICAgICAgICAgIChtaW4tcmVzb2x1dGlvbjogMS41ZHBweClcIjtpZihyb290LmRldmljZVBpeGVsUmF0aW8+MSlyZXR1cm4gdHJ1ZTtpZihyb290Lm1hdGNoTWVkaWEmJnJvb3QubWF0Y2hNZWRpYShtZWRpYVF1ZXJ5KS5tYXRjaGVzKXJldHVybiB0cnVlO3JldHVybiBmYWxzZX07cm9vdC5SZXRpbmFJbWFnZVBhdGg9UmV0aW5hSW1hZ2VQYXRoO2Z1bmN0aW9uIFJldGluYUltYWdlUGF0aChwYXRoLGF0XzJ4X3BhdGgpe3RoaXMucGF0aD1wYXRoO2lmKHR5cGVvZiBhdF8yeF9wYXRoIT09XCJ1bmRlZmluZWRcIiYmYXRfMnhfcGF0aCE9PW51bGwpe3RoaXMuYXRfMnhfcGF0aD1hdF8yeF9wYXRoO3RoaXMucGVyZm9ybV9jaGVjaz1mYWxzZX1lbHNle3RoaXMuYXRfMnhfcGF0aD1wYXRoLnJlcGxhY2UoL1xcLlxcdyskLyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuXCJAMnhcIittYXRjaH0pO3RoaXMucGVyZm9ybV9jaGVjaz10cnVlfX1SZXRpbmFJbWFnZVBhdGguY29uZmlybWVkX3BhdGhzPVtdO1JldGluYUltYWdlUGF0aC5wcm90b3R5cGUuaXNfZXh0ZXJuYWw9ZnVuY3Rpb24oKXtyZXR1cm4hISh0aGlzLnBhdGgubWF0Y2goL15odHRwcz9cXDovaSkmJiF0aGlzLnBhdGgubWF0Y2goXCIvL1wiK2RvY3VtZW50LmRvbWFpbikpfTtSZXRpbmFJbWFnZVBhdGgucHJvdG90eXBlLmNoZWNrXzJ4X3ZhcmlhbnQ9ZnVuY3Rpb24oY2FsbGJhY2spe3ZhciBodHRwLHRoYXQ9dGhpcztpZih0aGlzLmlzX2V4dGVybmFsKCkpe3JldHVybiBjYWxsYmFjayhmYWxzZSl9ZWxzZSBpZighdGhpcy5wZXJmb3JtX2NoZWNrJiZ0eXBlb2YgdGhpcy5hdF8yeF9wYXRoIT09XCJ1bmRlZmluZWRcIiYmdGhpcy5hdF8yeF9wYXRoIT09bnVsbCl7cmV0dXJuIGNhbGxiYWNrKHRydWUpfWVsc2UgaWYodGhpcy5hdF8yeF9wYXRoIGluIFJldGluYUltYWdlUGF0aC5jb25maXJtZWRfcGF0aHMpe3JldHVybiBjYWxsYmFjayh0cnVlKX1lbHNle2h0dHA9bmV3IFhNTEh0dHBSZXF1ZXN0O2h0dHAub3BlbihcIkhFQURcIix0aGlzLmF0XzJ4X3BhdGgpO2h0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoaHR0cC5yZWFkeVN0YXRlIT00KXtyZXR1cm4gY2FsbGJhY2soZmFsc2UpfWlmKGh0dHAuc3RhdHVzPj0yMDAmJmh0dHAuc3RhdHVzPD0zOTkpe2lmKGNvbmZpZy5jaGVja19taW1lX3R5cGUpe3ZhciB0eXBlPWh0dHAuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7aWYodHlwZT09bnVsbHx8IXR5cGUubWF0Y2goL15pbWFnZS9pKSl7cmV0dXJuIGNhbGxiYWNrKGZhbHNlKX19UmV0aW5hSW1hZ2VQYXRoLmNvbmZpcm1lZF9wYXRocy5wdXNoKHRoYXQuYXRfMnhfcGF0aCk7cmV0dXJuIGNhbGxiYWNrKHRydWUpfWVsc2V7cmV0dXJuIGNhbGxiYWNrKGZhbHNlKX19O2h0dHAuc2VuZCgpfX07ZnVuY3Rpb24gUmV0aW5hSW1hZ2UoZWwpe3RoaXMuZWw9ZWw7dGhpcy5wYXRoPW5ldyBSZXRpbmFJbWFnZVBhdGgodGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJzcmNcIiksdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0MnhcIikpO3ZhciB0aGF0PXRoaXM7dGhpcy5wYXRoLmNoZWNrXzJ4X3ZhcmlhbnQoZnVuY3Rpb24oaGFzVmFyaWFudCl7aWYoaGFzVmFyaWFudCl0aGF0LnN3YXAoKX0pfXJvb3QuUmV0aW5hSW1hZ2U9UmV0aW5hSW1hZ2U7UmV0aW5hSW1hZ2UucHJvdG90eXBlLnN3YXA9ZnVuY3Rpb24ocGF0aCl7aWYodHlwZW9mIHBhdGg9PVwidW5kZWZpbmVkXCIpcGF0aD10aGlzLnBhdGguYXRfMnhfcGF0aDt2YXIgdGhhdD10aGlzO2Z1bmN0aW9uIGxvYWQoKXtpZighdGhhdC5lbC5jb21wbGV0ZSl7c2V0VGltZW91dChsb2FkLDUpfWVsc2V7dGhhdC5lbC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoYXQuZWwub2Zmc2V0V2lkdGgpO3RoYXQuZWwuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsdGhhdC5lbC5vZmZzZXRIZWlnaHQpO3RoYXQuZWwuc2V0QXR0cmlidXRlKFwic3JjXCIscGF0aCl9fWxvYWQoKX07aWYoUmV0aW5hLmlzUmV0aW5hKCkpe1JldGluYS5pbml0KHJvb3QpfX0pKCk7Il0sImZpbGUiOiJyZXRpbmEtMS4xLjAubWluLmpzIn0=
